{
  "version": 3,
  "sources": ["main.ts", "cardView.ts"],
  "sourcesContent": ["import { App, PluginManifest,Plugin, PluginSettingTab, Setting, TFile, WorkspaceLeaf } from 'obsidian';\r\nimport { CardView, VIEW_TYPE_CARD } from './cardView';\r\n\r\ninterface CardViewPluginSettings {\r\n    defaultView: 'card' | 'list' | 'timeline';\r\n    cardWidth: number;\r\n    minCardWidth: number;\r\n    maxCardWidth: number;\r\n}\r\n\r\nconst DEFAULT_SETTINGS: CardViewPluginSettings = {\r\n    defaultView: 'card',\r\n    cardWidth: 280,\r\n    minCardWidth: 280,\r\n    maxCardWidth: 600\r\n}\r\n\r\nclass CardViewSettingTab extends PluginSettingTab {\r\n    plugin: CardViewPlugin;\r\n\r\n    constructor(app: App, plugin: CardViewPlugin) {\r\n        super(app, plugin);\r\n        this.plugin = plugin;\r\n    }\r\n\r\n    display(): void {\r\n        const { containerEl } = this;\r\n        containerEl.empty();\r\n\r\n        new Setting(containerEl)\r\n            .setName('\u9ED8\u8BA4\u89C6\u56FE')\r\n            .setDesc('\u9009\u62E9\u9ED8\u8BA4\u7684\u89C6\u56FE1\u6A21\u5F0F')\r\n            .addDropdown(dropdown => {\r\n                dropdown\r\n                    .addOption('card', '\u5361\u7247\u89C6\u56FE')\r\n                    .addOption('list', '\u5217\u8868\u89C6\u56FE')\r\n                    .addOption('timeline', '\u65F6\u95F4\u8F74\u89C6\u56FE')\r\n                    .setValue(this.plugin.settings.defaultView);\r\n                \r\n                dropdown.onChange(async (value) => {\r\n                    if (value === 'card' || value === 'list' || value === 'timeline') {\r\n                        this.plugin.settings.defaultView = value;\r\n                        await this.plugin.saveSettings();\r\n                    }\r\n                });\r\n            });\r\n\r\n        new Setting(containerEl)\r\n            .setName('\u5361\u7247\u5BBD\u5EA6')\r\n            .setDesc('\u8BBE\u7F6E\u5361\u7247\u7684\u5BBD\u5EA6\uFF08280-600\u50CF\u7D20\uFF09')\r\n            .addText(text => text\r\n                .setPlaceholder('280')\r\n                .setValue(this.plugin.settings.cardWidth.toString())\r\n                .onChange(async (value) => {\r\n                    const width = Number(value);\r\n                    if (!isNaN(width) && width >= 280 && width <= 600) {\r\n                        this.plugin.settings.cardWidth = width;\r\n                        await this.plugin.saveSettings();\r\n                        this.plugin.updateAllCardViews();\r\n                    }\r\n                }));\r\n\r\n        new Setting(containerEl)\r\n            .setName('\u6700\u5C0F\u5BBD\u5EA6')\r\n            .setDesc('\u8BBE\u7F6E\u5361\u7247\u7684\u6700\u5C0F\u5BBD\u5EA6\uFF08\u50CF\u7D20\uFF09')\r\n            .addText(text => text\r\n                .setPlaceholder('280')\r\n                .setValue(this.plugin.settings.minCardWidth.toString())\r\n                .onChange(async (value) => {\r\n                    const width = Number(value);\r\n                    if (!isNaN(width) && width >= 200) {\r\n                        this.plugin.settings.minCardWidth = width;\r\n                        await this.plugin.saveSettings();\r\n                    }\r\n                }));\r\n\r\n        new Setting(containerEl)\r\n            .setName('\u6700\u5927\u5BBD\u5EA6')\r\n            .setDesc('\u8BBE\u7F6E\u5361\u7247\u7684\u6700\u5927\u5BBD\u5EA6\uFF08\u50CF\u7D20\uFF09')\r\n            .addText(text => text\r\n                .setPlaceholder('600')\r\n                .setValue(this.plugin.settings.maxCardWidth.toString())\r\n                .onChange(async (value) => {\r\n                    const width = Number(value);\r\n                    if (!isNaN(width) && width <= 800) {\r\n                        this.plugin.settings.maxCardWidth = width;\r\n                        await this.plugin.saveSettings();\r\n                    }\r\n                }));\r\n    }\r\n}\r\n\r\nexport default class CardViewPlugin extends Plugin {\r\n    settings: CardViewPluginSettings;\r\n\r\n    constructor(app: App, manifest: PluginManifest) { // \u6DFB\u52A0 manifest \u53C2\u6570\r\n        super(app, manifest); // \u4F20\u9012 manifest\r\n        this.settings = DEFAULT_SETTINGS; // \u521D\u59CB\u5316 settings\r\n    }\r\n    \r\n    async onload() {\r\n        // debugger; // \u8FD9\u91CC\u4F1A\u5728\u8C03\u8BD5\u65F6\u81EA\u52A8\u505C\u4F4F\r\n        await this.loadSettings();\r\n\r\n        this.registerView(\r\n            VIEW_TYPE_CARD,\r\n            (leaf: WorkspaceLeaf) => new CardView(leaf, this)\r\n        );\r\n\r\n        this.addRibbonIcon('layout-grid', '\u5361\u7247\u89C6\u56FE', () => {\r\n            this.activateView();\r\n        });\r\n\r\n        this.addSettingTab(new CardViewSettingTab(this.app, this));\r\n\r\n        // \u76D1\u542C\u6587\u4EF6\u5217\u8868\u7684\u70B9\u51FB\u4E8B\u4EF6\r\n        this.app.workspace.on(\"file-open\", (file: TFile | null) => {\r\n            if (file) {\r\n                this.handleFileOpen(file);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    handleFileOpen(file: TFile) {\r\n        // \u5904\u7406\u6587\u4EF6\u6253\u5F00\u4E8B\u4EF6\r\n        console.log(`\u6587\u4EF6 ${file.path} \u88AB1\u6253\u5F00`);\r\n        // \u5728\u8FD9\u91CC\u53EF\u4EE5\u6DFB\u52A0\u60A8\u60F3\u8981\u7684\u903B\u8F91\uFF0C\u4F8B\u5982\u66F4\u65B0\u89C6\u56FE\u6216\u663E\u793A\u76F8\u5173\u4FE1\u606F\r\n    }\r\n\r\n    handleFolderOpen(folder: string) { // \u65B0\u589E\u5904\u7406\u6587\u4EF6\u5939\u6253\u5F00\u7684\u51FD\u6570\r\n        console.log(`\u6587\u4EF6\u5939 ${folder} \u88AB\u6253\u5F00`);\r\n        // \u5728\u8FD9\u91CC\u53EF\u4EE5\u6DFB\u52A0\u60A8\u60F3\u8981\u7684\u903B\u8F91\uFF0C\u4F8B\u5982\u66F4\u65B0\u89C6\u56FE\u6216\u663E\u793A \u76F8\u5173\u4FE1\u606F\r\n    }\r\n\r\n    async loadSettings() {\r\n        this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());\r\n    }\r\n\r\n    async saveSettings() {\r\n        await this.saveData(this.settings);\r\n    }\r\n\r\n    async activateView() {\r\n        const { workspace } = this.app;\r\n        \r\n        let leaf = workspace.getLeavesOfType(VIEW_TYPE_CARD)[0];\r\n        if (!leaf) {\r\n            leaf = workspace.getLeaf('tab');\r\n            await leaf.setViewState({\r\n                type: VIEW_TYPE_CARD,\r\n                active: true,\r\n            });\r\n        }\r\n        workspace.revealLeaf(leaf);\r\n    }\r\n\r\n    updateAllCardViews() {\r\n        this.app.workspace.getLeavesOfType(VIEW_TYPE_CARD).forEach(leaf => {\r\n            const view = leaf.view as CardView;\r\n            if (view) {\r\n                view.updateCardSize(this.settings.cardWidth);\r\n            }\r\n        });\r\n    }\r\n\r\n    async saveCardWidth(width: number) {\r\n        this.settings.cardWidth = width;\r\n        await this.saveSettings();\r\n    }\r\n}", "import {\n    ItemView,\n    WorkspaceLeaf,\n    TFile,\n    MarkdownRenderer,\n    Menu,\n    Modal,\n    TFolder,\n    App,\n    Notice,\n} from 'obsidian';\nimport CardViewPlugin from './main';\n\nexport const VIEW_TYPE_CARD = 'card-view';\n\nexport class CardView extends ItemView {\n    private plugin: CardViewPlugin;\n    private currentView: 'card' | 'list' | 'timeline' | 'month';\n    private container: HTMLElement = createDiv();  \n    private tagContainer: HTMLElement = createDiv();    \n    private previewContainer: HTMLElement = createDiv();  \n    private previewResizer: HTMLElement = createDiv();  \n    private isPreviewCollapsed: boolean = false;\n    private searchInput: HTMLInputElement = createEl('input');  \n    private currentSearchTerm: string = '';\n    private selectedTags: Set<string> = new Set();\n    private selectedNotes: Set<string> = new Set();\n    private lastSelectedNote: string | null = null;\n    private recentFolders: string[] = [];\n    private cardSize: number = 280;  // \u9ED8\u8BA4\u5361\u7247\u5BBD\u5EA6\n    private calendarContainer: HTMLElement = createDiv();\n    private isCalendarVisible: boolean = false;\n    private currentDate: Date = new Date();\n    private currentFilter: { type: 'date' | 'none', value?: string } = { type: 'none' };\n    private monthViewContainer: HTMLElement = createDiv();\n    private isMonthViewVisible: boolean = false;\n\n    /**\n     * \u6784\u9020\u51FD\u6570\n     * @param leaf - \u5DE5\u4F5C\u533A\u53F6\u5B50\u8282\u70B9\n     * @param plugin - \u63D2\u4EF6\u5B9E\u4F8B\n     */\n    constructor(leaf: WorkspaceLeaf, plugin: CardViewPlugin) {\n        super(leaf);\n        this.plugin = plugin;\n        this.currentView = plugin.settings.defaultView;\n    }\n\n    /**\n     * \u83B7\u53D6\u89C6\u56FE\u7C7B\u578B\n     * @returns \u89C6\u56FE\u7C7B\u578B\u6807\u8BC6\u7B26\n     */\n    getViewType(): string {\n        return VIEW_TYPE_CARD;\n    }\n\n    /**\n     * \u83B7\u53D6\u89C6\u56FE\u663E\u793A\u6587\u672C\n     * @returns \u663E\u793A\u5728\u6807\u7B7E\u9875\u4E0A\u7684\u6587\u672C\n     */\n    getDisplayText(): string {\n        return '\u5361\u7247\u89C6\u56FE';\n    }\n\n    /**\n     * \u89C6\u56FE\u6253\u5F00\u65F6\u7684\u521D\u59CB\u5316\u51FD\u6570\n     * \u521B\u5EFA\u6807\u7B7E\u8FC7\u6EE4\u5668\u3001\u89C6\u56FE\u5207\u6362\u6309\u94AE\u548C\u5BB9\u5668\n     */\nasync onOpen() {\n        const { containerEl } = this;\n        containerEl.empty();\n        containerEl.addClass('card-view-container');\n        \n        // \u521B\u5EFA\u4E3B\u5E03\u5C40\u5BB9\u5668\n        const mainLayout = containerEl.createDiv('main-layout');\n        \n        // \u521B\u5EFA\u5DE6\u4FA7\u5185\u5BB9\u533A\u57DF\n        const contentSection = mainLayout.createDiv('content-section');\n        \n        // \u521B\u5EFA\u5DE5\u5177\u680F\n        const toolbar = contentSection.createDiv('card-view-toolbar');\n        \n        // \u5DE6\u4FA7\u5DE5\u5177\u7EC4\n        const leftTools = toolbar.createDiv('toolbar-left');\n        \n        // \u65B0\u5EFA\u7B14\u8BB0\u6309\u94AE\n        const newNoteBtn = leftTools.createEl('button', {\n            cls: 'new-note-button',\n        });\n        newNoteBtn.innerHTML = `\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-plus\"><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line></svg>\n            <span>\u65B0\u5EFA\u7B14\u8BB0</span>\n        `;\n        newNoteBtn.addEventListener('click', () => this.createNewNote());\n\n        // \u6DFB\u52A0\u65E5\u5386\u6309\u94AE - \u5728\u89C6\u56FE\u5207\u6362\u6309\u94AE\u4E4B\u524D\u6DFB\u52A0\n        this.createCalendarButton(leftTools);\n\n        // \u89C6\u56FE\u5207\u6362\u6309\u94AE\u7EC4\n        const viewSwitcher = leftTools.createDiv('view-switcher');\n        this.createViewSwitcher(viewSwitcher);\n\n        // \u53F3\u4FA7\u641C\u7D22\u6846\n        const searchContainer = toolbar.createDiv('search-container');\n        \n        // \u6DFB\u52A0\u547D\u4EE4\u6309\u94AE\uFF08\u5728\u641C\u7D22\u6846\u4E4B\u524D\uFF09\n        this.createCommandButton(searchContainer);\n        \n        this.searchInput = searchContainer.createEl('input', {\n            type: 'text',\n            placeholder: '\u641C\u7D22\u7B14\u8BB0...',\n            cls: 'search-input'\n        });\n        \n        // \u521D\u59CB\u5316\u641C\u7D22\u5904\u7406\n        this.setupSearch();\n\n        // \u6807\u7B7E\u680F\n        this.tagContainer = contentSection.createDiv('tag-filter');\n        await this.loadTags();\n\n        // \u521B\u5EFA\u4E3B\u5185\u5BB9\u533A\u57DF\n        const contentArea = contentSection.createDiv('card-view-content');\n        this.container = contentArea.createDiv('card-container');\n        \n        // \u4F7F\u7528\u4FDD\u5B58\u7684\u5BBD\u5EA6\u521D\u59CB\u5316\u5361\u7247\u5BB9\u5668\n        this.cardSize = this.plugin.settings.cardWidth;\n        this.container.style.gridTemplateColumns = `repeat(auto-fill, ${this.cardSize}px)`;\n\n        // \u521B\u5EFA\u9884\u89C8\u533A\u57DF\n        const previewWrapper = mainLayout.createDiv('preview-wrapper');\n        this.previewContainer = previewWrapper.createDiv('preview-container');\n        \n        // \u6DFB\u52A0\u9884\u89C8\u63A7\u5236\u6309\u94AE\n        const previewControls = previewWrapper.createDiv('preview-controls');\n        const toggleButton = previewControls.createEl('button', {\n            cls: 'preview-toggle',\n            attr: { 'aria-label': '\u6298\u53E0\u9884\u89C8' }\n        });\n        toggleButton.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-chevron-right\"><polyline points=\"9 18 15 12 9 6\"></polyline></svg>`;\n        \n        toggleButton.addEventListener('click', () => this.togglePreview());\n\n        // \u6DFB\u52A0\u8C03\u6574\u5927\u5C0F\u7684\u529F\u80FD\n        this.previewResizer = previewWrapper.createDiv('preview-resizer');\n        this.setupResizer();\n\n        // \u6DFB\u52A0\u5168\u5C40\u6EDA\u8F6E\u4E8B\u4EF6\u76D1\u542C\n        document.addEventListener('wheel', (e: WheelEvent) => {\n            if (e.ctrlKey) {\n                e.preventDefault();\n                this.adjustCardSize(e.deltaY);\n            }\n        }, { passive: false });\n\n        await this.loadNotes();\n\n        // \u521D\u59CB\u5316\u65E5\u5386\u5BB9\u5668\n        this.calendarContainer = createDiv();\n        this.calendarContainer.addClass('calendar-container');\n        this.calendarContainer.style.display = 'none';\n        \n        // \u5C06\u65E5\u5386\u5BB9\u5668\u6DFB\u52A0\u5230\u4E3B\u5E03\u5C40\u4E2D\n        const mainLayoutElement = containerEl.querySelector('.main-layout');  // \u4FEE\u6539\u53D8\u91CF\u540D\n        if (mainLayoutElement) {\n            mainLayoutElement.insertBefore(this.calendarContainer, mainLayoutElement.firstChild);\n        }\n\n        // \u5728\u5361\u7247\u5BB9\u5668\u7684\u4E8B\u4EF6\u5904\u7406\u4E2D\u6DFB\u52A0\n        const cardContainer = containerEl.querySelector('.card-container');\n        if (cardContainer) {\n            cardContainer.addEventListener('click', (e) => {\n                // \u5982\u679C\u70B9\u51FB\u7684\u662F\u5BB9\u5668\u672C\u8EAB(\u800C\u4E0D\u662F\u5361\u7247)\n                if (e.target === cardContainer) {\n                    // \u79FB\u9664\u6240\u6709\u5361\u7247\u7684selected\u7C7B\n                    const cards = cardContainer.querySelectorAll('.note-card');\n                    cards.forEach(card => {\n                        card.classList.remove('selected');\n                    });\n                } // \u8FD9\u91CC\u6DFB\u52A0\u4E86\u7F3A\u5931\u7684\u95ED\u5408\u62EC\u53F7\n            });\n        }\n    }\n\n    /**\n     * \u83B7\u53D6\u6240\u6709\u7B14\u8BB0\u4E2D\u7684\u6807\u7B7E\n     * @returns \u53BB\u91CD\u540E\u7684\u6807\u7B7E\u7EC4\n     */\n    private getAllTags(): string[] {\n        const tags = new Set<string>();\n        this.app.vault.getMarkdownFiles().forEach(file => {\n            const cache = this.app.metadataCache.getFileCache(file);\n            if (cache?.tags) {\n                cache.tags.forEach(tag => tags.add(tag.tag));\n            }\n        });\n        return Array.from(tags);\n    }\n\n\n\n    /**\n     * \u52A0\u8F7D\u6240\u6709\u6807\u7B7E\u5E76\u521B\u5EFA\u6807\u7B7E\u8FC7\u6EE4\u5668\n     */\n    private async loadTags() {\n        const tags = await this.getAllTags();  // \u786E\u4FDD\u4F7F\u7528 await\n\n        // \u6DFB\u52A0 \"All\" \u6807\u7B7E\n        const allTagBtn = this.tagContainer.createEl('button', {\n            text: 'All',\n            cls: 'tag-btn active'  // \u9ED8\u8BA4\u9009\u4E2D\n        });\n        allTagBtn.addEventListener('click', () => {\n            this.clearTagSelection();\n            allTagBtn.addClass('active');\n            this.refreshView();\n        });\n\n        // \u6DFB\u52A0\u5176\u4ED6\u6807\u7B7E\n        tags.forEach(tag => {\n            const tagBtn = this.tagContainer.createEl('button', { \n                text: tag,\n                cls: 'tag-btn'\n            });\n            tagBtn.addEventListener('click', (e) => {\n                e.stopPropagation();\n                this.toggleTag(tag, tagBtn);\n            });\n        });\n    } // \u786E\u4FDD\u65B9\u6CD5\u7ED3\u675F\n\n\n    /**\n     * \u521B\u5EFA\u89C6\u56FE\u5207\u6362\u6309\u94AE\n     * @param container - \u6309\u94AE\u5BB9\u5668\u5143\u7D20\n     */\n    private createViewSwitcher(container: HTMLElement) {\n        const views = [\n            { id: 'card', icon: 'grid', text: '\u5361\u7247\u89C6\u56FE' },\n            { id: 'list', icon: 'list', text: '\u5217\u8868\u89C6\u56FE' },\n            { id: 'timeline', icon: 'clock', text: '\u65F6\u95F4\u8F74\u89C6\u56FE' },\n            { id: 'month', icon: 'calendar', text: '\u6708\u89C6\u56FE' }\n        ];\n        \n        views.forEach(view => {\n            const btn = container.createEl('button', {\n                cls: `view-switch-btn ${view.id === this.currentView ? 'active' : ''}`,\n            });\n            \n            // \u76F4\u63A5 SVG \u56FE\u6807\n            const iconHtml = {\n                'grid': '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect x=\"3\" y=\"3\" width=\"7\" height=\"7\"></rect><rect x=\"14\" y=\"3\" width=\"7\" height=\"7\"></rect><rect x=\"14\" y=\"14\" width=\"7\" height=\"7\"></rect><rect x=\"3\" y=\"14\" width=\"7\" height=\"7\"></rect></svg>',\n                'list': '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><line x1=\"8\" y1=\"6\" x2=\"21\" y2=\"6\"></line><line x1=\"8\" y1=\"12\" x2=\"21\" y2=\"12\"></line><line x1=\"8\" y1=\"18\" x2=\"21\" y2=\"18\"></line><line x1=\"3\" y1=\"6\" x2=\"3.01\" y2=\"6\"></line><line x1=\"3\" y1=\"12\" x2=\"3.01\" y2=\"12\"></line><line x1=\"3\" y1=\"18\" x2=\"3.01\" y2=\"18\"></line></svg>',\n                'clock': '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><polyline points=\"12 6 12 12 16 14\"></polyline></svg>',\n                'calendar': '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"></line><line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"></line><line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"></line></svg>'\n            };\n            \n            // \u521B\u5EFA\u56FE\n            const iconSpan = btn.createSpan({ cls: 'view-switch-icon' });\n            iconSpan.innerHTML = iconHtml[view.icon as keyof typeof iconHtml];  // \u660E\u786E\u7C7B\u578B\n            \n            // \u6DFB\u52A0\u6587\u5B57\n            btn.createSpan({ text: view.text, cls: 'view-switch-text' });\n            \n            btn.addEventListener('click', () => {\n                container.querySelectorAll('.view-switch-btn').forEach(b => b.removeClass('active'));\n                btn.addClass('active');\n                this.switchView(view.id as 'card' | 'list' | 'timeline' | 'month');\n            });\n        });\n    }\n\n    // \u52A0\u8F7D\u6240\u6709\u7B14\u8BB0\u5E76\u521B\u5EFA\u5361\u7247\n    private async loadNotes() {\n        const files = this.app.vault.getMarkdownFiles();\n        this.container.empty();\n\n        // \u4F7F\u7528 Promise.all \u7B49\u5F85\u6240\u6709\u5361\u7247\u521B\u5EFA\u5B8C\u6210\n        const cards = await Promise.all(\n            files.map(file => this.createNoteCard(file))\n        );\n\n        // \u6DFB\u52A0\u6240\u6709\u5361\u7247\u5230\u5BB9\u5668\uFF0C\u5E76\u8BBE\u7F6E\u6B63\u786E\u7684\u5BBD\u5EA6\n        cards.forEach(card => {\n            if (card instanceof HTMLElement) {\n                card.style.width = `${this.cardSize}px`;\n                this.container.appendChild(card);\n            }\n        });\n\n        // \u786E\u4FDD\u5BB9\u5668\u4F7F\u7528\u6B63\u786E\u7684\u7F51\u683C\u5217\u5BBD\u5EA6\n        this.container.style.gridTemplateColumns = `repeat(auto-fill, ${this.cardSize}px)`;\n    }\n\n    /**\n     * \u521B\u5EFA\u5355\u4E2A\u7B14\u8BB0\u5361\u7247\n     * @param file - \u7B14\u8BB0\u6587\u4EF6\n     * @returns \u5361\u7247HTML\u5143\u7D20\n     */\n    private async createNoteCard(file: TFile): Promise<HTMLElement> {\n        const card = document.createElement('div');\n        card.addClass('note-card');\n        card.setAttribute('data-path', file.path);\n        \n        // \u521B\u5EFA\u5361\u7247\u5934\u90E8\n        const header = card.createDiv('note-card-header');\n        \n        // \u6DFB\u52A0\u4FEE\u6539\n        const lastModified = header.createDiv('note-date');\n        lastModified.setText(new Date(file.stat.mtime).toLocaleDateString());\n\n        // \u4FEE\u6539\u6587\u4EF6\u5939\u8DEF\u5F84\u7684\u521B\u5EFA\u548C\u6837\u5F0F\n        const folderPath = header.createDiv('note-folder');\n        const folder = file.parent ? (file.parent.path === '/' ? '\u6839\u76EE\u5F55' : file.parent.path) : '\u6839\u76EE\u5F55';\n        folderPath.setText(folder);\n        folderPath.setAttribute('title', `\u6253\u5F00\u6587\u4EF6\u5939: ${folder}`);\n        folderPath.addClass('clickable');\n        \n        // \u6DFB\u52A0\u70B9\u51FB\u4E8B\u4EF6\n        folderPath.addEventListener('click', async (e) => {\n            console.log('\u70B9\u51FB\u4E86\u6587\u4EF6\u5939',e);\n            e.stopPropagation();\n            e.preventDefault();\n            console.log('\u70B9\u4E86\u6587\u4EF6\u5939',e);\n            console.log(`\u5F53\u524D\u5206\u5C4F\u9875\u7684\u6570\u91CF: ${this.app.workspace.getLeavesOfType('file-explorer').length}`);\n            console.log(`workspace:`,this.app.workspace);\n           \n\n\n            \n            // \u6253\u5F00\u6587\u4EF6\u5939\n            const fileExplorer = this.app.workspace.getLeavesOfType('file-explorer')[0];\n            if (fileExplorer) {\n                console.log('fileExplorer',fileExplorer);\n                // \u6FC0\u6D3B\u6587\u4EF6\u6D4F\u89C8\u5668\u89C6\u56FE\n                this.app.workspace.revealLeaf(fileExplorer);\n\n                \n                // \u83B7\u53D6\u6587\u4EF6\u6D4F\u89C8\u5668\u89C6\u56FE\u5B9E\u4F8B\n                const fileExplorerView = fileExplorer.view as any;\n                if (fileExplorerView.expandFolder) {\n                    await this.revealFolderInExplorer(folder);\n                    // \u805A\u7126\u5230\u6587\u4EF6\u6D4F\u89C8\u5668\n                    fileExplorer.setEphemeralState({ focus: true });\n                    \n                    // \u6DFB\u52A0\u89C6\u89C9\u53CD\u9988\n                    folderPath.addClass('folder-clicked');\n                    setTimeout(() => {\n                        folderPath.removeClass('folder-clicked');\n                    }, 200);\n                }\n            }\n        });\n\n        // \u6DFB\u52A0\u6253\u5F00\u6309\u94AE\n        const openButton = header.createDiv('note-open-button');\n        openButton.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"></path><polyline points=\"15 3 21 3 21 9\"></polyline><line x1=\"10\" y1=\"14\" x2=\"21\" y2=\"3\"></line></svg>`;\n        openButton.setAttribute('title', '\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00');\n        openButton.style.opacity = '0';  // \u9ED8\u8BA4\u9690\u85CF\n\n        // \u521B\u5EFA\u5361\u7247\u5185\u5BB9\u5BB9\u5668\n        const cardContent = card.createDiv('note-card-content');\n\n        // \u5904\u7406\u6807\u9898\uFF08\u79FB\u5230\u5185\u5BB9\u533A\u57DF\u9876\u90E8\uFF09\n        const title = cardContent.createDiv('note-title');\n        let displayTitle = file.basename;\n        // \u5904\u7406\u65E5\u671F\u5F00\u5934\u7684\u6807\u9898\n        const timePattern = /^\\d{4}[-./]\\d{2}[-./]\\d{2}/;\n        if (timePattern.test(displayTitle)) {\n            displayTitle = displayTitle.replace(timePattern, '').trim();\n        }\n        \n        // \u9AD8\u4EAE\u6807\u9898\u4E2D\u7684\u641C\u7D22\u8BCD\n        if (this.currentSearchTerm) {\n            title.innerHTML = this.highlightText(displayTitle, this.currentSearchTerm);\n        } else {\n            title.setText(displayTitle);\n        }\n\n        try {\n            // \u8BFB\u53D6\u7B14\u8BB0\u5185\u5BB9\n            const content = await this.app.vault.read(file);\n            \n            // \u521B\u5EFA\u7B14\u8BB0\u5185\u5BB9\u5BB9\u5668\n            const noteContent = cardContent.createDiv('note-content');\n            \n            // \u5982\u679C\u6709\u641C\u7D22\u8BCD\uFF0C\u5148\u5904\u7406\u5185\u5BB9\u4E2D\u7684\u641C\u7D22\u8BCD\u9AD8\u4EAE\n            if (this.currentSearchTerm) {\n                // \u5C06 Markdown \u8F6C\u6362\u4E3A HTML\n                await MarkdownRenderer.render(\n                    this.app,\n                    content,\n                    noteContent,\n                    file.path,\n                    this\n                );\n                \n                // \u9AD8\u4EAE\u641C\u7D22\u8BCD\n                const contentElements = noteContent.querySelectorAll('p, li, h1, h2, h3, h4, h5, h6');\n                contentElements.forEach(element => {\n                    const originalText = element.textContent || '';\n                    if (originalText.toLowerCase().includes(this.currentSearchTerm.toLowerCase())) {\n                        element.innerHTML = this.highlightText(originalText, this.currentSearchTerm);\n                    }\n                });\n            } else {\n                // \u6CA1\u6709\u641C\u7D22\u8BCD\u65F6\u6B63\u5E38\u6E32\u67D3\n                await MarkdownRenderer.render(\n                    this.app,\n                    content,\n                    noteContent,\n                    file.path,\n                    this\n                );\n            }\n\n            // \u9F20\u6807\u60AC\u505C\u4E8B\u4EF6\n            card.addEventListener('mouseenter', async () => {\n                openButton.style.opacity = '1';  // \u663E\u793A\u6253\u5F00\u6309\u94AE\n                title.style.opacity = '0';\n                title.style.display = 'none'; \n                noteContent.style.opacity = '1';\n                \n                // \u5728\u9884\u89C8\u680F\u4E2D\u663E\u793A\u5B8C\u6574\u5185\u5BB9\n                try {\n                    this.previewContainer.empty();\n                    await MarkdownRenderer.render(\n                        this.app,\n                        content,\n                        this.previewContainer,\n                        file.path,\n                        this\n                    );\n                } catch (error) {\n                    console.error('\u9884\u89C8\u52A0\u8F7D\u5931\u8D25:', error);\n                }\n            });\n\n            // \u9F20\u6807\u79BB\u5F00\u4E8B\u4EF6\n            card.addEventListener('mouseleave', () => {\n                openButton.style.opacity = '0';  // \u9690\u85CF\u6253\u5F00\u6309\u94AE\n                title.style.opacity = '1';\n                title.style.display = 'block'; \n                noteContent.style.opacity = '0.3';\n                // noteContent.style.display = 'none';\n            });\n\n            // \u4FEE\u6539\u4E8B\u4EF6\u76D1\u542C\n            openButton.addEventListener('click', async (e) => {\n                e.stopPropagation();\n                await this.openInAppropriateLeaf(file);\n                card.addClass('selected'); // \u7ED9\u8BE5\u5361\u7247\u6DFB\u52A0selected\u7C7B\n                // \u79FB\u9664\u5176\u4F59\u5361\u7247\u7684selected\u7C7B\n                this.container.querySelectorAll('.note-card').forEach(cardElement => {\n                    if (cardElement !== card) {\n                        cardElement.removeClass('selected');\n                    }\n                });\n            });\n\n            // \u5355\u51FB\u9009\u62E9\n            card.addEventListener('click', (e) => {\n                this.handleCardSelection(file.path, e);\n            });\n\n            // \u53CC\u51FB\u6253\u5F00\n            card.addEventListener('dblclick', async () => {\n                await this.openInAppropriateLeaf(file);\n            });\n\n            // \u53F3\u952E\u83DC\u5355\n            card.addEventListener('contextmenu', (e) => {\n                e.preventDefault();\n                this.showContextMenu(e, this.getSelectedFiles());\n            });\n\n        } catch (error) {\n            console.error('\u7B14\u8BB0\u52A0\u8F7D\u5931\u8D25:', error);\n        }\n\n        // \u6DFB\u52A0\u5361\u7247\u60AC\u505C\u4E8B\u4EF6\n        card.addEventListener('mouseenter', async () => {\n            openButton.style.opacity = '1';  // \u663E\u793A\u6253\u5F00\u6309\u94AE\n            // ... \u5176\u4ED6\u60AC\u505C\u4E8B\u4EF6\u7801 ...\n        });\n\n        card.addEventListener('mouseleave', () => {\n            openButton.style.opacity = '0';  // \u9690\u85CF\u6253\u5F00\u6309\u94AE\n            // ... \u5176\u4ED6\u79BB\u5F00\u4E8B\u4EF6\u4EE3\u7801 ...\n        });\n\n        return card;\n    }\n\n    /**\n     * \u5207\u6362\u89C6\u56FE\u6A21\u5F0F\n     * @param view - \u76EE\u6807\u89C6\u56FE\u6A21\u5F0F\n     */\n    private switchView(view: 'card' | 'list' | 'timeline' | 'month') {\n        this.currentView = view;\n        this.container.setAttribute('data-view', view);\n        this.container.empty();\n        \n        const contentSection = this.containerEl.querySelector('.content-section');\n        if (contentSection) {\n            contentSection.removeClass('view-card', 'view-list', 'view-timeline', 'view-month');\n            contentSection.addClass(`view-${view}`);\n        }\n        \n        if (view === 'list') {\n            this.createListView();\n        } else if (view === 'timeline') {\n            this.createTimelineView();\n        } else if (view === 'month') {\n            this.createMonthView();\n        } else {\n            this.loadNotes();\n        }\n    }\n\n  \n    // \u5207\u6362\u9884\u89C8\u680F\u7684\u663E\u793A\u72B6\u6001\n    private togglePreview() {\n        this.isPreviewCollapsed = !this.isPreviewCollapsed;\n        if (this.isPreviewCollapsed) {\n            this.previewContainer.addClass('collapsed');\n        } else {\n            this.previewContainer.removeClass('collapsed');\n        }\n    }\n\n    // \u4FEE\u6539\u9884\u89C8\u680F\u5927\u5C0F\u8C03\u6574\u65B9\u6CD5\n    private setupResizer() {\n        let startX: number;\n        let startWidth: number;\n\n        const startResize = (e: MouseEvent) => {\n            e.preventDefault();\n            startX = e.pageX;\n            startWidth = parseInt(getComputedStyle(this.previewContainer).width, 10);\n            document.addEventListener('mousemove', resize);\n            document.addEventListener('mouseup', stopResize);\n            document.body.style.cursor = 'col-resize';\n            this.previewResizer.addClass('resizing');\n        };\n\n        const resize = (e: MouseEvent) => {\n            const width = startWidth - (e.pageX - startX);\n            if (width >= 50 && width <= 800) {\n                this.previewContainer.style.width = `${width}px`;\n                // \u8C03\u6574\u5361\u7247\u5BB9\u5668\u7684\u5BBD\u5EA6\n                this.adjustContentWidth();\n                if (this.isPreviewCollapsed) {\n                    this.isPreviewCollapsed = false;\n                    this.previewContainer.removeClass('collapsed');\n                }\n            }\n        };\n\n        const stopResize = () => {\n            document.removeEventListener('mousemove', resize);\n            document.removeEventListener('mouseup', stopResize);\n            document.body.style.cursor = '';\n            this.previewResizer.removeClass('resizing');\n        };\n\n        this.previewResizer.addEventListener('mousedown', startResize);\n    }\n\n    // \u6DFB\u52A0\u5185\u533A\u57DF\u5BBD\u5EA6\u8C03\u6574\u65B9\u6CD5\n    private adjustContentWidth() {\n        const mainLayout = this.containerEl.querySelector('.main-layout');\n        const previewWidth = this.previewContainer.offsetWidth;\n        const contentSection = this.containerEl.querySelector('.content-section');\n        \n        if (mainLayout instanceof HTMLElement && contentSection instanceof HTMLElement) {\n            const totalWidth = mainLayout.offsetWidth;\n            const newContentWidth = totalWidth - previewWidth - 4; // 4px \u662F\u5206\u9694\u7EBF\u5BBD\u5EA6\n            contentSection.style.width = `${newContentWidth}px`;\n            \n            // \u91CD\u65B0\u8BA1\u7B97\u5361\u7247\u5217\u6570\n            const availableWidth = newContentWidth - 32; // \u51CF\u53BB\u5185\u8FB9\u8DDD\n            const columns = Math.floor(availableWidth / this.cardSize);\n            const gap = 16; // \u5361\u7247\u95F4\u8DDD\n            const actualCardWidth = (availableWidth - (columns - 1) * gap) / columns;\n            \n            this.container.style.gridTemplateColumns = `repeat(${columns}, ${actualCardWidth}px)`;\n        }\n    }\n\n  \n    private async revealFolderInExplorer(folder: string) {\n        // \u83B7\u53D6\u6587\u4EF6\u6D4F\u89C8\u5668\u89C6\u56FE\n        const fileExplorer = this.app.workspace.getLeavesOfType('file-explorer')[0];\n        if (fileExplorer) {\n            const fileExplorerView = fileExplorer.view as any;\n            \n            // \u5982\u679C\u662F\u6839\u76EE\u5F55\uFF0C\u76F4\u63A5\u5C55\u5F00\u6839\u76EE\u5F55\n            if (folder === '\u6839\u76EE\u5F55') {\n                if (fileExplorerView.expandFolder) {\n                    await fileExplorerView.expandFolder('/');\n                }\n                return;\n            }\n\n            // \u5C55\u5F00\u5E76\u9009\u4E2D\u6587\u4EF6\u5939\n            if (fileExplorerView.expandFolder) {\n                // \u5C55\u5F00\u7236\u6587\u4EF6\u5939\u8DEF\n                const folderParts = folder.split('/');\n                let currentPath = '';\n                \n                // \u9010\u7EA7\u5C55\u5F00\u6587\u4EF6\u5939\n                for (const part of folderParts) {\n                    currentPath += (currentPath ? '/' : '') + part;\n                    await fileExplorerView.expandFolder(currentPath);\n                }\n\n                // \u9009\u4E2D\u76EE\u6807\u6587\u4EF6\u5939\n                if (fileExplorerView.setSelection) {\n                    await fileExplorerView.setSelection(folder);\n                }\n            }\n        }\n    }\n\n    // \u521B\u5EFA\u65B0\u7B14\u8BB0\n    private async createNewNote() {\n        // \u83B7\u53D6\u5F53\u524D\u65E5\u671F\u4F5C\u4E3A\u9ED8\u8BA4\u6587\u4EF6\u540D\n        const date = new Date();\n        const fileName = ` ${date.toLocaleString().replace(/[/:]/g, '-')}\u672A\u547D\u540D\u7B14\u8BB0`;\n        \n        try {\n            // \u521B\u5EFA\u65B0\u7B14\u8BB0\n            const file = await this.app.vault.create(\n                `${fileName}.md`,\n                '# ' + fileName + '\\n\\n'\n            );\n            \n            // \u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00\u7B14 \u8BB0\n            const leaf = this.app.workspace.getLeaf('tab');\n            await leaf.openFile(file);\n            \n            // \u5237\u65B0\u5361\u7247\u89C6\u56FE\n            this.loadNotes();\n        } catch (error) {\n            console.error('\u521B\u5EFA\u7B14\u8BB0\u5931\u8D25:', error);\n        }\n    }\n\n    // \u521B\u5EFA\u65F6\u95F4\u8F74\u89C6\u56FE\n    private async createTimelineView() {\n        const timelineContainer = this.container.createDiv('timeline-container');\n        \n        // \u83B7\u53D6\u6240\u6709\u7B14\u8BB0\u5E76\u6309\u65E5\u671F\u5206\u7EC4\n        const files = this.app.vault.getMarkdownFiles();\n        const notesByDate = new Map<string, TFile[]>();\n        \n        files.forEach(file => {\n            const date = new Date(file.stat.mtime).toLocaleDateString();\n            if (!notesByDate.has(date)) {\n                notesByDate.set(date, []);\n            }\n            const notes = notesByDate.get(date);\n            if (notes) {\n                notes.push(file);\n            }\n        });\n\n        // \u6309\u65E5\u671F\u6392\u5E8F\n        const sortedDates = Array.from(notesByDate.keys()).sort((a, b) => \n            new Date(b).getTime() - new Date(a).getTime()\n        );\n\n        // \u521B\u5EFA\u95F4\u8F74\n        for (const date of sortedDates) {\n            const dateGroup = timelineContainer.createDiv('timeline-date-group');\n            \n            // \u521B\u5EFA\u65E5\u671F\u8282\u70B9\n            const dateNode = dateGroup.createDiv('timeline-date-node');\n            dateNode.createDiv('timeline-node-circle');\n            dateNode.createDiv('timeline-date-label').setText(date);\n\n            // \u521B\u5EFA\u7B14\u8BB0\u5217\u8868\n            const notesList = dateGroup.createDiv('timeline-notes-list');\n            const notes = notesByDate.get(date);\n            if (notes) {\n                for (const file of notes) {\n                    const noteItem = notesList.createDiv('timeline-note-item');\n                    \n                    // \u521B\u5EFA\u6807\u8BB0\n                    noteItem.createDiv('timeline-note-marker');\n                    \n                    // \u521B\u5EFA\u7B14\u8BB0\u5185\u5BB9\n                    const noteContent = noteItem.createDiv('timeline-note-content');\n                    noteContent.createDiv('timeline-note-title').setText(file.basename);\n                    \n                    // \u6DFB\u52A0\u70B9\u51FB\u4E8B\u4EF6\n                    noteItem.addEventListener('click', async () => {\n                        const leaf = this.app.workspace.getLeaf('tab');\n                        await leaf.openFile(file);\n                    });\n\n                    // \u6DFB\u52A0\u9884\u89C8\u529F\u80FD\n                    noteItem.addEventListener('mouseenter', async () => {\n                        try {\n                            this.previewContainer.empty();\n                            const content = await this.app.vault.read(file);\n                            await MarkdownRenderer.renderMarkdown(\n                                content,\n                                this.previewContainer,\n                                file.path,\n                                this\n                            );\n                        } catch (error) {\n                            console.error('\u9884\u89C8\u52A0\u8F7D\u5931\u8D25:', error);\n                        }\n                    });\n                }\n            }\n        }\n    }\n\n    // \u5237\u65B0\u89C6\u56FE\uFF08\u7528\u4E8E\u641C\u7D22\u548C\u8FC7\u6EE4\uFF09\n    private async refreshView() {\n        const files = this.app.vault.getMarkdownFiles();\n        this.container.empty();\n\n        // \u5148\u8FDB\u884C\u641C\u7D22\u8FC7\u6EE4\n        const searchTerm = this.currentSearchTerm?.trim().toLowerCase();\n        const filteredFiles = await Promise.all(files.map(async file => {\n            const matchesSearch = !searchTerm || \n                file.basename.toLowerCase().includes(searchTerm) ||\n                await this.fileContentContainsSearch(file);\n\n            // \u6807\u7B7E\u8FC7\u6EE4\n            let matchesTags = true;\n            if (this.selectedTags.size > 0) {\n                const cache = this.app.metadataCache.getFileCache(file);\n                matchesTags = cache?.tags?.some(t => this.selectedTags.has(t.tag)) ?? false;\n            }\n\n            // \u65E5\u671F\u8FC7\u6EE4\n            let matchesDate = true;\n            if (this.currentFilter.type === 'date') {\n                const fileDate = new Date(file.stat.mtime);\n                const fileDateStr = fileDate.toISOString().split('T')[0];\n                \n                if (this.currentFilter.value?.length === 7) {\n                    matchesDate = fileDateStr.startsWith(this.currentFilter.value);\n                } else {\n                    matchesDate = fileDateStr === this.currentFilter.value;\n                }\n            }\n\n            return matchesSearch && matchesTags && matchesDate ? file : null;\n        }));\n\n        // \u8FC7\u6EE4\u6389\u4E0D\u5339\u914D\u7684\u6587\u4EF6\n        const matchedFiles = filteredFiles.filter((file): file is TFile => file !== null);\n\n        // \u521B\u5EFA\u5361\u7247\n        const cards = await Promise.all(\n            matchedFiles.map(file => this.createNoteCard(file))\n        );\n\n        cards.forEach(card => {\n            if (card instanceof HTMLElement) {\n                card.style.width = `${this.cardSize}px`;\n                this.container.appendChild(card);\n            }\n        });\n\n        this.container.style.gridTemplateColumns = `repeat(auto-fill, ${this.cardSize}px)`;\n    }\n\n    // \u6DFB\u52A0\u6807\u7B7E\u5207\u6362\u65B9\u6CD5\n    private toggleTag(tag: string, tagBtn: HTMLElement) {\n        if (this.selectedTags.has(tag)) {\n            this.selectedTags.delete(tag);\n            tagBtn.removeClass('active');\n        } else {\n            this.selectedTags.add(tag);\n            tagBtn.addClass('active');\n        }\n\n        // \u53D6\u6D88 \"All\" \u6807\u7B7E\u7684\u9009\u4E2D\u72B6\u6001\n        const allBtn = this.tagContainer.querySelector('button');\n        if (allBtn) {\n            allBtn.removeClass('active');\n        }\n\n        this.refreshView();\n    }\n\n    // \u6DFB\u52A0\u6E05\u9664\u6807\u7B7E\u9009\u62E9\u65B9\u6CD5\n    private clearTagSelection() {\n        this.selectedTags.clear();\n        this.tagContainer.querySelectorAll('.tag-btn').forEach(btn => {\n            btn.removeClass('active');\n        });\n    }\n\n    // \u5904\u7406\u5361\u7247\u9009\u62E9\n    private handleCardSelection(path: string, event: MouseEvent) {\n        const card = this.container.querySelector(`[data-path=\"${path}\"]`);\n        if (!card) {\n          this.clearSelection();\n          return;\n        }\n\n        if (event.ctrlKey) {\n            // Ctrl + \u70B9\u51FB\uFF1A\u5207\u6362\u9009\u62E9\n            if (this.selectedNotes.has(path)) {\n                this.selectedNotes.delete(path);\n                card.removeClass('selected');\n            } else {\n                this.selectedNotes.add(path);\n                card.addClass('selected');\n            }\n        } else if (event.shiftKey && this.lastSelectedNote) {\n            // Shift + \u70B9\u51FB\uFF1A\u8FDE\u7EED\u9009\u62E9\n            const cards = Array.from(this.container.querySelectorAll('.note-card'));\n            const lastIndex = cards.findIndex(c => c.getAttribute('data-path') === this.lastSelectedNote);\n            const currentIndex = cards.findIndex(c => c.getAttribute('data-path') === path);\n            \n            const start = Math.min(lastIndex, currentIndex);\n            const end = Math.max(lastIndex, currentIndex);\n\n            cards.forEach((c, i) => {\n                const cardPath = c.getAttribute('data-path');\n                if (i >= start && i <= end && cardPath) {\n                    this.selectedNotes.add(cardPath);\n                    c.addClass('selected');\n                }\n            });\n        } else {\n            // \u666E\u901A\u70B9\u51FB\uFF1A\u6E05\u9664\u5176\u4ED6\u9009\u62E9\uFF0C\u9009\u4E2D\u5F53\u524D\n            this.clearSelection();\n            this.selectedNotes.add(path);\n            card.addClass('selected');\n        }\n\n        this.lastSelectedNote = path;\n    }\n\n    // \u6E05\u9664\u6240\u6709\u9009\u62E9\n    private clearSelection() {\n        this.selectedNotes.clear();\n        this.container.querySelectorAll('.note-card.selected').forEach(card => {\n            card.removeClass('selected');\n        });\n    }\n\n    // \u83B7\u53D6\u9009\u4E2D\u7684\u6587\u4EF6\n    private getSelectedFiles(): TFile[] {\n        return Array.from(this.selectedNotes)\n            .map(path => this.app.vault.getAbstractFileByPath(path))\n            .filter((file): file is TFile => file instanceof TFile);\n    }\n\n    // \u663E\u793A\u53F3\u952E\u83DC\u5355\n    private showContextMenu(event: MouseEvent, files: TFile[]) {\n        const menu = new Menu();\n\n        if (files.length > 0) {\n            menu.addItem((item) => {\n                item\n                    .setTitle(`\u5728\u65B0\u6807\u7B7E\u9875\u6253\u5F00`)\n                    .setIcon(\"link\")\n                    .onClick(async () => {\n                        for (const file of files) {\n                            const leaf = this.app.workspace.getLeaf('tab');\n                            await leaf.openFile(file);\n                        }\n                    });\n            });\n\n            menu.addItem((item) => {\n                item\n                    .setTitle(`\u5728\u4EF6\u7BA1\u7406\u5668\u4E2D\u663E\u793A`)\n                    .setIcon(\"folder\")\n                    .onClick(() => {\n                        const file = files[0];  // \u663E\u793A\u7B2C\u4E00\u4E2A\u9009\u4E2D\u6587\u4EF6\u7684\u4F4D\u7F6E\n                        this.revealFolderInExplorer(file.parent?.path || '/');\n                    });\n            });\n\n            menu.addItem((item) => {\n                item\n                    .setTitle(`\u79FB\u52A8 ${files.length} \u4E2A\u6587`)\n                    .setIcon(\"move\")\n                    .onClick(() => {\n                        const modal = new EnhancedFileSelectionModal(\n                            this.app,\n                            files,\n                            this.recentFolders,\n                            (folders) => {\n                                this.recentFolders = folders;\n                            }\n                        );\n                        modal.open();\n                    });\n            });\n\n            menu.addItem((item) => {\n                item\n                    .setTitle(`\u5220\u9664 ${files.length} \u4E2A\u6587\u4EF6`)\n                    .setIcon(\"trash\")\n                    .onClick(async () => {\n                        const confirm = await new ConfirmModal(\n                            this.app,\n                            \"\u786E\u8BA4\u5220\u9664\",\n                            `\u662F\u5426\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u7684 ${files.length} \u4E2A\u6587\u4EF6\uFF1F`\n                        ).show();\n\n                        if (confirm) {\n                            try {\n                                // \u5148\u5220\u9664\u6240\u6709\u6587\u4EF6\n                                for (const file of files) {\n                                    await this.app.vault.trash(file, true);\n                                }\n\n                                // \u6587\u4EF6\u5220\u9664\u6210\u529F\u540E\uFF0C\u5904\u7406UI\u52A8\u753B\n                                files.forEach(file => {\n                                    const card = this.container.querySelector(`[data-path=\"${file.path}\"]`);\n                                    if (card instanceof HTMLElement) {\n                                        card.addClass('removing');\n                                        // \u5F85\u52A8\u753B\u5B8C\u6210\u540E\u79FB\u9664DOM\u5143\u7D20\n                                        setTimeout(() => {\n                                            card.remove();\n                                            this.selectedNotes.delete(file.path);\n                                        }, 300);\n                                    }\n                                });\n                                // \u663E\u793A\uFFFD\uFFFD\uFFFD\u9664\u6210\u529F\u63D0\u793A\n                                console.error(`\u5DF2\u5220\u9664 ${files.length} \u4E2A\u6587\u4EF6`);\n                            } catch (error) {\n                                console.error('\u5220\u9664\u6587\u4EF6\u5931\u8D25:', error);\n                            }\n                        }\n                    });\n            });\n        }\n\n        menu.showAtMouseEvent(event);//\u663E\u793A\u53F3\u952E\u83DC\u5355\n    }\n\n    // \u4FEE\u6539\u8C03\u6574\u5361\u7247\u5927\u5C0F\u7684\u65B9\u6CD5\n    private adjustCardSize(delta: number) {\n        const adjustment = delta > 0 ? -10 : 10;\n        const newSize = Math.max(\n            this.plugin.settings.minCardWidth,\n            Math.min(this.plugin.settings.maxCardWidth, this.cardSize + adjustment)\n        );\n\n        if (newSize !== this.cardSize) {\n            this.cardSize = newSize;\n            this.updateCardSize(newSize);\n            // \u4FDD\u5B58\u65B0\u7684\u5BBD\u5EA6\n            this.plugin.saveCardWidth(newSize);\n        }\n    }\n\n    // \u6DFB\u52A0\u66F4\u65B0\u5361\u7247\u5927\u5C0F\u7684\u65B9\u6CD5\n    public updateCardSize(width: number) {\n        this.cardSize = width;\n        // \u66F4\u65B0\u6240\u6709\u5361\u7247\u7684\u5BBD\u5EA6\n        this.container.querySelectorAll('.note-card').forEach((card: Element) => {\n            if (card instanceof HTMLElement) {\n                card.style.width = `${width}px`;\n            }\n        });\n        // \u66F4\u65B0\u5BB9\u5668\u7684\u7F51\u683C\u5217\u5BBD\u5EA6\n        this.container.style.gridTemplateColumns = `repeat(auto-fill, ${width}px)`;\n    }\n\n    // \u521B\u5EFA\u65E5\u5386\u6309\u94AE\n    private createCalendarButton(leftTools: HTMLElement) {\n        const calendarBtn = leftTools.createEl('button', {\n            cls: 'calendar-toggle-button',\n        });\n        calendarBtn.innerHTML = `\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"></line><line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"></line><line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"></line></svg>\n            <span>\u65E5\u5386</span>\n        `;\n        calendarBtn.addEventListener('click', () => {\n            this.toggleCalendar();\n            // \u5207\u6362\u6309\u94AE\u9AD8\u4EAE\u72B6\u6001\n            calendarBtn.toggleClass('active', this.isCalendarVisible);\n        });\n    }\n\n    // \u5207\u6362\u65E5\u5386\u7684\u663E\u793A\u72B6\u6001\n    private toggleCalendar() {\n        console.log('\u5207\u6362\u65E5\u5386\u663E\u793A\u72B6\u6001, \u5F53\u524D\u72B6\u6001:', this.isCalendarVisible);\n        \n        this.isCalendarVisible = !this.isCalendarVisible;\n        \n        if (this.isCalendarVisible) {\n            this.showCalendar();\n            // \u663E\u793A\u5F53\u524D\u6708\u4EFD\u7684\u6240\u6709\u7B14\u8BB0\n            this.filterNotesByMonth(this.currentDate);\n        } else {\n            this.hideCalendar();\n            // \u6E05\u9664\u65E5\u671F\u6EE4\n            this.clearDateFilter();\n        }\n        \n        // \u66F4\u65B0\u6309\u94AE\u72B6\u6001\n        const calendarBtn = this.containerEl.querySelector('.calendar-toggle-button');\n        if (calendarBtn) {\n            calendarBtn.toggleClass('active', this.isCalendarVisible);\n        }\n    }\n\n    // \u6DFB\u52A0\u6309\u6708\u4EFD\u8FC7\u6EE4\u7684\u65B9\u6CD5\n    private filterNotesByMonth(date: Date) {\n        const year = date.getFullYear();\n        const month = date.getMonth();\n        this.currentFilter = { \n            type: 'date', \n            value: `${year}-${(month + 1).toString().padStart(2, '0')}` \n        };\n        this.refreshView();\n    }\n\n    // \u663E\u793A\u65E5\u5386\n    private showCalendar() {\n        // \u6DFB\u52A0\u8C03\u8BD5\u65E5\u5FD7\n        console.log('\u5F00\u59CB\u663E\u793A\u65E5\u5386');\n        \n        // \u786E\u4FDD calendarContainer \u5B58\u5728\n        if (!this.calendarContainer) {\n            console.log('\u521B\u5EFA\u65E5\u5386\u5BB9\u5668');\n            const mainLayout = this.containerEl.querySelector('.main-layout');\n            if (!mainLayout) {\n                console.error('\u672A\u627E\u5230 main-layout \u5143\u7D20');\n                return;\n            }\n            \n            // \u521B\u5EFA\u65E5\u5386\u5BB9\u5668\n            this.calendarContainer = createDiv();\n            this.calendarContainer.addClass('calendar-container');\n            \n            // \u5C06\u65E5\u5386\u5BB9\u5668\u63D2\u5165\u5230 main-layout \u7684\u5F00\u5934\n            mainLayout.insertBefore(this.calendarContainer, mainLayout.firstChild);\n            \n            console.log('\u65E5\u5386\u5BB9\u5668\u5DF2\u521B\u5EFA:', this.calendarContainer);\n        }\n        \n        // \u6E05\u7A7A\u5E76\u663E\u793A\u65E5\u5386\u5BB9\u5668\n        this.calendarContainer.empty();\n        this.calendarContainer.style.display = 'block';\n        \n        // \u6DFB\u52A0\u65E5\u5386\u5185\u5BB9\n        this.renderCalendar();\n        \n        // \u6DFB\u52A0 with-calendar \u7C7B\u5230 main-layout\n        const mainLayout = this.containerEl.querySelector('.main-layout');\n        if (mainLayout) {\n            mainLayout.addClass('with-calendar');\n            console.log('\u5DF2\u6DFB\u52A0 with-calendar \u7C7B\u5230 main-layout');\n        }\n        \n        // \u786E\u4FDD\u65E5\u5386\u5BB9\u5668\u53EF\u89C1\n        this.calendarContainer.style.opacity = '1';\n        this.calendarContainer.style.visibility = 'visible';\n    }\n\n    // \u9690\u85CF\u65E5\u5386 \n    private hideCalendar() {\n        console.log('\u9690\u85CF\u65E5\u5386');\n        \n        if (this.calendarContainer) {\n            this.calendarContainer.style.display = 'none';\n            this.calendarContainer.empty();\n            \n            // \u79FB\u9664 with-calendar \u7C7B\n            const mainLayout = this.containerEl.querySelector('.main-layout');\n            if (mainLayout) {\n                mainLayout.removeClass('with-calendar');\n                console.log('\u5DF2\u79FB\u9664 with-calendar \u7C7B');\n            }\n        }\n    }\n\n    // \u6E32\u67D3\u65E5\u5386\n    private renderCalendar() {\n        if (!this.calendarContainer) {\n            return;\n        }\n        \n        this.calendarContainer.empty();\n        \n        const year = this.currentDate.getFullYear();\n        const month = this.currentDate.getMonth();\n        \n        // \u521B\u5EFA\u65E5\u5386\u5934\u90E8\n        const header = this.calendarContainer.createDiv('calendar-header');\n        \n        // \u4E0A\u4E2A\u6708\u6309\u94AE\n        const prevBtn = header.createEl('button', { cls: 'calendar-nav-btn' });\n        prevBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"15 18 9 12 15 6\"></polyline></svg>';\n        prevBtn.addEventListener('click', (e) => {\n            e.stopPropagation();\n            this.currentDate = new Date(year, month - 1, 1);\n            this.renderCalendar();\n            // \u663E\u793A\u65B0\u6708\u4EFD\u7684\u7B14\u8BB0\n            this.filterNotesByMonth(this.currentDate);\n        });\n        \n        // \u663E\u793A\u5E74\u6708\n        header.createDiv('calendar-title').setText(\n            `${year}\u5E74${month + 1}\u6708`\n        );\n        \n        // \u4E0B\u4E2A\u6708\u6309\u94AE\n        const nextBtn = header.createEl('button', { cls: 'calendar-nav-btn' });\n        nextBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"9 18 15 12 9 6\"></polyline></svg>';\n        nextBtn.addEventListener('click', (e) => {\n            e.stopPropagation();\n            this.currentDate = new Date(year, month + 1, 1);\n            this.renderCalendar();\n            // \u663E\u793A\u65B0\u6708\u4EFD\u7684\u7B14\u8BB0\n            this.filterNotesByMonth(this.currentDate);\n        });\n\n        // \u521B\u5EFA\u661F\u5934\u90E8\n        const weekdays = ['\u65E5', '\u4E00', '\u4E8C', '\u4E09', '\u56DB', '\u4E94', '\u516D'];\n        const weekHeader = this.calendarContainer.createDiv('calendar-weekdays');\n        weekdays.forEach(day => {\n            weekHeader.createDiv('weekday').setText(day);\n        });\n\n        // \u521B\u5EFA\u65E5\u671F\u7F51\u683C\n        const grid = this.calendarContainer.createDiv('calendar-grid');\n        \n        // \u83B7\u53D6\u5F53\u6708\u7B2C\u4E00\u5929\u662F\u661F\u671F\u51E0\n        const firstDay = new Date(year, month, 1).getDay();\n        \n        // \u83B7\u53D6\u5F53\u6708\u5929\u6570\n        const daysInMonth = new Date(year, month + 1, 0).getDate();\n        \n        // \u53D6\u6BCF\u5929\u7684\u7B14\u8BB0\u6570\u91CF\n        const notesCount = this.getNotesCountByDate(year, month);\n\n        // \u586B\u5145\u65E5\u671F\u683C\u5B50\n        for (let i = 0; i < firstDay; i++) {\n            grid.createDiv('calendar-day empty');\n        }\n\n        for (let day = 1; day <= daysInMonth; day++) {\n            const dayEl = grid.createDiv('calendar-day');\n            const dateStr = `${year}-${(month + 1).toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;\n            \n            dayEl.setText(day.toString());\n            dayEl.setAttribute('data-date', dateStr);\n            \n            // \u5982\u679C\u662F\u5F53\u524D\u8FC7\u6EE4\u7684\u65E5\u671F\uFF0C\u6DFB\u52A0\u9009\u4E2D\u6837\u5F0F\n            if (this.currentFilter.type === 'date' && this.currentFilter.value === dateStr) {\n                dayEl.addClass('selected');\n            }\n            \n            // \u6DFB\u52A0\u7B14\u8BB0\u6570\u91CF\u6807\u8BB0\n            const count = notesCount[dateStr] || 0;\n            if (count > 0) {\n                dayEl.createDiv('note-count').setText(count.toString());\n            }\n\n            // \u6DFB\u52A0\u70B9\u51FB\u4E8B\u4EF6\n            dayEl.addEventListener('click', () => {\n                this.filterNotesByDate(dateStr);\n            });\n        }\n    }\n\n    // \u83B7\u53D6\u6BCF\u5929\u7684\u7B14\u8BB0\u6570\u91CF\n    private getNotesCountByDate(year: number, month: number): Record<string, number> {\n        const counts: Record<string, number> = {};\n        const files = this.app.vault.getMarkdownFiles();\n\n        files.forEach(file => {\n            const date = new Date(file.stat.mtime);\n            if (date.getFullYear() === year && date.getMonth() === month) {\n                const dateStr = date.toISOString().split('T')[0];\n                counts[dateStr] = (counts[dateStr] || 0) + 1;\n            }\n        });\n\n        return counts;\n    }\n\n    // \u6839\u636E\u65E5\u671F\u8FC7\u6EE4\u7B14\u8BB0\n    private filterNotesByDate(dateStr: string) {\n        // \u5982\u679C\u5DF2\u7ECF\u9009\u4E2D\u4E86\u8FD9\u4E2A\u65E5\u671F\uFF0C\u5219\u6E05\u9664\u8FC7\u6EE4\n        if (this.currentFilter.type === 'date' && this.currentFilter.value === dateStr) {\n            this.clearDateFilter();\n            return;\n        }\n\n        // \u6E05\u9664\u5176\u4ED6\u65E5\u671F\u7684\u9009\u4E2D\u72B6\u6001\n        this.calendarContainer.querySelectorAll('.calendar-day').forEach(day => {\n            day.removeClass('selected');\n        });\n\n        // \u8BBE\u7F6E\u65B0\u7684\u8FC7\u6EE4\u6761\u4EF6\n        this.currentFilter = { type: 'date', value: dateStr };\n        \n        // \u9AD8\u4EAE\u9009\u4E2D\u7684\u65E5\u671F\n        const selectedDay = this.calendarContainer.querySelector(`.calendar-day[data-date=\"${dateStr}\"]`);\n        if (selectedDay) {\n            selectedDay.addClass('selected');\n        }\n\n        this.refreshView();\n    }\n\n    // \u6DFB\u52A0\u6E05\u9664\u65E5\u671F\u8FC7\u6EE4\u7684\u65B9\u6CD5\n    private clearDateFilter() {\n        this.currentFilter = { type: 'none' };\n        // \u6E05\u9664\u6240\u6709\u65E5\u671F\u9009\u4E2D\u72B6\u6001\n        if (this.calendarContainer) {\n            this.calendarContainer.querySelectorAll('.calendar-day').forEach(day => {\n                day.removeClass('selected');\n            });\n        }\n        // \u5237\u65B0\u89C6\u56FE\u663E\u793A\u6240\u6709\u7B14\u8BB0\n        this.refreshView();\n    }\n\n\n    // \u4FEE\u6539\u65B9\u6CD5\u540D\u4EE5\u66F4\u597D\u5730\u53CD\u6620\u5176\u529F\u80FD\n    private async openInAppropriateLeaf(file: TFile) {\n        // \u83B7\u53D6\u6240\u6709\u53EF\u89C1\u7684 markdown \u7C7B\u578B\u7684\u53F6\u5B50\n        const leaves = this.app.workspace.getLeavesOfType('markdown');\n        \n        // \u83B7\u53D6\u5F53\u524D\u5361\u7247\u89C6\u56FE\u6240\u5728\u7684\u6839\u5206\u5C4F\n        const currentRoot = this.leaf.getRoot();\n        \n        // \u627E\u5230\u4E0D\u5728\u5F53\u524D\u6839\u5206\u5C4F\u4E0B\u7684\u53F6\u5B50\n        const otherLeaf = leaves.find(leaf => {\n            const root = leaf.getRoot();\n            return root !== currentRoot;\n        });\n        \n        if (otherLeaf) {\n            // \u5982\u679C\u627E\u5230\u5176\u4ED6\u5206\u5C4F\u7684\u53F6\u5B50\uFF0C\u5728\u90A3\u91CC\u6253\u5F00\u6587\u4EF6\n            await otherLeaf.openFile(file);\n            this.app.workspace.setActiveLeaf(otherLeaf);\n        } else {\n            // \u5982\u679C\u6CA1\u6709\u627E\u5230\u5176\u4ED6\u5206\u5C4F\u7684\u53F6\u5B50\uFF0C\u5728\u5F53\u524D\u5206\u5C4F\u521B\u5EFA\u65B0\u6807\u7B7E\u9875\n            const leaf = this.app.workspace.getLeaf('tab');\n            await leaf.openFile(file);\n        }\n    }\n\n    // \u5728\u7C7B\u7684\u5F00\u5934\u6DFB\u52A0\u4E00\u4E2A\u9AD8\u4EAE\u6587\u672C\u7684\u8F85\u52A9\u65B9\u6CD5\n    private highlightText(text: string, searchTerm: string): string {\n        if (!searchTerm || searchTerm.trim() === '') {\n            return text; // \u5982\u679C\u641C\u7D22\u8BCD\u4E3A\u7A7A\uFF0C\u76F4\u63A5\u8FD4\u56DE\u539F\u6587\u672C\n        }\n        \n        const escapedSearchTerm = searchTerm\n            .replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&') // \u8F6C\u4E49\u7279\u6B8A\u5B57\u7B26\n            .trim(); // \u786E\u4FDD\u53BB\u9664\u7A7A\u683C\n        \n        const regex = new RegExp(`(${escapedSearchTerm})`, 'gi');\n        return text.replace(regex, '<span class=\"search-highlight\">$1</span>');\n    }\n\n    // \u6DFB\u52A0\u5185\u5BB9\u641C\u7D22\u65B9\u6CD5\n    private async fileContentContainsSearch(file: TFile): Promise<boolean> {\n        if (!this.currentSearchTerm || this.currentSearchTerm.trim() === '') {\n            return true;\n        }\n\n        try {\n            const content = await this.app.vault.cachedRead(file);\n            const searchTerm = this.currentSearchTerm.trim().toLowerCase();\n            const fileContent = content.toLowerCase();\n            \n            // \u68C0\u67E5\u6587\u4EF6\u5185\u5BB9\u662F\u5426\u5305\u542B\u641C\u7D22\u8BCD\n            return fileContent.includes(searchTerm);\n        } catch (error) {\n            console.error('\u8BFB\u53D6\u6587\u4EF6\u5185\u5BB9\u5931\u8D25:', error);\n            return false;\n        }\n    }\n\n    // \u5728 CardView \u7C7B\u4E2D\u6DFB\u52A0\u641C\u7D22\u5904\u7406\u65B9\u6CD5\n    private setupSearch() {\n        // \u4F7F\u7528\u9632\u6296\u6765\u5904\u7406\u5FEB\u901F\u8F93\u5165\n        const debounce = (fn: Function, delay: number) => {\n            let timeoutId: NodeJS.Timeout;\n            return  (...args: any[]) => {\n                clearTimeout(timeoutId);\n                timeoutId = setTimeout(() => fn.apply(this, args), delay);\n            };\n        };\n\n        // \u5904\u7406\u641C\u7D22\u8F93\u5165\n        this.searchInput.addEventListener('input', debounce(() => {\n            this.currentSearchTerm = this.searchInput.value.trim();\n            this.refreshView();\n        }, 200));\n    }\n\n    // \u4FEE\u6539\u521B\u5EFA\u547D\u4EE4\u6309\u94AE\u7684\u65B9\u6CD5\n    private createCommandButton(toolbar: HTMLElement) {\n        const commandContainer = toolbar.createDiv('command-container');\n        \n        // \u521B\u5EFA\u547D\u4EE4\u6309\u94AE\n        const commandBtn = commandContainer.createEl('button', {\n            cls: 'command-button',\n        });\n        commandBtn.innerHTML = `\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"1\"></circle><circle cx=\"12\" cy=\"5\" r=\"1\"></circle><circle cx=\"12\" cy=\"19\" r=\"1\"></circle></svg>\n        `;\n        commandBtn.setAttribute('title', '\u547D\u4EE4\u83DC\u5355');\n\n        // \u521B\u5EFA\u83DC\u5355\u5BB9\u5668\n        const menu = commandContainer.createDiv('command-menu');\n        menu.style.display = 'none';\n\n        // \u6DFB\u52A0\u83DC\u5355\u9879\n        const deleteEmptyNotesItem = menu.createDiv('command-menu-item');\n        deleteEmptyNotesItem.setText('\u5220\u9664\u6240\u9009\u7A7A\u767D\u7B14\u8BB0');\n        deleteEmptyNotesItem.addEventListener('click', () => {\n            menu.style.display = 'none';  // \u70B9\u51FB\u540E\u9690\u85CF\u83DC\u5355\n            this.deleteEmptyNotes();\n        });\n\n        const batchRenameItem = menu.createDiv('command-menu-item');\n        batchRenameItem.setText('\u6279\u91CF\u91CD\u547D\u540D');\n        batchRenameItem.addEventListener('click', () => {\n            menu.style.display = 'none';  // \u70B9\u51FB\u540E\u9690\u85CF\u83DC\u5355\n            console.log('\u6279\u91CF\u91CD\u547D\u540D\u529F\u80FD\u5F85\u5B9E\u73B0');\n        });\n\n        // \u4F7F\u7528\u70B9\u51FB\u4E8B\u4EF6\u66FF\u4EE3\u9F20\u6807\u60AC\u505C\u4E8B\u4EF6\n        let isMenuVisible = false;\n        \n        // \u70B9\u51FB\u6309\u94AE\u65F6\u5207\u6362\u83DC\u5355\u663E\u793A\u72B6\u6001\n        commandBtn.addEventListener('click', (e) => {\n            e.stopPropagation();\n            isMenuVisible = !isMenuVisible;\n            menu.style.display = isMenuVisible ? 'block' : 'none';\n        });\n\n        // \u70B9\u51FB\u5176\u4ED6\u5730\u65B9\u65F6\u9690\u85CF\u83DC\u5355\n        document.addEventListener('click', (e) => {\n            if (!commandContainer.contains(e.target as Node)) {\n                isMenuVisible = false;\n                menu.style.display = 'none';\n            }\n        });\n    }\n\n    // \u6DFB\u52A0\u5220\u9664\u767D\u7B14\u8BB0\u7684\u65B9\u6CD5\n    private async deleteEmptyNotes() {\n        const selectedFiles = this.getSelectedFiles();\n        if (selectedFiles.length === 0) {\n            // \u5982\u679C\u6CA1\u6709\u9009\u4E2D\u7684\u7B14\u8BB0\uFF0C\u63D0\u793A\u7528\u6237\n            new Notice('\u8BF7\u5148\u9009\u62E9\u8981\u68C0\u67E5\u7684\u7B14\u8BB0');\n            return;\n        }\n\n        // \u68C0\u67E5\u7A7A\u767D\u7B14\u8BB0\n        const emptyNotes: TFile[] = [];\n        for (const file of selectedFiles) {\n            const content = await this.app.vault.read(file);\n            // \u79FB\u9664\u6240\u6709\u7A7A\u767D\u5B57\u7B26\u540E\u68C0\u67E5\u662F\u5426\u4E3A\u7A7A\n            if (!content.trim()) {\n                emptyNotes.push(file);\n            }\n        }\n\n        if (emptyNotes.length === 0) {\n            new Notice('\u6240\u9009\u7B14\u8BB0\u4E2D\u6CA1\u6709\u7A7A\u767D\u7B14\u8BB0');\n            return;\n        }\n\n        // \u663E\u793A\u786E\u8BA4\u5BF9\u8BDD\u6846\n        const confirmModal = new ConfirmModal(\n            this.app,\n            \"\u786E\u8BA4\u5220\u9664\u7A7A\u767D\u7B14\u8BB0\",\n            `\u662F\u5426\u5220\u9664\u4EE5\u4E0B ${emptyNotes.length} \u4E2A\u7A7A\u767D\u7B14\u8BB0\uFF1F\\n${emptyNotes.map(file => file.basename).join('\\n')}`\n        );\n\n        if (await confirmModal.show()) {\n            // \u6267\u884C\u5220\u9664\n            for (const file of emptyNotes) {\n                await this.app.vault.trash(file, true);\n            }\n            // \u5237\u65B0\u89C6\u56FE\n            this.refreshView();\n            new Notice(`\u5DF2\u5220\u9664 ${emptyNotes.length} \u4E2A\u7A7A\u767D\u7B14\u8BB0`);\n        }\n    }\n\n    // \u4FEE\u6539 createMonthView \u65B9\u6CD5\u4E2D\u7684\u5E74\u4EFD\u663E\u793A\u90E8\u5206\n    private createMonthView() {\n        if (!this.container.querySelector('.month-view')) {\n            const monthContainer = this.container.createDiv('month-view');\n            \n            // \u521B\u5EFA\u6708\u89C6\u56FE\u5934\u90E8\n            const header = monthContainer.createDiv('month-header');\n            \n            // \u521B\u5EFA\u5E74\u4EFD\u663E\u793A\u533A\u57DF\n            const yearGroup = header.createDiv('year-group');\n            \n            // \u6DFB\u52A0\u4E0A\u4E00\u5E74\u6309\u94AE\n            const prevYearBtn = yearGroup.createEl('button', { cls: 'year-nav-btn' });\n            prevYearBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"15 18 9 12 15 6\"></polyline></svg>';\n            \n            // \u521B\u5EFA\u5E74\u4EFD\u663E\u793A\n            const yearDisplay = yearGroup.createDiv('year-display');\n            yearDisplay.setText(this.currentDate.getFullYear().toString());\n            \n            // \u6DFB\u52A0\u4E0B\u4E00\u5E74\u6309\u94AE\n            const nextYearBtn = yearGroup.createEl('button', { cls: 'year-nav-btn' });\n            nextYearBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"9 18 15 12 9 6\"></polyline></svg>';\n            \n            // \u6DFB\u52A0\u5E74\u4EFD\u5207\u6362\u4E8B\u4EF6\n            prevYearBtn.addEventListener('click', () => this.navigateYear(-1));\n            nextYearBtn.addEventListener('click', () => this.navigateYear(1));\n\n            // \u521B\u5EFA\u6708\u4EFD\u9009\u62E9\u5668\n            const monthSelector = header.createDiv('month-selector');\n            \n            // \u521B\u5EFA12\u4E2A\u6708\u4EFD\u6309\u94AE\n            for (let i = 1; i <= 12; i++) {\n                const monthBtn = monthSelector.createDiv({\n                    cls: `month-btn ${i === this.currentDate.getMonth() + 1 ? 'active' : ''}`,\n                    text: i.toString()\n                });\n                \n                // \u6DFB\u52A0\u70B9\u51FB\u4E8B\u4EF6\n                monthBtn.addEventListener('click', () => {\n                    this.selectMonth(i - 1);\n                });\n            }\n            \n            // \u6DFB\u52A0\u4ECA\u5929\u6309\u94AE\n            const todayBtn = header.createEl('button', { \n                cls: 'today-btn',\n                text: '\u4ECA\u5929'\n            });\n            todayBtn.addEventListener('click', () => this.goToToday());\n            \n            // \u6DFB\u52A0\u6EDA\u8F6E\u4E8B\u4EF6\n            monthSelector.addEventListener('wheel', (e) => {\n                e.preventDefault();\n                this.navigateMonth(e.deltaY > 0 ? 1 : -1);\n            });\n            \n            // \u521B\u5EFA\u661F\u671F\u5934\u90E8\n            const weekdays = ['\u65E5', '\u4E00', '\u4E8C', '\u4E09', '\u56DB', '\u4E94', '\u516D'];\n            const weekHeader = monthContainer.createDiv('month-weekdays');\n            weekdays.forEach(day => {\n                weekHeader.createDiv('weekday').setText(day);\n            });\n            \n            // \u521B\u5EFA\u65E5\u5386\u7F51\u683C\n            monthContainer.createDiv('month-grid');\n        }\n        \n        this.updateMonthView();\n    }\n\n    // \u4FEE\u6539\u6708\u4EFD\u9009\u62E9\u65B9\u6CD5\n    private selectMonth(month: number) {\n        this.currentDate = new Date(this.currentDate.getFullYear(), month);\n        this.updateMonthView();\n    }\n\n    // \u4FEE\u6539\u66F4\u65B0\u6708\u89C6\u56FE\u7684\u65B9\u6CD5\n    private updateMonthView() {\n        const monthView = this.container.querySelector('.month-view');\n        if (!monthView) return;\n\n        // \u66F4\u65B0\u5E74\u4EFD\u663E\u793A\n        const yearDisplay = monthView.querySelector('.year-display');\n        if (yearDisplay) {\n            yearDisplay.setText(this.currentDate.getFullYear().toString());\n        }\n\n        // \u66F4\u65B0\u6708\u4EFD\u9009\u62E9\u5668\n        const monthBtns = monthView.querySelectorAll('.month-btn');\n        monthBtns.forEach((btn, index) => {\n            btn.toggleClass('active', index === this.currentDate.getMonth());\n        });\n\n        // \u66F4\u65B0\u7F51\u683C\n        const grid = monthView.querySelector('.month-grid');\n        if (grid) {\n            grid.empty();\n            this.renderMonthGrid(grid as HTMLElement);\n        }\n    }\n\n    // \u4FEE\u6539\u6708\u4EFD\u5BFC\u822A\u65B9\u6CD5\n    private navigateMonth(delta: number) {\n        const newDate = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() + delta);\n        \n        // \u5982\u679C\u5E74\u4EFD\u53D8\u5316\uFF0C\u9700\u8981\u66F4\u65B0\u5E74\u4EFD\u663E\u793A\n        if (newDate.getFullYear() !== this.currentDate.getFullYear()) {\n            const yearDisplay = this.container.querySelector('.year-display');\n            if (yearDisplay) {\n                yearDisplay.setText(newDate.getFullYear().toString());\n            }\n        }\n        \n        this.currentDate = newDate;\n        this.updateMonthView();\n    }\n\n    // \u6DFB\u52A0\u8DF3\u8F6C\u5230\u4ECA\u5929\u7684\u65B9\u6CD5\n    private goToToday() {\n        this.currentDate = new Date();\n        this.updateMonthView();\n    }\n\n    // \u4FEE\u6539 renderMonthGrid \u65B9\u6CD5\u4E2D\u7684\u65E5\u671F\u683C\u5B50\u521B\u5EFA\u90E8\u5206\n    private renderMonthGrid(grid: HTMLElement) {\n        const year = this.currentDate.getFullYear();\n        const month = this.currentDate.getMonth();\n        const firstDay = new Date(year, month, 1);\n        const lastDay = new Date(year, month + 1, 0);\n        \n        // \u83B7\u53D6\u4ECA\u5929\u7684\u65E5\u671F\n        const today = new Date();\n        const isCurrentMonth = today.getFullYear() === year && today.getMonth() === month;\n        \n        // \u83B7\u53D6\u5F53\u6708\u7684\u7B14\u8BB0\n        const notesByDate = this.getNotesByDate(year, month);\n        \n        // \u586B\u5145\u524D\u7F6E\u7A7A\u767D\u65E5\u671F\n        for (let i = 0; i < firstDay.getDay(); i++) {\n            grid.createDiv('month-day empty');\n        }\n        \n        // \u586B\u5145\u65E5\u671F\u683C\u5B50\n        for (let day = 1; day <= lastDay.getDate(); day++) {\n            const dateCell = grid.createDiv('month-day');\n            const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;\n            \n            // \u68C0\u67E5\u662F\u5426\u662F\u4ECA\u5929\n            if (isCurrentMonth && today.getDate() === day) {\n                dateCell.addClass('today');\n            }\n            \n            // \u6DFB\u52A0\u65E5\u671F\u6570\u5B57\n            dateCell.createDiv('day-number').setText(String(day));\n            \n            // \u6DFB\u52A0\u7B14\u8BB0\u5217\u8868\n            const dayNotes = notesByDate[dateStr] || [];\n            if (dayNotes.length > 0) {\n                const notesList = dateCell.createDiv('day-notes');\n                \n                // \u663E\u793A\u6240\u6709\u7B14\u8BB0\n                dayNotes.forEach(note => {\n                    const noteItem = notesList.createDiv('day-note-item');\n                    noteItem.setText(note.basename);\n                    \n                    // \u6DFB\u52A0\u70B9\u51FB\u4E8B\u4EF6\n                    noteItem.addEventListener('click', async (e) => {\n                        e.stopPropagation();\n                        await this.openInAppropriateLeaf(note);\n                    });\n                    \n                    // \u6DFB\u52A0\u9884\u89C8\u529F\u80FD\n                    noteItem.addEventListener('mouseenter', async () => {\n                        try {\n                            this.previewContainer.empty();\n                            const content = await this.app.vault.read(note);\n                            await MarkdownRenderer.render(\n                                this.app,\n                                content,\n                                this.previewContainer,\n                                note.path,\n                                this\n                            );\n                        } catch (error) {\n                            console.error('\u9884\u89C8\u52A0\u8F7D\u5931\u8D25:', error);\n                        }\n                    });\n                });\n            }\n        }\n    }\n\n    // \u6DFB\u52A0\u83B7\u53D6\u6307\u5B9A\u6708\u4EFD\u7B14\u8BB0\u7684\u65B9\u6CD5\n    private getNotesByDate(year: number, month: number): Record<string, TFile[]> {\n        const notesByDate: Record<string, TFile[]> = {};\n        const files = this.app.vault.getMarkdownFiles();\n        \n        files.forEach(file => {\n            const fileDate = new Date(file.stat.mtime);\n            if (fileDate.getFullYear() === year && fileDate.getMonth() === month) {\n                const dateStr = fileDate.toISOString().split('T')[0];\n                if (!notesByDate[dateStr]) {\n                    notesByDate[dateStr] = [];\n                }\n                notesByDate[dateStr].push(file);\n            }\n        });\n        \n        return notesByDate;\n    }\n\n    // \u6DFB\u52A0\u683C\u5F0F\u5316\u6708\u4EFD\u6807\u9898\u7684\u65B9\u6CD5\n    private formatMonthTitle(date: Date): string {\n        return `${date.getFullYear()}\u5E74${date.getMonth() + 1}\u6708`;\n    }\n\n    // \u6DFB\u52A0\u5E74\u4EFD\u5BFC\u822A\u65B9\u6CD5\n    private navigateYear(delta: number) {\n        this.currentDate = new Date(this.currentDate.getFullYear() + delta, this.currentDate.getMonth());\n        this.updateMonthView();\n    }\n\n    // \u6DFB\u52A0\u521B\u5EFA\u5217\u8868\u89C6\u56FE\u7684\u65B9\u6CD5\n    private async createListView() {\n        // \u83B7\u53D6\u6240\u6709\u7B14\u8BB0\u5E76\u6309\u6587\u4EF6\u5939\u5206\u7EC4\n        const files = this.app.vault.getMarkdownFiles();\n        const notesByFolder = new Map<string, TFile[]>();\n        \n        // \u6309\u6587\u4EF6\u5939\u5206\u7EC4\u5E76\u6309\u4FEE\u6539\u65F6\u95F4\u6392\u5E8F\n        files.forEach(file => {\n            const folderPath = file.parent ? file.parent.path : '/';\n            if (!notesByFolder.has(folderPath)) {\n                notesByFolder.set(folderPath, []);\n            }\n            notesByFolder.get(folderPath)?.push(file);\n        });\n        \n        // \u5BF9\u6BCF\u4E2A\u6587\u4EF6\u5939\u4E2D\u7684\u7B14\u8BB0\u6309\u4FEE\u6539\u65F6\u95F4\u6392\u5E8F\n        notesByFolder.forEach(notes => {\n            notes.sort((a, b) => b.stat.mtime - a.stat.mtime);\n        });\n\n        // \u521B\u5EFA\u6587\u4EF6\u5939\u7EC4\n        for (const [folderPath, notes] of notesByFolder) {\n            const folderGroup = this.container.createDiv('folder-group');\n            \n            // \u521B\u5EFA\u6587\u4EF6\u5939\u6807\u9898\n            const folderTitle = folderGroup.createDiv('folder-title');\n            \n            // \u6DFB\u52A0\u6587\u4EF6\u5939\u56FE\u6807\n            const folderIcon = folderTitle.createDiv('folder-icon');\n            folderIcon.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z\"></path></svg>`;\n            \n            // \u6DFB\u52A0\u6587\u4EF6\u5939\u540D\u79F0\n            const folderName = folderTitle.createDiv('folder-name');\n            folderName.setText(folderPath === '/' ? '\u6839\u76EE\u5F55' : folderPath);\n            \n            // \u6DFB\u52A0\u7B14\u8BB0\u6570\u91CF\n            const noteCount = folderTitle.createDiv('note-count');\n            noteCount.setText(`${notes.length} \u4E2A\u7B14\u8BB0`);\n            \n            // \u521B\u5EFA\u7B14\u8BB0\u5217\u8868\u5BB9\u5668\n            const notesContainer = folderGroup.createDiv('notes-container');\n            \n            // \u6DFB\u52A0\u7B14\u8BB0\u9879\n            for (const note of notes) {\n                const noteItem = notesContainer.createDiv('note-item');\n                noteItem.setAttribute('data-path', note.path);\n                \n                // \u6DFB\u52A0\u7B14\u8BB0\u6807\u9898\n                const noteTitle = noteItem.createDiv('note-title');\n                noteTitle.setText(note.basename);\n                \n                // \u6DFB\u52A0\u4FEE\u6539\u65E5\u671F\n                const noteDate = noteItem.createDiv('note-date');\n                noteDate.setText(new Date(note.stat.mtime).toLocaleString());\n                \n                // \u6DFB\u52A0\u70B9\u51FB\u4E8B\u4EF6\n                noteItem.addEventListener('click', async (e) => {\n                    // \u5904\u7406\u7B14\u8BB0\u9009\u62E9\n                    this.handleCardSelection(note.path, e);\n                    \n                    // \u53CC\u51FB\u6253\u5F00\u7B14\u8BB0\n                    if (e.detail === 2) {\n                        await this.openInAppropriateLeaf(note);\n                    }\n                });\n                \n                // \u6DFB\u52A0\u53F3\u952E\u83DC\u5355\n                noteItem.addEventListener('contextmenu', (e) => {\n                    e.preventDefault();\n                    this.showContextMenu(e, this.getSelectedFiles());\n                });\n                \n                // \u6DFB\u52A0\u9884\u89C8\u529F\u80FD\n                noteItem.addEventListener('mouseenter', async () => {\n                    try {\n                        this.previewContainer.empty();\n                        const content = await this.app.vault.read(note);\n                        await MarkdownRenderer.render(\n                            this.app,\n                            content,\n                            this.previewContainer,\n                            note.path,\n                            this\n                        );\n                    } catch (error) {\n                        console.error('\u9884\u89C8\u52A0\u8F7D\u5931\u8D25:', error);\n                    }\n                });\n            }\n        }\n    }\n\n}\n\n// \u6DFB\u52A0\u786E\u8BA4\u5BF9\u8BDD\u6846\nclass ConfirmModal extends Modal {\n    private result: boolean = false;\n    private resolvePromise: (value: boolean) => void = () => {};  // \u6DFB\u52A0\u9ED8\u8BA4\u503C\n    private title: string;\n    private message: string;\n\n    constructor(app: App, title: string, message: string) {\n        super(app);\n        this.title = title;\n        this.message = message;\n    }\n\n    async show(): Promise<boolean> {\n        return new Promise((resolve) => {\n            this.resolvePromise = resolve;\n            this.open();\n        });\n    }\n\n    onOpen() {\n        const { contentEl } = this;\n        contentEl.createEl('h3', { text: this.title });\n        contentEl.createEl('p', { text: this.message });\n\n        const buttonContainer = contentEl.createDiv('button-container');\n        \n        const confirmButton = buttonContainer.createEl('button', { text: '\u786E\u8BA4' });\n        confirmButton.addEventListener('click', () => {\n            this.result = true;\n            this.close();\n        });\n\n        const cancelButton = buttonContainer.createEl('button', { text: '\u53D6\u6D88' });\n        cancelButton.addEventListener('click', () => {\n            this.result = false;\n            this.close();\n        });\n    }\n\n    onClose() {\n        const { contentEl } = this;\n        contentEl.empty();\n        this.resolvePromise(this.result);\n    }\n}\n\n// \u4FEE\u6539\u589E\u5F3A\u7684\u6587\u4EF6\u9009\u62E9\u6A21\u6001\u6846\nclass EnhancedFileSelectionModal extends Modal {\n    private files: TFile[];\n    private recentFolders: string[];\n    private onFoldersUpdate: (folders: string[]) => void;\n    private selectedFolder: string | null = null;\n\n    constructor(\n        app: App,\n        files: TFile[],\n        recentFolders: string[],\n        onFoldersUpdate: (folders: string[]) => void\n    ) {\n        super(app);\n        this.files = files;\n        this.recentFolders = recentFolders;\n        this.onFoldersUpdate = onFoldersUpdate;\n    }\n\n    async onOpen() {\n        const { contentEl } = this;\n        contentEl.empty();\n\n        // \u6807\u9898\n        contentEl.createEl('h3', { \n            text: `\u79FB\u52A8 ${this.files.length} \u4E2A\u6587\u4EF6` \n        });\n\n        // \u6700\u8FD1\u4F7F\u7528\u7684\u6587\u4EF6\u5939\n        if (this.recentFolders.length > 0) {\n            const recentSection = contentEl.createDiv('recent-folders-section');\n            recentSection.createEl('h4', { text: '\u6700\u4F7F\u7528' });\n            \n            const recentList = recentSection.createDiv('recent-folders-list');\n            this.recentFolders.forEach(folder => {\n                const item = recentList.createDiv('folder-item recent');\n                item.setText(folder);\n                item.addEventListener('click', () => this.selectFolder(item, folder));\n            });\n        }\n\n        // \u6240\u6709\u6587\u4EF6\u5939\u5217\u8868\n        const folderList = contentEl.createDiv('folder-list');\n        const folders = this.getFoldersWithHierarchy();\n        this.createFolderTree(folderList, folders);\n\n        // \u6DFB\u52A0\u64CD\u4F5C\u6309\u94AE\n        const buttonContainer = contentEl.createDiv('modal-button-container');\n        \n        const confirmButton = buttonContainer.createEl('button', {\n            text: '\u786E\u8BA4\u79FB\u52A8',\n            cls: 'mod-cta'\n        });\n        confirmButton.addEventListener('click', () => {\n            if (this.selectedFolder) {\n                this.moveFiles(this.selectedFolder);\n            }\n        });\n\n        const cancelButton = buttonContainer.createEl('button', {\n            text: '\u53D6\u6D88'\n        });\n        cancelButton.addEventListener('click', () => this.close());\n    }\n\n    private getFoldersWithHierarchy(): FolderItem[] {\n        const folders: FolderItem[] = [];\n        const seen = new Set<string>();\n\n        this.app.vault.getAllLoadedFiles().forEach(file => {\n            if (file instanceof TFolder) {\n                const parts = file.path.split('/');\n                let currentPath = '';\n                let level = 0;\n\n                parts.forEach(part => {\n                    if (part) {\n                        currentPath += (currentPath ? '/' : '') + part;\n                        if (!seen.has(currentPath)) {\n                            seen.add(currentPath);\n                            folders.push({\n                                path: currentPath,\n                                name: part,\n                                level: level\n                            });\n                        }\n                        level++;\n                    }\n                });\n            }\n        });\n\n        return folders.sort((a, b) => a.path.localeCompare(b.path));\n    }\n    private createFolderTree(container: HTMLElement, folders: FolderItem[]) {\n        folders.forEach(folder => {\n            const item = container.createDiv({\n                cls: 'folder-item'\n            });\n\n            // \u6DFB\u52A0\u7F29\u8FDB\n            item.style.paddingLeft = `${folder.level * 20 + 10}px`;\n\n            // \u6DFB\u52A0\u6587\u4EF6\u5939\u56FE\u6807\u548C\u540D\u79F0\n            const icon = item.createSpan({\n                cls: 'folder-icon'\n            });\n            icon.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z\"></path></svg>`;\n            const nameSpan = item.createSpan({\n                cls: 'folder-name'\n            });\n            nameSpan.textContent = folder.name;\n\n            item.addEventListener('click', () => this.selectFolder(item, folder.path));\n        });\n    }\n\n    private selectFolder(element: HTMLElement, path: string) {\n        // \u79FB\u9664\u5176\u4ED6\u9009\u4E2D\u72B6\u6001\n        this.contentEl.querySelectorAll('.folder-item').forEach(item => {\n            item.removeClass('selected');\n        });\n\n        // \u6DFB\u52A0\u9009\u4E2D\u72B6\u6001\n        element.addClass('selected');\n        this.selectedFolder = path;\n    }\n\n    private async moveFiles(targetFolder: string) {\n        const confirmModal = new ConfirmModal(\n            this.app,\n            \"\u786E\u8BA4 \u79FB\u52A8\",\n            `\u662F\u5426\u5C06\u9009\u4E2D\u7684 ${this.files.length} \u4E2A\u6587\u4EF6\u79FB\u52A8\u5230 \"${targetFolder}\"\uFF1F`\n        );\n\n        if (await confirmModal.show()) {\n            for (const file of this.files) {\n                const newPath = `${targetFolder}/${file.name}`;\n                await this.app.fileManager.renameFile(file, newPath);\n            }\n\n            // \u66F4\u65B0\u6700\u8FD1\u4F7F\u7528 \u7684\u6587\u4EF6\u5939\n            this.recentFolders = [targetFolder, ...this.recentFolders.filter(f => f !== targetFolder)]\n                .slice(0, 5);\n            this.onFoldersUpdate(this.recentFolders);\n\n            this.close();\n        }\n    }\n}\n\n// \u6DFB\u52A0\u6587\u4EF6\u5939\u9879\u63A5\u53E3\ninterface FolderItem {\n    path: string;\n    name: string;\n    level: number;\n} "],
  "mappings": "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",
  "names": ["import_obsidian", "_a", "mainLayout"]
}

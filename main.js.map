{
  "version": 3,
  "sources": ["main.ts", "cardView.ts", "ts/other.ts", "ts/models.ts"],
  "sourcesContent": ["import { App, PluginManifest, Plugin, PluginSettingTab, Setting, TFile, WorkspaceLeaf } from 'obsidian';\nimport { CardView, VIEW_TYPE_CARD, HomeModule, DEFAULT_HOME_MODULES } from './cardView';\n\ninterface CardViewPluginSettings {\n    defaultView: 'home' | 'card' | 'list' | 'timeline' | 'month' | 'week';\n    cardWidth: number;\n    minCardWidth: number;\n    maxCardWidth: number;\n    showTagCount: boolean;\n    cardHeight: number;\n    minCardHeight: number;\n    maxCardHeight: number;\n    homeModules: HomeModule[];\n}\n\nconst DEFAULT_SETTINGS: CardViewPluginSettings = {\n    defaultView: 'home',\n    cardWidth: 280,\n    minCardWidth: 280,\n    maxCardWidth: 600,\n    showTagCount: false,\n    cardHeight: 280,\n    minCardHeight: 200,\n    maxCardHeight: 800,\n    homeModules: []\n}\n\nclass CardViewSettingTab extends PluginSettingTab {\n    plugin: CardViewPlugin;\n\n    constructor(app: App, plugin: CardViewPlugin) {\n        super(app, plugin);\n        this.plugin = plugin;\n    }\n\n    display(): void {\n        const { containerEl } = this;\n        containerEl.empty();\n\n        new Setting(containerEl)\n            .setName('\u9ED8\u8BA4\u89C6\u56FE')\n            .setDesc('\u9009\u62E9\u9ED8\u8BA4\u7684\u89C6\u56FE\u6A21\u5F0F')\n            .addDropdown(dropdown => {\n                dropdown\n                    .addOption('home', '\u4E3B\u9875\u89C6\u56FE')\n                    .addOption('card', '\u5361\u7247\u89C6\u56FE')\n                    .addOption('list', '\u5217\u8868\u89C6\u56FE')\n                    .addOption('timeline', '\u65F6\u95F4\u8F74\u89C6\u56FE')\n                    .addOption('month', '\u6708\u89C6\u56FE')\n                    .addOption('week', '\u5468\u89C6\u56FE')\n                    .setValue(this.plugin.settings.defaultView);\n                \n                dropdown.onChange(async (value) => {\n                    if (value === 'home' || value === 'card' || value === 'list' || \n                        value === 'timeline' || value === 'month' || value === 'week') {\n                        this.plugin.settings.defaultView = value;\n                        await this.plugin.saveSettings();\n                    }\n                });\n            });\n\n        new Setting(containerEl)\n            .setName('\u5361\u7247\u5BBD\u5EA6')\n            .setDesc('\u8BBE\u7F6E\u5361\u7247\u7684\u5BBD\u5EA6\uFF08280-600\u50CF\u7D20\uFF09')\n            .addText(text => text\n                .setPlaceholder('280')\n                .setValue(this.plugin.settings.cardWidth.toString())\n                .onChange(async (value) => {\n                    const width = Number(value);\n                    if (!isNaN(width) && width >= 280 && width <= 600) {\n                        this.plugin.settings.cardWidth = width;\n                        await this.plugin.saveSettings();\n                        this.plugin.updateAllCardViews();\n                    }\n                }));\n\n        new Setting(containerEl)\n            .setName('\u6700\u5C0F\u5BBD\u5EA6')\n            .setDesc('\u8BBE\u7F6E\u5361\u7247\u7684\u6700\u5C0F\u5BBD\u5EA6\uFF08\u50CF\u7D20\uFF09')\n            .addText(text => text\n                .setPlaceholder('280')\n                .setValue(this.plugin.settings.minCardWidth.toString())\n                .onChange(async (value) => {\n                    const width = Number(value);\n                    if (!isNaN(width) && width >= 200) {\n                        this.plugin.settings.minCardWidth = width;\n                        await this.plugin.saveSettings();\n                    }\n                }));\n\n        new Setting(containerEl)\n            .setName('\u6700\u5927\u5BBD\u5EA6')\n            .setDesc('\u8BBE\u7F6E\u5361\u7247\u7684\u6700\u5927\u5BBD\u5EA6\uFF08\u50CF\u7D20\uFF09')\n            .addText(text => text\n                .setPlaceholder('600')\n                .setValue(this.plugin.settings.maxCardWidth.toString())\n                .onChange(async (value) => {\n                    const width = Number(value);\n                    if (!isNaN(width) && width <= 800) {\n                        this.plugin.settings.maxCardWidth = width;\n                        await this.plugin.saveSettings();\n                    }\n                }));\n\n        new Setting(containerEl)\n            .setName('\u663E\u793A\u6807\u7B7E\u5F15\u7528\u6570\u91CF')\n            .setDesc('\u5728\u6807\u7B7E\u540E\u663E\u793A\u4F7F\u7528\u8BE5\u6807\u7B7E\u7684\u7B14\u8BB0\u6570\u91CF')\n            .addToggle(toggle => toggle\n                .setValue(this.plugin.settings.showTagCount)\n                .onChange(async (value) => {\n                    this.plugin.settings.showTagCount = value;\n                    await this.plugin.saveSettings();\n                    this.plugin.refreshAllTags();\n                }));\n\n        new Setting(containerEl)\n            .setName('\u5361\u7247\u9AD8\u5EA6')\n            .setDesc('\u8BBE\u7F6E\u5361\u7247\u7684\u9AD8\u5EA6\uFF08200-800\u50CF\u7D20\uFF09')\n            .addText(text => text\n                .setPlaceholder('280')\n                .setValue(this.plugin.settings.cardHeight.toString())\n                .onChange(async (value) => {\n                    const height = Number(value);\n                    if (!isNaN(height) && height >= 200 && height <= 800) {\n                        this.plugin.settings.cardHeight = height;\n                        await this.plugin.saveSettings();\n                        this.plugin.updateAllCardViews();\n                    }\n                }));\n\n        new Setting(containerEl)\n            .setName('\u6700\u5C0F\u9AD8\u5EA6')\n            .setDesc('\u8BBE\u7F6E\u5361\u7247\u7684\u6700\u5C0F\u9AD8\u5EA6\uFF08\u50CF\u7D20\uFF09')\n            .addText(text => text\n                .setPlaceholder('200')\n                .setValue(this.plugin.settings.minCardHeight.toString())\n                .onChange(async (value) => {\n                    const height = Number(value);\n                    if (!isNaN(height) && height >= 200) {\n                        this.plugin.settings.minCardHeight = height;\n                        await this.plugin.saveSettings();\n                    }\n                }));\n\n        new Setting(containerEl)\n            .setName('\u6700\u5927\u9AD8\u5EA6')\n            .setDesc('\u8BBE\u7F6E\u5361\u7247\u7684\u6700\u5927\u9AD8\u5EA6\uFF08\u50CF\u7D20\uFF09')\n            .addText(text => text\n                .setPlaceholder('800')\n                .setValue(this.plugin.settings.maxCardHeight.toString())\n                .onChange(async (value) => {\n                    const height = Number(value);\n                    if (!isNaN(height) && height <= 800) {\n                        this.plugin.settings.maxCardHeight = height;\n                        await this.plugin.saveSettings();\n                    }\n                }));\n    }\n}\n\nexport default class CardViewPlugin extends Plugin {\n    settings: CardViewPluginSettings;\n\n    constructor(app: App, manifest: PluginManifest) { // \u6DFB\u52A0 manifest \u53C2\u6570\n        super(app, manifest); // \u4F20\u9012 manifest\n        this.settings = DEFAULT_SETTINGS; // \u521D\u59CB\u5316 settings\n    }\n    \n    async onload() {\n        // debugger; // \u8FD9\u91CC\u4F1A\u5728\u8C03\u8BD5\u65F6\u81EA\u52A8\u505C\u4F4F\n        await this.loadSettings();\n\n        this.registerView(\n            VIEW_TYPE_CARD,\n            (leaf: WorkspaceLeaf) => new CardView(leaf, this)\n        );\n\n        this.addRibbonIcon('layout-grid', '\u5361\u7247\u89C6\u56FE', () => {\n            this.activateView();\n        });\n\n        this.addSettingTab(new CardViewSettingTab(this.app, this));\n\n        // \u76D1\u542C\u6587\u4EF6\u5217\u8868\u7684\u70B9\u51FB\u4E8B\u4EF6\n        this.app.workspace.on(\"file-open\", (file: TFile | null) => {\n            if (file) {\n                this.handleFileOpen(file);\n            }\n        });\n\n    }\n\n    handleFileOpen(file: TFile) {\n        // \u5904\u7406\u6587\u4EF6\u6253\u5F00\u4E8B\u4EF6\n        console.log(`\u6587\u4EF6 ${file.path} \u88AB1\u6253\u5F00`);\n        // \u5728\u8FD9\u91CC\u53EF\u4EE5\u6DFB\u52A0\u60A8\u60F3\u8981\u7684\u903B\u8F91\uFF0C\u4F8B\u5982\u66F4\u65B0\u89C6\u56FE\u6216\u663E\u793A\u76F8\u5173\u4FE1\u606F\n    }\n\n    handleFolderOpen(folder: string) { // \u65B0\u589E\u5904\u7406\u6587\u4EF6\u5939\u6253\u5F00\u7684\u51FD\u6570\n        console.log(`\u6587\u4EF6\u5939 ${folder} \u88AB\u6253\u5F00`);\n        // \u5728\u8FD9\u91CC\u53EF\u4EE5\u6DFB\u52A0\u60A8\u60F3\u8981\u7684\u903B\u8F91\uFF0C\u4F8B\u5982\u66F4\u65B0\u89C6\u56FE\u6216\u663E\u793A \u76F8\u5173\u4FE1\u606F\n    }\n\n    async loadSettings() {\n        // \u52A0\u8F7D\u4FDD\u5B58\u7684\u8BBE\u7F6E\n        const savedData = await this.loadData();\n        \n        // \u5408\u5E76\u9ED8\u8BA4\u8BBE\u7F6E\u548C\u4FDD\u5B58\u7684\u8BBE\u7F6E\n        this.settings = {\n            ...DEFAULT_SETTINGS,\n            ...savedData,\n            // \u786E\u4FDD homeModules \u6709\u6B63\u786E\u7684\u9ED8\u8BA4\u503C\n            homeModules: savedData?.homeModules?.length > 0 \n                ? savedData.homeModules \n                : DEFAULT_HOME_MODULES.map(module => ({\n                    ...module,\n                    visible: true,  // \u786E\u4FDD\u6240\u6709\u6A21\u5757\u9ED8\u8BA4\u53EF\u89C1\n                    position: module.position || 'left'  // \u786E\u4FDD\u6709\u4F4D\u7F6E\u5C5E\u6027\n                }))\n        };\n\n        // \u5982\u679C\u6709\u4FDD\u5B58\u7684\u6A21\u5757\u914D\u7F6E\uFF0C\u68C0\u67E5\u662F\u5426\u9700\u8981\u6DFB\u52A0\u65B0\u7684\u9ED8\u8BA4\u6A21\u5757\n        if (this.settings.homeModules.length > 0) {\n            const existingModuleIds = new Set(this.settings.homeModules.map(m => m.id));\n            const newModules = DEFAULT_HOME_MODULES.filter(m => !existingModuleIds.has(m.id));\n            \n            if (newModules.length > 0) {\n                this.settings.homeModules = [\n                    ...this.settings.homeModules,\n                    ...newModules.map(m => ({\n                        ...m,\n                        visible: true,\n                        position: m.position || 'left',\n                        order: this.settings.homeModules.length + m.order\n                    }))\n                ];\n            }\n        }\n\n        // \u4FDD\u5B58\u66F4\u65B0\u540E\u7684\u8BBE\u7F6E\n        await this.saveSettings();\n        \n        console.log('Loaded settings:', this.settings);\n        console.log('Home modules:', this.settings.homeModules);\n    }\n\n    async saveSettings() {\n        await this.saveData(this.settings);\n    }\n\n    async activateView() {\n        const { workspace } = this.app;\n        \n        let leaf = workspace.getLeavesOfType(VIEW_TYPE_CARD)[0];\n        if (!leaf) {\n            leaf = workspace.getLeaf('tab');\n            await leaf.setViewState({\n                type: VIEW_TYPE_CARD,\n                active: true,\n            });\n        }\n        workspace.revealLeaf(leaf);\n\n        // \u5982\u679C\u662F\u65B0\u521B\u5EFA\u7684\u89C6\u56FE,\u8BBE\u7F6E\u4E3A\u9ED8\u8BA4\u89C6\u56FE\n        if (leaf.view instanceof CardView) {\n            leaf.view.switchView(this.settings.defaultView);\n        }\n    }\n\n    updateAllCardViews() {\n        this.app.workspace.getLeavesOfType(VIEW_TYPE_CARD).forEach(leaf => {\n            const view = leaf.view as CardView;\n            if (view) {\n                view.updateCardSize(this.settings.cardWidth);\n            }\n        });\n    }\n\n    async saveCardWidth(width: number) {\n        this.settings.cardWidth = width;\n        await this.saveSettings();\n    }\n\n    refreshAllTags() {\n        this.app.workspace.getLeavesOfType(VIEW_TYPE_CARD).forEach(leaf => {\n            const view = leaf.view as CardView;\n            if (view) {\n                view.refreshTags();\n            }\n        });\n    }\n\n    public async saveCardHeight(height: number) {\n        this.settings.cardHeight = height;\n        await this.saveSettings();\n    }\n\n    async saveHomeModules(modules: HomeModule[]) {\n        this.settings.homeModules = modules;\n        await this.saveSettings();\n    }\n}", "import {\r\n    ItemView,\r\n    WorkspaceLeaf,\r\n    TFile,\r\n    MarkdownRenderer,\r\n    Menu,\r\n    Modal,\r\n    TFolder,\r\n    App,\r\n    Notice,\r\n} from 'obsidian';\r\n\r\nimport CardViewPlugin from './main';\r\n\r\nimport { \r\n    openInAppropriateLeaf,\r\n    getWeekDates,\r\n    getEndOfWeek,\r\n    getStartOfWeek,\r\n    createFolderTree\r\n } from './ts/other'; \r\n\r\n import { \r\n    renderStats,\r\n } from './ts/models';\r\n\r\nexport const VIEW_TYPE_CARD = 'card-view';\r\nexport const VIEW_TYPE_HOME = 'home-view';\r\n\r\n// \u6DFB\u52A0\u6A21\u5757\u7C7B\u578B\u5B9A\u4E49\r\nexport interface HomeModule {\r\n  id: string;\r\n  name: string;\r\n  type: 'heatmap' | 'recent' | 'weekly' | 'stats' | 'calendar' | 'graph' | 'quicknote' | 'todo'; // \u6DFB\u52A0 todo \u7C7B\u578B\r\n  visible: boolean;\r\n  order: number;\r\n  columns: number; // \u6DFB\u52A0\u5217\u6570\u5C5E\u6027\r\n  settings?: any;\r\n  position?: 'left' | 'center' | 'right'; // \u6DFB\u52A0\u4F4D\u7F6E\u5C5E\u6027\r\n}\r\n\r\n// \u5C06 ConfirmModal \u7C7B\u79FB\u5230 CardView \u7C7B\u5916\u90E8\r\nclass ConfirmModal extends Modal {\r\n    private result: boolean = false;\r\n    private resolvePromise: (value: boolean) => void = () => {};\r\n    private title: string;\r\n    private message: string;\r\n\r\n    constructor(app: App, title: string, message: string) {\r\n        super(app);\r\n        this.title = title;\r\n        this.message = message;\r\n    }\r\n\r\n    async show(): Promise<boolean> {\r\n        return new Promise((resolve) => {\r\n            this.resolvePromise = resolve;\r\n            this.open();\r\n        });\r\n    }\r\n    \r\n\r\n    onOpen() {\r\n        const { contentEl } = this;\r\n        contentEl.createEl('h3', { text: this.title });\r\n        contentEl.createEl('p', { text: this.message });\r\n\r\n        const buttonContainer = contentEl.createDiv('button-container');\r\n        \r\n        const confirmButton = buttonContainer.createEl('button', { text: '\u786E\u8BA4' });\r\n        confirmButton.addEventListener('click', () => {\r\n            this.result = true;\r\n            this.close();\r\n        });\r\n\r\n        const cancelButton = buttonContainer.createEl('button', { text: '\u53D6\u6D88' });\r\n        cancelButton.addEventListener('click', () => {\r\n            this.result = false;\r\n            this.close();\r\n        });\r\n    }\r\n\r\n    onClose() {\r\n        const { contentEl } = this;\r\n        contentEl.empty();\r\n        this.resolvePromise(this.result);\r\n    }\r\n}\r\n\r\n// \u5C06 FolderItem \u63A5\u53E3\u79FB\u5230\u7C7B\u5916\u90E8\r\ninterface FolderItem {\r\n    path: string;\r\n    name: string;\r\n    level: number;\r\n}\r\n\r\n// \u5C06 EnhancedFileSelectionModal \u7C7B\u79FB\u5230 CardView \u7C7B\u5916\u90E8\r\nclass EnhancedFileSelectionModal extends Modal {\r\n    private files: TFile[];\r\n    private recentFolders: string[];\r\n    private onFoldersUpdate: (folders: string[]) => void;\r\n    private selectedFolder: string | null = null;\r\n\r\n    constructor(\r\n        app: App,\r\n        files: TFile[],\r\n        recentFolders: string[],\r\n        onFoldersUpdate: (folders: string[]) => void\r\n    ) {\r\n        super(app);\r\n        this.files = files;\r\n        this.recentFolders = recentFolders;\r\n        this.onFoldersUpdate = onFoldersUpdate;\r\n    }\r\n\r\n    // \u6253\u5F00\u6A21\u6001\u6846\r\n    async onOpen() {\r\n        const { contentEl } = this;\r\n        contentEl.empty();\r\n\r\n        // \u6807\u9898\r\n        contentEl.createEl('h3', { \r\n            text: `\u52A8 ${this.files.length} \u4E2A\u6587\u4EF6` \r\n        });\r\n\r\n        // \u6700\u8FD1\u4F7F\u7528\u7684\u6587\u4EF6\u5939\r\n        if (this.recentFolders.length > 0) {\r\n            const recentSection = contentEl.createDiv('recent-folders-section');\r\n            recentSection.createEl('h4', { text: '\u6700\u4F7F\u7528' });\r\n            \r\n            const recentList = recentSection.createDiv('recent-folders-list');\r\n            this.recentFolders.forEach(folder => {\r\n                const item = recentList.createDiv('folder-item recent');\r\n                item.setText(folder);\r\n                item.addEventListener('click', () => this.selectFolder(item, folder));\r\n            });\r\n        }\r\n\r\n        // \u6240\u6709\u6587\u4EF6\u5939\u5217\u8868\r\n        const folderList = contentEl.createDiv('folder-list');\r\n        const folders = this.getFoldersWithHierarchy();\r\n        this.createFolderTree(folderList, folders);\r\n\r\n        // \u6DFB\u52A0\u6309\u94AE\r\n        const buttonContainer = contentEl.createDiv('modal-button-container');\r\n        \r\n        const confirmButton = buttonContainer.createEl('button', {\r\n            text: '\u786E\u8BA4\u79FB\u52A8',\r\n            cls: 'mod-cta'\r\n        });\r\n        confirmButton.addEventListener('click', () => {\r\n            if (this.selectedFolder) {\r\n                this.moveFiles(this.selectedFolder);\r\n            }\r\n        });\r\n\r\n        const cancelButton = buttonContainer.createEl('button', {\r\n            text: '\u53D6'\r\n        });\r\n        cancelButton.addEventListener('click', () => this.close());\r\n    }\r\n\r\n    // \u53D6\u6587\u4EF6\u5939\u5C42\u6B21\u7ED3\u6784\r\n    private getFoldersWithHierarchy(): FolderItem[] {\r\n        const folders: FolderItem[] = [];\r\n        const seen = new Set<string>();\r\n\r\n        this.app.vault.getAllLoadedFiles().forEach(file => {\r\n            if (file instanceof TFolder) {\r\n                const parts = file.path.split('/');\r\n                let currentPath = '';\r\n                let level = 0;\r\n\r\n                parts.forEach(part => {\r\n                    if (part) {\r\n                        currentPath += (currentPath ? '/' : '') + part;\r\n                        if (!seen.has(currentPath)) {\r\n                            seen.add(currentPath);\r\n                            folders.push({\r\n                                path: currentPath,\r\n                                name: part,\r\n                                level: level\r\n                            });\r\n                        }\r\n                        level++;\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        return folders.sort((a, b) => a.path.localeCompare(b.path));\r\n    }\r\n\r\n    // \u521B\u5EFA\u6587\u4EF6\u5939\u6811\r\n    private createFolderTree(container: HTMLElement, folders: FolderItem[]) {\r\n        folders.forEach(folder => {\r\n            const item = container.createDiv({\r\n                cls: 'folder-item'\r\n            });\r\n\r\n            // \u6DFB\u52A0\u7F29\u8FDB\r\n            item.style.paddingLeft = `${folder.level * 20 + 10}px`;\r\n\r\n            // \u6DFB\u52A0\u6587\u4EF6\u5939\u56FE\u6807\u548C\u540D\u79F0\r\n            const icon = item.createSpan({\r\n                cls: 'folder-icon'\r\n            });\r\n            icon.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z\"></path></svg>`;\r\n            const nameSpan = item.createSpan({\r\n                cls: 'folder-name'\r\n            });\r\n            nameSpan.textContent = folder.name;\r\n\r\n            item.addEventListener('click', () => this.selectFolder(item, folder.path));\r\n        });\r\n    }\r\n\r\n    // \u9009\u62E9\u6587\u4EF6\u5939\r\n    private selectFolder(element: HTMLElement, path: string) {\r\n        // \u9664\u5176\u4ED6\u4E2D\u72B6\u6001\r\n        this.contentEl.querySelectorAll('.folder-item').forEach(item => {\r\n            item.removeClass('selected');\r\n        });\r\n\r\n        // \u6DFB\u52A0\u9009\u4E2D\u72B6\u6001\r\n        element.addClass('selected');\r\n        this.selectedFolder = path;\r\n    }\r\n\r\n    // \u79FB\u52A8\u6587\u4EF6\r\n    private async moveFiles(targetFolder: string) {\r\n        const confirmModal = new ConfirmModal(\r\n            this.app,\r\n            \"\u786E\u8BA4 \u79FB\u52A8\",\r\n            `\u662F\u5426\u5C06\u9009\u4E2D\u7684 ${this.files.length} \u4E2A\u6587\u4EF6\u79FB\u52A8\u5230 \"${targetFolder}\"\uFF1F`\r\n        );\r\n\r\n        if (await confirmModal.show()) {\r\n            for (const file of this.files) {\r\n                const newPath = `${targetFolder}/${file.name}`;\r\n                await this.app.fileManager.renameFile(file, newPath);\r\n            }\r\n\r\n            // \u66F4\u65B0\u6700\u8FD1\u4F7F\u7528 \u7684\u6587\u4EF6\u5939\r\n            this.recentFolders = [targetFolder, ...this.recentFolders.filter(f => f !== targetFolder)]\r\n                .slice(0, 5);\r\n            this.onFoldersUpdate(this.recentFolders);\r\n\r\n            this.close();\r\n        }\r\n    }\r\n}\r\n\r\n// \u89C6\u56FE\r\nexport class CardView extends ItemView {\r\n    private plugin: CardViewPlugin;\r\n    private currentView: 'home' | 'card' | 'list' | 'timeline' | 'month' | 'week';\r\n    private container: HTMLElement;\r\n    private tagContainer: HTMLElement;\r\n    private previewContainer: HTMLElement;\r\n    private previewResizer: HTMLElement;\r\n    private isPreviewCollapsed: boolean;\r\n    private searchInput: HTMLInputElement;\r\n    private currentSearchTerm: string;\r\n    private selectedTags: Set<string>;\r\n    private selectedNotes: Set<string>;\r\n    private lastSelectedNote: string | null;\r\n    private recentFolders: string[];\r\n    private cardSize: number;\r\n    private cardHeight: number;\r\n    private calendarContainer: HTMLElement;\r\n    private isCalendarVisible: boolean;\r\n    private currentDate: Date;\r\n    private currentFilter: { type: 'date' | 'none', value?: string };\r\n    private monthViewContainer: HTMLElement;\r\n    private isMonthViewVisible: boolean;\r\n    private loadedNotes: Set<string>;\r\n    private currentPage: number;\r\n    private pageSize: number;\r\n    private isLoading: boolean;\r\n    private hasMoreNotes: boolean;\r\n    private loadingIndicator: HTMLElement;\r\n    private timelineCurrentPage: number;\r\n    private timelinePageSize: number;\r\n    private timelineIsLoading: boolean;\r\n    private timelineHasMore: boolean;\r\n    private timelineLoadingIndicator: HTMLElement;\r\n    private statusBar: HTMLElement;\r\n    private statusLeft: HTMLElement;\r\n    private statusRight: HTMLElement;\r\n    private loadingStatus: HTMLElement;\r\n    private currentLoadingView: 'home' | 'card' | 'list' | 'timeline' | 'month' | 'week' | null;\r\n    private cardSettings: {\r\n        card: {\r\n            showDate: boolean;\r\n            showContent: boolean;\r\n            cardGap: number;\r\n            cardsPerRow: number;\r\n            cardHeight: number;  // \u65B0\u589E\r\n        };\r\n        list: {\r\n            showDate: boolean;\r\n            showContent: boolean;\r\n            cardGap: number;\r\n            cardsPerRow: number;\r\n            cardHeight: number;  // \u65B0\u589E\r\n        };\r\n        timeline: {\r\n            showDate: boolean;\r\n            showContent: boolean;\r\n            cardGap: number;\r\n            cardsPerRow: number;\r\n            cardHeight: number;  // \u65B0\u589E\r\n        };\r\n        month: {\r\n            showDate: boolean;\r\n            showContent: boolean;\r\n            cardGap: number;\r\n            cardsPerRow: number;\r\n            cardHeight: number;  // \u65B0\u589E\r\n        };\r\n    } = {\r\n        card: {\r\n            showDate: true,\r\n            showContent: true,\r\n            cardGap: 16,\r\n            cardsPerRow: 4,\r\n            cardHeight: 280  // \u9ED8\u8BA4\u9AD8\u5EA6\r\n        },\r\n        list: {\r\n            showDate: true,\r\n            showContent: true,\r\n            cardGap: 16,\r\n            cardsPerRow: 1,\r\n            cardHeight: 280\r\n        },\r\n        timeline: {\r\n            showDate: true,\r\n            showContent: true,\r\n            cardGap: 16,\r\n            cardsPerRow: 2,\r\n            cardHeight: 280\r\n        },\r\n        month: {\r\n            showDate: true,\r\n            showContent: true,\r\n            cardGap: 8,\r\n            cardsPerRow: 1,\r\n            cardHeight: 280\r\n        }\r\n    };\r\n    private scrollTimeout: NodeJS.Timeout | null = null;\r\n    private intersectionObserver!: IntersectionObserver;\r\n    private weekViewContainer: HTMLElement;\r\n    private currentWeek: number;\r\n    private currentYear: number;\r\n    private homeModules: HomeModule[] = [\r\n        {\r\n            id: 'heatmap',\r\n            name: '\u6D3B\u52A8\u70ED\u529B\u56FE',\r\n            type: 'heatmap',\r\n            visible: true,\r\n            order: 0,\r\n            columns: 4\r\n        },\r\n        {\r\n            id: 'weekly',\r\n            name: '\u672C\u5468\u7B14\u8BB0',\r\n            type: 'weekly',\r\n            visible: true, \r\n            order: 1,\r\n            columns: 4\r\n        },\r\n        {\r\n            id: 'recent',\r\n            name: '\u6700\u8FD1\u7F16\u8F91',\r\n            type: 'recent',\r\n            visible: true,\r\n            order: 2,\r\n            columns: 4\r\n        },\r\n        {\r\n            id: 'stats',\r\n            name: '\u7B14\u8BB0\u7EDF\u8BA1',\r\n            type: 'stats',\r\n            visible: true,\r\n            order: 3,\r\n            columns: 4\r\n        },\r\n        {\r\n            id: 'calendar',\r\n            name: '\u65E5\u5386',\r\n            type: 'calendar',\r\n            visible: true,\r\n            order: 4,\r\n            columns: 4\r\n        }\r\n    ];\r\n\r\n    // \u6784\u9020\u51FD\u6570\r\n    constructor(leaf: WorkspaceLeaf, plugin: CardViewPlugin) {\r\n        super(leaf);\r\n        this.plugin = plugin;\r\n        this.currentView = 'home';\r\n        this.container = createDiv();\r\n        this.tagContainer = createDiv();\r\n        this.previewContainer = createDiv();\r\n        this.previewResizer = createDiv();\r\n        this.isPreviewCollapsed = false;\r\n        this.searchInput = createEl('input');\r\n        this.currentSearchTerm = '';\r\n        this.selectedTags = new Set();\r\n        this.selectedNotes = new Set();\r\n        this.lastSelectedNote = null;\r\n        this.recentFolders = [];\r\n        this.cardSize = 280;\r\n        this.cardHeight = 280;\r\n        this.calendarContainer = createDiv();\r\n        this.isCalendarVisible = false;\r\n        this.currentDate = new Date();\r\n        this.currentFilter = { type: 'none' };\r\n        this.monthViewContainer = createDiv();\r\n        this.isMonthViewVisible = false;\r\n        this.loadedNotes = new Set();\r\n        this.currentPage = 1;\r\n        this.pageSize = 20;\r\n        this.isLoading = false;\r\n        this.hasMoreNotes = true;\r\n        this.loadingIndicator = createDiv('loading-indicator');\r\n        this.timelineCurrentPage = 1;\r\n        this.timelinePageSize = 10;\r\n        this.timelineIsLoading = false;\r\n        this.timelineHasMore = true;\r\n        this.timelineLoadingIndicator = createDiv('timeline-loading-indicator');\r\n        this.statusBar = createDiv('status-bar');\r\n        this.statusLeft = createDiv('status-left');\r\n        this.statusRight = createDiv('status-right');\r\n        this.loadingStatus = createDiv('status-item');\r\n        this.currentLoadingView = null;\r\n        this.weekViewContainer = createDiv();\r\n        this.currentWeek = this.getWeekNumber(new Date());\r\n        this.currentYear = new Date().getFullYear();\r\n\r\n        // \u521D\u59CB\u5316 Intersection Observer\r\n        this.setupIntersectionObserver();\r\n\r\n        // \u521D\u59CB\u5316\u5468\u89C6\u56FE\u76F8\u5173\u5C5E\u6027\r\n        const today = new Date();\r\n        this.currentYear = today.getFullYear();\r\n        this.currentWeek = this.getWeekNumber(today);\r\n        console.log('\u521D\u59CB\u5316\u5468\u89C6 - \u5E74\u4EFD:', this.currentYear, '\u5468\u6570:', this.currentWeek);\r\n\r\n        // \u4F7F\u7528\u63D2\u4EF6\u4FDD\u5B58\u7684\u8BBE\u521D\u59CB\u5316\u4E3B\u9875\u6A21\u5757\r\n        this.homeModules = plugin.settings.homeModules.length > 0 \r\n            ? plugin.settings.homeModules \r\n            : DEFAULT_HOME_MODULES;\r\n    }\r\n\r\n    /**\r\n     * \u83B7\u53D6\u89C6\u56FE\u7C7B\u578B\r\n     * @returns \u89C6\u56FE\u7C7B\u578B\u6807\u8BC6\u7B26\r\n     */\r\n    getViewType(): string {\r\n        return VIEW_TYPE_CARD;\r\n    }\r\n\r\n    /**\r\n     * \u83B7\u53D6\u89C6\u56FE\u663E\u793A\u6587\u672C\r\n     * @returns \u793A\u5728\u6807\u7B7E\u9875\u4E0A\u7684\u6587\u672C\r\n     */\r\n    getDisplayText(): string {\r\n        return '\u5361\u7247\u89C6\u56FE';\r\n    }\r\n\r\n    /**\r\n     * \u89C6\u56FE\u6253\u5F00\u65F6\u7684\u521D\u59CB\u5316\u51FD\u6570\r\n     * \u521B\u5EFA\u6807\u7B7E\u8FC7\u6EE4\u5668\u3001\u89C6\u56FE\u5207\u6362\u6309\u94AE\u548C\u5BB9\u5668\r\n     */\r\n    async onOpen() {\r\n        const { containerEl } = this;\r\n        containerEl.empty();\r\n        containerEl.addClass('card-view-container');\r\n        \r\n        // \u521B\u5EFA\u4E3B\u5E03\u5C40\u5BB9\u5668\r\n        const mainLayout = containerEl.createDiv('main-layout');\r\n        \r\n        // \u521B\u5EFA\u5DE6\u4FA7\u5185\u5BB9\u533A\u57DF\r\n        const contentSection = mainLayout.createDiv('content-section');\r\n        \r\n        // \u521B\u5EFA\u5DE5\u5177\u680F\r\n        const toolbar = contentSection.createDiv('card-view-toolbar');\r\n        \r\n        // \u5DE6\u4FA7\u5DE5\u5177\r\n        const leftTools = toolbar.createDiv('toolbar-left');\r\n        \r\n        // \u65B0\u5EFA\u7B14\u8BB0\u6309\u94AE\r\n        const newNoteBtn = leftTools.createEl('button', {\r\n            cls: 'new-note-button',\r\n        });\r\n        newNoteBtn.innerHTML = `\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-plus\"><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line></svg>\r\n            <span>\u65B0\u5EFA\u7B14\u8BB0</span>\r\n        `;\r\n        newNoteBtn.addEventListener('click', () => this.createNewNote());\r\n\r\n        // \u89C6\u56FE\u5207\u6362\u6309\u94AE\u7EC4\r\n        const viewSwitcher = leftTools.createDiv('view-switcher');\r\n        this.createViewSwitcher(viewSwitcher);\r\n\r\n        // \u53F3\u4FA7\u641C\u7D22\u6846\r\n        const searchContainer = toolbar.createDiv('search-container');\r\n        \r\n        // \u6DFB\u52A0\u547D\u4EE4\u6309\u94AE\r\n        this.createCommandButton(searchContainer);\r\n        \r\n        this.searchInput = searchContainer.createEl('input', {\r\n            type: 'text',\r\n            placeholder: '\u641C\u7D22\u8BB0...',\r\n            cls: 'search-input'\r\n        });\r\n\r\n        // \u521B\u5EFA\u5FEB\u901F\u7B14\u8BB0\u680F\uFF08\u653E\u5728\u4E3B\u5E03\u5C40\u5BB9\u5668\u7684\u6700\u524D\u9762\uFF09\r\n        const quickNoteBar = mainLayout.createDiv('quick-note-bar');\r\n        quickNoteBar.addClass('minimized'); // \u9ED8\u8BA4\u6DFB\u52A0\u6700\u5C0F\u5316\u7C7B\r\n\r\n        // \u8BBE\u7F6E\u521D\u59CB\u4F4D\u7F6E\u5728\u53F3\u4E0B\u89D2\r\n        const workspaceLeafContent = this.containerEl.closest('.workspace-leaf-content');\r\n        if (workspaceLeafContent) {\r\n            // \u4F7F\u7528 requestAnimationFrame \u786E\u4FDD\u5728 DOM \u5B8C\u5168\u52A0\u8F7D\u540E\u8BBE\u7F6E\u4F4D\u7F6E\r\n            requestAnimationFrame(() => {\r\n                const leafRect = workspaceLeafContent.getBoundingClientRect();\r\n                // \u8BA1\u7B97\u53F3\u4E0B\u7F6E\r\n                const right = 20; // \u8DDD\u53F3\u8FB9\u8DDD\r\n                const bottom = 20; // \u8DDD\u5E95\u8FB9\u8DDD\r\n                \r\n                quickNoteBar.style.position = 'absolute';\r\n                quickNoteBar.style.right = `${right}px`;\r\n                quickNoteBar.style.bottom = `${bottom}px`;\r\n                quickNoteBar.style.left = 'auto';\r\n                quickNoteBar.style.top = 'auto';\r\n                quickNoteBar.style.transform = 'none';\r\n                quickNoteBar.style.width = '40px';\r\n                quickNoteBar.style.height = '40px';\r\n            });\r\n        }\r\n\r\n        // \u6DFB\u52A0\u63A7\u5236\u6309\u94AE\r\n        const controls = quickNoteBar.createDiv('quick-note-controls');\r\n\r\n        // \u6700\u5C0F\u5316\u6309\u94AE\r\n        const minimizeBtn = controls.createEl('button', {\r\n            cls: 'control-button minimize-btn',\r\n        });\r\n        minimizeBtn.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line></svg>`;\r\n\r\n        // \u6700\u5C0F\u5316\u56FE\u6807\r\n        const minimizeIcon = quickNoteBar.createDiv('minimize-icon');\r\n        minimizeIcon.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path><path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path></svg>`;\r\n\r\n        // \u62D6\u62FD\u529F\u80FD\r\n        this.setupDraggable(quickNoteBar);\r\n\r\n        // \u6DFB\u52A0\u4E0D\u540C\u7684\u6700\u5C0F\u5316\u529F\u80FD\r\n        minimizeBtn.addEventListener('click', () => {\r\n            this.minimizeQuickNote(quickNoteBar);\r\n        });\r\n\r\n        minimizeIcon.addEventListener('click', () => {\r\n            this.restoreQuickNote(quickNoteBar);\r\n        });\r\n\r\n        const inputContainer = quickNoteBar.createDiv('quick-note-input-container');\r\n\r\n        // \u521B\u5EFA\u6807\u9898\u8F93\u5165\u6846\r\n        const titleInput = inputContainer.createEl('input', {\r\n            cls: 'quick-note-title',\r\n            attr: {\r\n                placeholder: '\u8F93\u5165\u7B14\u8BB0\u6807\u9898...',\r\n                type: 'text'\r\n            }\r\n        });\r\n\r\n        // \u521B\u5EFA\u6587\u672C\u8F93\u5165\u6846\r\n        const noteInput = inputContainer.createEl('textarea', {\r\n            cls: 'quick-note-input',\r\n            attr: {\r\n                placeholder: '\u8F93\u5165\u7B14\u5185\u5BB9\uFF0C\u6309 Enter \u53D1\u9001...'\r\n            }\r\n        });\r\n\r\n        // \u521B\u5EFA\u6807\u7B7E\u5BB9\u5668\u548C\u6807\u7B7E\u96C6\r\n        const tagsContainer = inputContainer.createDiv('tags-container');\r\n        const tags = new Set<string>();\r\n\r\n        // \u521B\u5EFA\u6807\u7B7E\u8F93\u5165\u6846\r\n        const tagInput = tagsContainer.createEl('input', {\r\n            cls: 'tag-input',\r\n            attr: {\r\n                placeholder: '\u6DFB\u52A0\u6807\u7B7E...'\r\n            }\r\n        });\r\n\r\n        // \u521B\u5EFA\u5DE5\u5177\u680F\r\n        const quickNoteToolbar = inputContainer.createDiv('quick-note-toolbar');\r\n\r\n        // \u6DFB\u4EE3\u7801\u6309\u94AE\r\n        const codeBtn = quickNoteToolbar.createEl('button', {\r\n            cls: 'quick-note-btn',\r\n            attr: { 'data-type': 'code' }\r\n        });\r\n        codeBtn.innerHTML = `\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"16 18 22 12 16 6\"></polyline><polyline points=\"8 6 2 12 8 18\"></polyline></svg>\r\n            \u4EE3\u7801\r\n        `;\r\n\r\n        // \u6DFB\u52A0\u56FE\u7247\u6309\u94AE\r\n        const imageBtn = quickNoteToolbar.createEl('button', {\r\n            cls: 'quick-note-btn',\r\n            attr: { 'data-type': 'image' }\r\n        });\r\n        imageBtn.innerHTML = `\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\"></circle><polyline points=\"21 15 16 10 5 21\"></polyline></svg>\r\n            \u56FE\u7247\r\n        `;\r\n\r\n        // \u6DFB\u52A0\u7075\u611F\u6309\u94AE\r\n        const ideaBtn = quickNoteToolbar.createEl('button', {\r\n            cls: 'quick-note-btn',\r\n            attr: { 'data-type': 'idea' }\r\n        });\r\n        ideaBtn.innerHTML = `\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\"></line><line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\"></line></svg>\r\n            \u7075\u611F\r\n        `;\r\n\r\n        // \u521B\u5EFA\u6807\u7B7E\u5EFA\u5BB9\u5668\r\n        const tagSuggestions = inputContainer.createDiv('tag-suggestions');\r\n\r\n        // \u6DFB\u4E8B\u4EF6\u5904\u7406\r\n        this.setupQuickNoteEvents(noteInput, quickNoteToolbar, tagSuggestions);\r\n\r\n        // \u521D\u59CB\u641C\u7D22\u5904\u7406\r\n        this.setupSearch();\r\n\r\n        // \u6807\u7B7E\u680F\r\n        this.tagContainer = contentSection.createDiv('filter-toolbar');\r\n        await this.loadTags();\r\n\r\n        // \u521B\u4E3B\u5185\u5BB9\u533A\u57DF\r\n        const contentArea = contentSection.createDiv('card-view-content');\r\n        this.container = contentArea.createDiv('card-container');\r\n        \r\n        // \u4F7F\u7528\u5B58\u7684\u5BBD\u5EA6\u548C\u9AD8\u5EA6\u521D\u59CB\u5316\u5361\u7247\u5BB9\u5668\r\n        this.cardSize = this.plugin.settings.cardWidth;\r\n        // \u5220\u9664\u8BFB\u53D6\u9AD8\u5EA6\u7684\u4EE3\u7801\uFF0C\u56E0\u4E3AcardHeight\u5C5E\u6027\u4E0D\u5B58\r\n        // this.container.style.gridTemplateColumns = `repeat(auto-fill, ${this.cardSize}px`;\r\n        \r\n        // \u6DFB\u52A0\u6EDA\u8F6E\u4E8B\u4EF6\u76D1\u542C\r\n        this.container.addEventListener('wheel', (e: WheelEvent) => {\r\n            if (e.ctrlKey || e.shiftKey) {\r\n                e.preventDefault();\r\n                \r\n                if (e.ctrlKey) {\r\n                    // Ctrl + \u6EDA\u8F6E\u8C03\u6574\u5BBD\u5EA6\r\n                    this.adjustCardSize(e.deltaY);\r\n                } else if (e.shiftKey) {\r\n                    // Shift + \u6EDA\u8F6E\u8C03\u6574\u9AD8\u5EA6\r\n                    this.adjustCardHeight(e.deltaY);\r\n                }\r\n            }\r\n        });\r\n\r\n        // \u521B\u5EFA\u9884\u89C8\u57DF\r\n        const previewWrapper = mainLayout.createDiv('preview-wrapper');\r\n\r\n        // \u6DFB\u52A0\u9884\u5236\u6309\u94AE\r\n        const previewControls = previewWrapper.createDiv('preview-controls');\r\n        const toggleButton = previewControls.createEl('button', {\r\n            cls: 'preview-toggle',\r\n            attr: { 'aria-label': '\u6298\u53E0\u9884\u89C8' }\r\n        });\r\n        toggleButton.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-chevron-right\"><polyline points=\"9 18 15 12 9 6\"></polyline></svg>`;\r\n\r\n        toggleButton.addEventListener('click', () => this.togglePreview());\r\n\r\n        // \u6DFB\u52A0\u8C03\u6574\u5BBD\u5EA6\u7684\u5206\u9694\u7EBF\r\n        this.previewResizer = previewWrapper.createDiv('preview-resizer');\r\n\r\n        // \u521B\u5EFA\u9884\u89C8\u5668\r\n        this.previewContainer = previewWrapper.createDiv('preview-container');\r\n\r\n        // \u8BBE\u7F6E\u9884\u89C8\u680F\u8C03\u6574\u529F\u80FD\r\n        this.setupResizer();\r\n\r\n        // \u8BBE\u7F6E\u6EDA\u52A8\u540C\u6B65\r\n        this.setupScrollSync();\r\n\r\n        // \u5728 mainLayout \u7684\u672B\u5C3E\u6DFB\u52A0\u72B6\u6001\u680F\r\n        this.statusBar.empty();\r\n        this.statusLeft.empty();\r\n        this.statusRight.empty();\r\n        \r\n        // \u6DFB\u52A0\u52A0\uFFFD\uFFFD\u72B6\u6001\u6307\u793A\u5668\r\n        this.loadingStatus.innerHTML = `\r\n            <div class=\"loading-indicator\">\r\n                <div class=\"loading-spinner\"></div>\r\n                <span>\u51C6\u52A0\u8F7D...</span>\r\n            </div>\r\n        `;\r\n        this.statusLeft.appendChild(this.loadingStatus);\r\n        \r\n        // \u6DFB\u5176\u4ED6\u72B6\u6001\u606F\r\n        const totalNotesStatus = createDiv('status-item');\r\n        totalNotesStatus.innerHTML = `\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"></path><polyline points=\"14 2 14 8 20 8\"></polyline><line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\"></line><line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\"></line><polyline points=\"10 9 9 9 8 9\"></polyline></svg>\r\n            <span>\u603B\u7B14\u8BB0\u6570: ${this.app.vault.getMarkdownFiles().length}</span>\r\n        `;\r\n        this.statusRight.appendChild(totalNotesStatus);\r\n        \r\n        this.statusBar.appendChild(this.statusLeft);\r\n        this.statusBar.appendChild(this.statusRight);\r\n        contentSection.appendChild(this.statusBar); // \u4FEE\u6539\u8FD9\u91CC\uFF0C\u5C06\u72B6\u6001\u680F\u6DFB\u52A0\u5230 contentSection\r\n        \r\n        // \u8BBE\u7F6E\u521D\u59CB\u52A0\u8F7D\u89C6\u56FE\r\n        this.currentLoadingView = 'card';\r\n        await this.loadNotes();\r\n\r\n        // \u5728\u5361\u7247\u5BB9\u5668\u7684\u4E8B\u4EF6\u5904\u7406\u4E2D\u6DFB\u52A0\r\n        const cardContainer = containerEl.querySelector('.card-container');\r\n        if (cardContainer) {\r\n            cardContainer.addEventListener('click', (e) => {\r\n                // \u5982\u679C\u70B9\u51FB\u7684\u662F\u5BB9\u5668\u672C\u8EAB(\u800C\u4E0D\u662F\u5361\u7247)\r\n                if (e.target === cardContainer) {\r\n                    // \u79FB\u9664\u6240\u6709\u5361\u7247\u7684selected\u7C7B\r\n                    const cards = cardContainer.querySelectorAll('.note-card');\r\n                    cards.forEach(card => {\r\n                        card.classList.remove('selected');\r\n                    });\r\n                } // \u91CC\u6DFB\u52A0\u7F3A\u5931\u7684\u5408\u62EC\u53F7\r\n            });\r\n        }\r\n\r\n      \r\n\r\n        // \u5728\u521B\u5EFA\u8F93\u5165\u6846\u540E\u6DFB\u52A0\u53D1\u9001\u94AE\r\n        const sendButton = inputContainer.createEl('button', {\r\n            cls: 'quick-note-send',\r\n            attr: {\r\n                'title': '\u53D1\u9001\u7B14\u8BB0'\r\n            }\r\n        });\r\n        sendButton.innerHTML = `\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><line x1=\"22\" y1=\"2\" x2=\"11\" y2=\"13\"></line><polygon points=\"22 2 15 22 11 13 2 9 22 2\"></polygon></svg>\r\n        `;\r\n\r\n        // \u53D1\u9001\u6309\u94AE\u4E8B\u4EF6\r\n        sendButton.addEventListener('click', async (e) => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            \r\n            const title = titleInput?.value?.trim();\r\n            const content = noteInput.value.trim();\r\n            \r\n            if (!content) {\r\n                new Notice('\u8BF7\u8F93\u5165\u7B14\u8BB0\u5BB9');\r\n                return;\r\n            }\r\n\r\n            try {\r\n                // \u83B7\u53D6\u6240\u6709\u5DF2\u6DFB\u52A0\u7684\u6807\u7B7E\r\n                const tagItems = tagsContainer?.querySelectorAll('.tag-item') ?? [];\r\n                const tagTexts = Array.from(tagItems).map(item => item.textContent?.replace('\u00D7', '').trim() ?? '');\r\n                \r\n                // \u6784\u5EFA\u7B14\u8BB0\u5185\u5BB9\u5305\u542B\u6807\u7B7E\r\n                const tagsContent = tagTexts.map(tag => `#${tag}`).join(' ');\r\n                const finalContent = tagsContent ? `${tagsContent}\\n\\n${content}` : content;\r\n                \r\n                // \u4F7F\u7528\u6807\u9898\u4F5C\u4E3A\u6587\u4EF6\u5982\u679C\u6CA1\u6709\u4F7F\u7528\u65E5\u671F\r\n                const fileName = title || new Date().toLocaleDateString('zh-CN', {\r\n                    year: 'numeric',\r\n                    month: '2-digit',\r\n                    day: '2-digit'\r\n                }).replace(/\\//g, '-');\r\n\r\n                // \u521B\u5EFA\u7B14\u8BB0\r\n                const file = await this.createQuickNote(finalContent, [], fileName);\r\n                \r\n                if (file) {\r\n                    // \u6E05\u7406\u8F93\u5165\u72B6\u6001\r\n                    this.clearQuickNoteInputs(titleInput ?? null, noteInput, tags, tagsContainer ?? null, tagInput ?? null);\r\n                    \r\n                    // \u5237\u65B0\u56FE\r\n                    await this.refreshView();\r\n                    \r\n                    new Notice('\u521B\u5EFA\u6210\u529F');\r\n                }\r\n            } catch (error) {\r\n                console.error('\u521B\u5EFA\u7B14\u8BB0\u5931\u8D25:', error);\r\n                new Notice('\u521B\u5EFA\u7B14\u8BB0\u5931\u8D25');\r\n            }\r\n        });\r\n\r\n        // \u521D\u59CB\u5316\u5B8C\u6210\u540E\u66F4\u65B0\u6309\u94AE\u72B6\u6001\r\n        this.updateToolbarButtons();\r\n\r\n        // \u521D\u59CB\u5316\u5B8C\u6210\u540E\uFF0C\u5207\u6362\u5230\u4E3B\u9875\u89C6\u56FE\r\n        this.switchView('home');\r\n    }\r\n\r\n\r\n    // \u83B7\u53D6\u6807\u7B7E\u548C\u6570\u91CF\r\n    private getTagsWithCount(): Map<string, number> {\r\n        const tagCounts = new Map<string, number>();\r\n        \r\n        this.app.vault.getMarkdownFiles().forEach(file => {\r\n            const cache = this.app.metadataCache.getFileCache(file);\r\n            if (cache?.tags) {\r\n                cache.tags.forEach(tag => {\r\n                    const count = tagCounts.get(tag.tag) || 0;\r\n                    tagCounts.set(tag.tag, count + 1);\r\n                });\r\n            }\r\n        });\r\n        \r\n        return tagCounts;\r\n    }\r\n\r\n\r\n    // \u52A0\u8F7D\u6807\u7B7E\r\n    private async loadTags() {\r\n        const tagCounts = this.getTagsWithCount();\r\n        this.tagContainer.empty();\r\n\r\n        // \u521B\u5EFA\u5DE6\u4FA7\u533A\u57DF\r\n        const leftArea = this.tagContainer.createDiv('filter-toolbar-left');\r\n\r\n        // \u521B\u5EFA\u6309\u94AE\u7EC4\u5BB9\u5668\r\n        const buttonGroup = leftArea.createDiv('filter-toolbar-buttons');\r\n\r\n        // \u4E3B\u9875\u89C6\u56FE\u6309\u94AE\u7EC4\r\n        const homeButtons = buttonGroup.createDiv('home-view-buttons');\r\n        homeButtons.setAttribute('data-views', 'home');  // \u53EA\u5728\u4E3B\u9875\u89C6\u56FE\u663E\u793A\r\n        \r\n        // \u6DFB\u52A0\u6A21\u5757\u7BA1\u7406\u6309\u94AE\r\n        const manageBtn = homeButtons.createEl('button',{\r\n            cls: 'module-manage-btn',\r\n            text: '\u7BA1\u7406\u5E03\u5C40'\r\n        });\r\n        \r\n        manageBtn.addEventListener('click', () => {\r\n            this.showModuleManager();\r\n        });\r\n\r\n        // \u6DFB\u52A0\u7F16\u8F91\u5E03\u5C40\u6309\u94AE\r\n        const editBtn = homeButtons.createEl('button', {\r\n            cls: 'module-edit-btn',\r\n            text: '\u7F16\u8F91\u5E03\u5C40'\r\n        });\r\n        \r\n\r\n\r\n        \r\n\r\n        // \u7F16\u8F91\u5E03\u5C40\u6309\u94AE\u4E8B\u4EF6\r\n        let isEditMode = false;\r\n        editBtn.addEventListener('click', () => {\r\n            isEditMode = !isEditMode;\r\n            this.container.toggleClass('edit-mode', isEditMode);\r\n            editBtn.setText(isEditMode ? '\u5B8C\u6210\u7F16\u8F91' : '\u7F16\u8F91\u5E03\u5C40');\r\n            editBtn.toggleClass('active', isEditMode); // \u6DFB\u52A0\u8FD9\u884C\u5207\u6362\u6309\u94AE\u7684\u6FC0\u6D3B\u72B6\u6001\r\n            this.toggleModuleEditing(isEditMode);//\u5207\u6362\u6A21\u5757\r\n        });\r\n\r\n        // \u5361\u7247\u89C6\u56FE\u6309\u94AE\u7EC4\r\n        const cardButtons = buttonGroup.createDiv('card-view-buttons');\r\n        cardButtons.setAttribute('data-views', 'card,list,timeline,month,week');\r\n\r\n        // \u521B\u5EFA\u65E5\u5386\u6309\u94AE\r\n        const calendarBtn = cardButtons.createEl('button', {\r\n            cls: 'calendar-toggle-button toolbar-button',\r\n        });\r\n        calendarBtn.innerHTML = `\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"></line><line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"></line><line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"></line></svg>\r\n            <span>\u65E5\u5386</span>\r\n        `;\r\n\r\n        // \u521B\u5EFA\u5361\u7247\u8BBE\u7F6E\u6309\r\n        const settingsBtn = cardButtons.createEl('button', {\r\n            cls: 'card-settings-button toolbar-button',\r\n        });\r\n        settingsBtn.innerHTML = `\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"3\"></circle><path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"></path></svg>\r\n            <span>\u5361\u7247\u8BBE\u7F6E</span>\r\n        `;\r\n\r\n        // \u65E5\u5386\u5BB9\u5668\r\n        this.calendarContainer = calendarBtn.createDiv('calendar-container');\r\n        this.calendarContainer.style.display = 'none';\r\n\r\n        // \u6DFB\u52A0\u60AC\u505C\u4E8B\u4EF6\r\n        let hoverTimeout: NodeJS.Timeout;\r\n        calendarBtn.addEventListener('mouseenter', () => {\r\n            clearTimeout(hoverTimeout);\r\n            this.showCalendar();\r\n        });\r\n\r\n        calendarBtn.addEventListener('mouseleave', () => {\r\n            hoverTimeout = setTimeout(() => {\r\n                this.hideCalendar();\r\n            }, 200);\r\n        });\r\n\r\n        // \u6807\u7B7E\u4E0B\u62C9\u5217\u8868\u5BB9\u5668\r\n        const tagButtons = buttonGroup.createDiv('tag-view-buttons');        \r\n        tagButtons.setAttribute('data-views', 'card,list,timeline,month,week'); \r\n\r\n        const dropdownContainer = tagButtons.createDiv('tag-dropdown-container');\r\n        \r\n        // \u521B\u5EFA\u4E0B\u62C9\u5217\u8868\r\n        const dropdown = dropdownContainer.createEl('select', {\r\n            cls: 'tag-dropdown'\r\n        });\r\n\r\n        // \u6DFB\u52A0\u9ED8\u8BA4\u9009\u9879\r\n        dropdown.createEl('option', {\r\n            text: '\u6807\u7B7E',\r\n            value: ''\r\n        });\r\n\r\n        // \u521B\u5EFA\u81EA\u5B9A\u4E49\u4E0B\u62C9\u9762\r\n        const dropdownPanel = dropdownContainer.createDiv('dropdown-panel');\r\n        dropdownPanel.style.display = 'none';\r\n\r\n        // \u6DFB\u52A0\u6240\u6709\u6807\u7B7E\u9009\u9879\r\n        Array.from(tagCounts.entries())\r\n            .sort(([a], [b]) => a.localeCompare(b))\r\n            .forEach(([tag, count]) => {\r\n                // \u521B\u5EFA\u9009\u9879\u5143\u7D20\r\n                const option = dropdownPanel.createDiv('dropdown-option');\r\n                option.createSpan({ text: tag });\r\n                option.createSpan({ \r\n                    text: count.toString(),\r\n                    cls: 'tag-count'\r\n                });\r\n\r\n                // \u6DFB\u52A0\u70B9\u51FB\u4E8B\u4EF6\r\n                option.addEventListener('click', () => {\r\n                    if (!this.selectedTags.has(tag)) {\r\n                        this.addSelectedTag(tag, selectedTagsContainer);\r\n                        this.selectedTags.add(tag);\r\n                        this.refreshView();\r\n                    }\r\n                    dropdown.value = '';  // \u91CD\u7F6E\u4E0B\u5217\u8868\r\n                });\r\n            });\r\n\r\n        // \u521B\u5EFA\u53F3\u4FA7\u5DF2\u9009\u6807\u7B7E\u5BB9\u5668\r\n        const selectedTagsContainer = leftArea.createDiv('selected-tags-container');\r\n\r\n        // \u6539\u62C9\u5217\u8868\u793A/\u9690\u85CF\u903B\r\n        let isMouseOverDropdown = false;\r\n        let isMouseOverPanel = false;\r\n        let hideTimeout: NodeJS.Timeout;\r\n\r\n        // \u9F20\u6807\u8FDB\u5165\u4E0B\u62C9\u6846\u65F6\u663E\u9762\u677F\r\n        dropdown.addEventListener('mouseenter', () => {\r\n            isMouseOverDropdown = true;\r\n            clearTimeout(hideTimeout);\r\n            dropdownPanel.style.display = 'grid';\r\n        });\r\n\r\n        // \u9F20\u6807\u79BB\u5F00\u4E0B\u62C9\u6846\u65F6\r\n        dropdown.addEventListener('mouseleave', () => {\r\n            isMouseOverDropdown = false;\r\n            // \u5982\u679C\u9F20\u6807\u4E0D\u5728\u9762\u677F\u4E0A\uFF0C\u5EF6\u8FDF\u9690\r\n            if (!isMouseOverPanel) {\r\n                hideTimeout = setTimeout(() => {\r\n                    if (!isMouseOverDropdown && !isMouseOverPanel) {\r\n                        dropdownPanel.style.display = 'none';\r\n                    }\r\n                }, 200);\r\n            }\r\n        });\r\n\r\n        // \u76D1\u542C\u9F20\u6807\u8FDB\u5165\u9762\u677F\r\n        dropdownPanel.addEventListener('mouseenter', () => {\r\n            isMouseOverPanel = true;\r\n            clearTimeout(hideTimeout);\r\n        });\r\n\r\n        // \u76D1\u542C\u9F20\u6807\u79BB\u5F00\u9762\u677F\r\n        dropdownPanel.addEventListener('mouseleave', () => {\r\n            isMouseOverPanel = false;\r\n            // \u5982\u9F20\u6807\u4E0D\u5728\u4E0B\u62C9\u6846\u4E0A\uFF0C\u5219\u5EF6\u8FDF\u9690\u85CF\r\n            if (!isMouseOverDropdown) {\r\n                hideTimeout = setTimeout(() => {\r\n                    if (!isMouseOverDropdown && !isMouseOverPanel) {\r\n                        dropdownPanel.style.display = 'none';\r\n                    }\r\n                }, 200);\r\n            }\r\n        });\r\n\r\n        // \u70B9\u51FB\u5176\u4ED6\u65B9\u65F6\uFF0C\u68C0\u67E5\u9F20\u6807\u662F\u5426\u5728\u9762\u677F\u6216\u4E0B\u62C9\u4E0A\r\n        document.addEventListener('click', (e) => {\r\n            if (!dropdownContainer.contains(e.target as Node)) {\r\n                dropdownPanel.style.display = 'none';\r\n            }\r\n        });\r\n\r\n        // \u663E\u793A\u5DF2\u9009\u6807\u7B7E\r\n        this.selectedTags.forEach(tag => {\r\n            this.addSelectedTag(tag, selectedTagsContainer);\r\n        });\r\n\r\n        // \u521B\u5EFA\u53F3\u4FA7\u533A\u57DF\r\n        const rightArea = this.tagContainer.createDiv('filter-toolbar-right');\r\n        \r\n        // \u521B\u5EFA\u5361\u7247\u8BBE\u7F6E\u6309\u94AE\r\n        const cardSettings = rightArea.createDiv('card-settings-container');\r\n        cardSettings.setAttribute('data-views', 'card,list,timeline');\r\n\r\n        this.createCardSettings(cardSettings);\r\n\r\n        // \u66F4\u65B0\u89C6\u56FE\u5207\u4E8B\u4EF6\r\n        this.registerEvent(\r\n            this.app.workspace.on('layout-change', () => {\r\n                // \u83B7\u53D6\u6240\u6709\u5E26\u6709 data-views \u5C5E\u6027\u7684\u5143\u7D20\r\n                const elements = this.tagContainer.querySelectorAll('[data-views]');\r\n                \r\n                elements.forEach(el => {\r\n                    if (el instanceof HTMLElement) {\r\n                        const allowedViews = el.dataset.views?.split(',') || [];\r\n                        el.style.display = allowedViews.includes(this.currentView) ? 'flex' : 'none';\r\n                    }\r\n                });\r\n            })\r\n        );\r\n    }\r\n\r\n    // \u6DFB\u52A0\u5DF2\u9009\u6807\u7B7E\r\n    private addSelectedTag(tag: string, container: HTMLElement) { \r\n        const tagEl = container.createDiv('selected-tag');\r\n        \r\n        // \u6807\u7B7E\u6587\u672C\r\n        tagEl.createSpan({\r\n            text: tag,\r\n            cls: 'tag-text'\r\n        });\r\n        \r\n        // \u5220\u9664\u6309\u94AE\r\n        const removeBtn = tagEl.createSpan({\r\n            text: '\u00D7',\r\n            cls: 'remove-tag'\r\n        });\r\n        \r\n        removeBtn.addEventListener('click', () => {\r\n            this.selectedTags.delete(tag);\r\n            tagEl.remove();\r\n            this.refreshView();\r\n        });\r\n    }\r\n\r\n    // \u521B\u5EFA\u89C6\u56FE\u5207\u6362\u6309\u94AE\r\n    private createViewSwitcher(container: HTMLElement) {\r\n        const views = [\r\n            { \r\n                id: 'home', \r\n                icon: 'home', \r\n                text: '\u4E3B\u9875\u89C6\u56FE',\r\n                svg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\"></path><polyline points=\"9 22 9 12 15 12 15 22\"></polyline></svg>'\r\n            },\r\n            { \r\n                id: 'card', \r\n                icon: 'grid', \r\n                text: '\u5361\u7247\u89C6\u56FE',\r\n                svg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect x=\"3\" y=\"3\" width=\"7\" height=\"7\"></rect><rect x=\"14\" y=\"3\" width=\"7\" height=\"7\"></rect><rect x=\"14\" y=\"14\" width=\"7\" height=\"7\"></rect><rect x=\"3\" y=\"14\" width=\"7\" height=\"7\"></rect></svg>'\r\n            },\r\n            { \r\n                id: 'list', \r\n                icon: 'list', \r\n                text: '\u5217\u8868\u89C6\u56FE',\r\n                svg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><line x1=\"8\" y1=\"6\" x2=\"21\" y2=\"6\"></line><line x1=\"8\" y1=\"12\" x2=\"21\" y2=\"12\"></line><line x1=\"8\" y1=\"18\" x2=\"21\" y2=\"18\"></line><line x1=\"3\" y1=\"6\" x2=\"3.01\" y2=\"6\"></line><line x1=\"3\" y1=\"12\" x2=\"3.01\" y2=\"12\"></line><line x1=\"3\" y1=\"18\" x2=\"3.01\" y2=\"18\"></line></svg>'\r\n            },\r\n            { \r\n                id: 'timeline', \r\n                icon: 'clock', \r\n                text: '\u65F6\u95F4\u8F74\u89C6\u56FE',\r\n                svg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><polyline points=\"12 6 12 12 16 14\"></polyline></svg>'\r\n            },\r\n            { \r\n                id: 'month', \r\n                icon: 'calendar', \r\n                text: '\u6708\u5386\u89C6\u56FE',\r\n                svg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"></line><line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"></line><line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"></line></svg>'\r\n            },\r\n            { \r\n                id: 'week', \r\n                icon: 'calendar', \r\n                text: '\u5468\u89C6\u56FE',\r\n                svg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"></line><line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"></line><line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"></line></svg>'\r\n            }\r\n        ];\r\n        \r\n        views.forEach(view => {\r\n            const btn = container.createEl('button', {\r\n                cls: `view-switch-btn ${view.id === this.currentView ? 'active' : ''}`,\r\n            });\r\n            \r\n            // \u521B\u5EFA\u56FE\u6807\r\n            const iconSpan = btn.createSpan({ cls: 'view-switch-icon' });\r\n            iconSpan.innerHTML = view.svg;\r\n            \r\n            // \u6DFB\u52A0\u6587\u5B57\r\n            btn.createSpan({ text: view.text, cls: 'view-switch-text' });\r\n            \r\n            btn.addEventListener('click', () => {\r\n                container.querySelectorAll('.view-switch-btn').forEach(b => b.removeClass('active'));\r\n                btn.addClass('active');\r\n                this.switchView(view.id as 'home' | 'card' | 'list' | 'timeline' | 'month' | 'week');\r\n            });\r\n        });\r\n    }\r\n\r\n    // \u5207\u6362\u89C6\u56FE\r\n    public switchView(view: 'home' | 'card' | 'list' | 'timeline' | 'month' | 'week') {\r\n        // \u5982\u679C\u5F53\u524D\u6B63\u5728\u52A0\u8F7D\u7684\u89C6\u56FE\u4E0E\u8981\u5207\u6362\u7684\u89C6\u56FE\u76F8\u540C\uFF0C\u76F4\u63A5\u8FD4\u56DE\r\n        if (this.currentLoadingView === view) {\r\n            return;\r\n        }\r\n\r\n        // \u5982\u679C\u6709\u5176\u4ED6\u89C6\u56FE\u6B63\u5728\u52A0\u8F7D\uFF0C\u4E2D\u5B83\r\n        if (this.currentLoadingView) {\r\n            console.log(`\u4E2D\u65AD ${this.currentLoadingView} \u89C6\u56FE\u7684\u52A0\u8F7D`);\r\n            this.isLoading = false;\r\n            this.timelineIsLoading = false;\r\n            this.hasMoreNotes = false;\r\n            this.timelineHasMore = false;\r\n        }\r\n\r\n        // \u8BBE\u7F6E\u7684\u5F53\u524D\u89C6\u56FE\u548C\u52A0\u8F7D\u72B6\u6001\r\n        this.currentView = view;\r\n        this.currentLoadingView = view;\r\n        \r\n        // \u6E05\u7A7A\u5BB9\u5668\u5E76\u8BBE\u7F6E\u65B0\u7684\u89C6\u56FE\u5C5E\u6027\r\n        this.container.empty();\r\n        this.container.setAttribute('data-view', view);\r\n        \r\n        // \u66F4\u65B0 content-section \u7684\u7C7B\u540D\r\n        const contentSection = this.containerEl.querySelector('.content-section');\r\n        if (contentSection) {\r\n            contentSection.removeClass('view-home', 'view-card', 'view-list', 'view-timeline', 'view-month', 'view-week');\r\n            contentSection.addClass(`view-${view}`);\r\n        }\r\n\r\n        // \u6839\u636E\u89C6\u56FE\u7C7B\u578B\u52A0\u76F8\u5185\u5BB9\r\n        let statusMessage = '';\r\n        try {\r\n            switch (view) {\r\n                case 'home':\r\n                    statusMessage = '\u5207\u6362\u5230\u4E3B\u9875\u89C6\u56FE';\r\n                    this.createHomeView();\r\n                    break;\r\n                case 'card':\r\n                    statusMessage = '\u5207\u6362\u5230\u5361\u7247\u89C6\u56FE';\r\n                    this.loadNotes();\r\n                    break;\r\n                case 'list':\r\n                    statusMessage = '\u5207\u6362\u5230\u5217\u8868\u89C6\u56FE - \u6309\u6587\u5939\u5206\u7EC4';\r\n                    this.createListView();\r\n                    break;\r\n                case 'timeline':\r\n                    statusMessage = '\u5207\u6362\u65F6\u95F4\u8F74\u89C6\u56FE - \u6309\u65E5\u671F\u5206\u7EC4';\r\n                    this.createTimelineView();\r\n                    break;\r\n                case 'month':\r\n                    statusMessage = '\u5207\u6362\u5230\u6708\u5386\u89C6\u56FE';\r\n                    this.createMonthView();\r\n                    break;\r\n                case 'week':\r\n                    statusMessage = '\u5207\u6362\u5230\u5468\u89C6\u56FE';\r\n                    this.createWeekView();\r\n                    break;\r\n            }\r\n            this.updateLoadingStatus(statusMessage);\r\n        } catch (error) {\r\n            console.error(`\u5207\u6362\u5230${view}\u89C6\u56FE\u65F6\u51FA\u9519:`, error);\r\n            this.currentLoadingView = null;\r\n        }\r\n\r\n        // \u66F4\u65B0\u6309\u94AE\u7EC4\u663E\u72B6\u6001\r\n        this.updateToolbarButtons();\r\n    }\r\n\r\n    // \u6DFB\u52A0\u65B0\u65B9\u6CD5\u6765\u66F4\u65B0\u6309\u94AE\u663E\u793A\u72B6\u6001\r\n    private updateToolbarButtons() {\r\n        console.log('Current view:', this.currentView);\r\n        \r\n        const elements = this.tagContainer.querySelectorAll('[data-views]');\r\n        elements.forEach(el => {\r\n            if (el instanceof HTMLElement) {\r\n                const allowedViews = el.dataset.views?.split(',') || [];\r\n                const shouldShow = allowedViews.includes(this.currentView);\r\n                console.log('Element:', el, 'Allowed views:', allowedViews, 'Should show:', shouldShow);\r\n                el.style.display = shouldShow ? '' : 'none';\r\n            }\r\n        });\r\n    }\r\n\r\n    // \u52A0\u8F7D\u7B14\u8BB0\r\n    private async loadNotes() {\r\n        try {\r\n            console.log('\u5F00\u59CB\u52A0\u8F7D\u7B14\u8BB0...');\r\n            // \u91CD\u7F6E\u5206\u72B6\u6001\r\n            this.currentPage = 1;\r\n            this.hasMoreNotes = true;\r\n            this.container.empty();\r\n            \r\n            // \u786E\u4FDD\u52A0\u8F7D\u6307\u793A\u5668\u88AB\u6DFB\u52A0\u5230\u5BB9\u5668\u4E2D\r\n            if (!this.container.contains(this.loadingIndicator)) {\r\n                this.container.appendChild(this.loadingIndicator);\r\n            }\r\n            \r\n            this.loadingIndicator.innerHTML = `\r\n                <div class=\"loading-spinner\"></div>\r\n                <div class=\"loading-text\">\u52A0\u8F7D\u4E2D...</div>\r\n            `;\r\n            this.loadingIndicator.style.display = 'flex';\r\n            \r\n            // \u52A0\u8F7D\u7B2C\u4E00\u9875\r\n            await this.loadNextPage();\r\n            \r\n            // \u6DFB\u52A0\u6EDA\u52A8\u76D1\u542C\r\n            this.setupInfiniteScroll();\r\n            \r\n            console.log('\u7B14\u8BB0\u52A0\u5B8C\u6210');\r\n        } catch (error) {\r\n            console.error('loadNotes \u9519\u8BEF:', error);\r\n            new Notice('\u52A0\u8F7D\u7B14\u8BB0\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u63A7\u5236\u53F0\u83B7\u53D6\u8BE6\u7EC6\u4FE1\u606F');\r\n        } finally {\r\n            if (this.currentLoadingView === 'card') {\r\n                this.currentLoadingView = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    // \u52A0\u8F7D\u4E0B\u4E00\u9875\r\n    private async loadNextPage() {\r\n        // \u6DFB\u52A0\u89C6\u56FE\u68C0\u67E5\r\n        if (this.currentView !== 'card') {\r\n            console.log('\u4E2D\u65AD\u5361\u7247\u52A0\u8F7D\uFF1A\u89C6\u56FE\u5DF2\u5207\u6362');\r\n            return;\r\n        }\r\n\r\n        if (this.isLoading || !this.hasMoreNotes) {\r\n            return;\r\n        }\r\n        \r\n        try {\r\n            this.isLoading = true;\r\n            this.updateLoadingStatus('\u52A0\u8F7D\u4E2D...');\r\n            \r\n            const files = this.app.vault.getMarkdownFiles();\r\n            const filteredFiles = await this.filterFiles(files);\r\n            \r\n            const start = (this.currentPage - 1) * this.pageSize;\r\n            const end = start + this.pageSize;\r\n            const pageFiles = filteredFiles.slice(start, end);\r\n            \r\n            this.hasMoreNotes = end < filteredFiles.length;\r\n            \r\n            // \u66F4\u65B0\u6001\u680F\u4FE1\u606F\r\n            this.updateLoadingStatus(`\u6B63\u5728\u52A0\u8F7D\u7B2C ${this.currentPage} \u9875 (${start + 1}-${end} / ${filteredFiles.length})`);\r\n\r\n            // \u521B\u5EFA\u5361\u7247\r\n            const cards = await Promise.all(\r\n                pageFiles.map(async (file) => {\r\n                    try {\r\n                        return await this.createNoteCard(file);\r\n                    } catch (error) {\r\n                        console.error('\u521B\u5EFA\u5361\u7247\u5931:', file.path, error);\r\n                        return null;\r\n                    }\r\n                })\r\n            );\r\n            \r\n            // \u6DFB\u52A0\u5361\u7247\u5230\u5BB9\u5668\r\n            cards.forEach(card => {\r\n                if (card instanceof HTMLElement) {\r\n                    // card.style.width = `${this.cardSize}px`;\r\n                    if (this.loadingIndicator.parentNode === this.container) {\r\n                        this.container.insertBefore(card, this.loadingIndicator);\r\n                    } else {\r\n                        this.container.appendChild(card);\r\n                    }\r\n                }\r\n            });\r\n\r\n            // \u786E\u4FDD\u52A0\u8F7D\u6307\u793A\u59CB\u7EC8\u5728\u5E95\u90E8\r\n            if (this.hasMoreNotes) {\r\n                this.container.appendChild(this.loadingIndicator);\r\n                // \u8BBE\u7F6E\u52A0\u8F7D\u793A\u5668\u7684\u6700\u5C0F\u9AD8\u5EA6\uFF0C\u786E\u4FDD\u53EF\u4EE5\u89E6\u53D1\u6EDA\u52A8\r\n                this.loadingIndicator.style.minHeight = '100px';\r\n            }\r\n            \r\n            this.currentPage++;\r\n            \r\n        } catch (error) {\r\n            console.error('loadNextPage \u9519\u8BEF:', error);\r\n            this.updateLoadingStatus('\u52A0\u5931\u8D25');\r\n            new Notice('\u52A0\u8F7D\u7B14\u8BB0\u5931\u8D25');\r\n        } finally {\r\n            this.isLoading = false;\r\n            if (!this.hasMoreNotes) {\r\n                this.updateLoadingStatus('\u52A0\u8F7D\u6210');\r\n                this.loadingIndicator.style.display = 'none';\r\n            } else {\r\n                this.loadingIndicator.style.display = 'flex';\r\n            }\r\n        }\r\n    }\r\n\r\n    // \u8FC7\u6EE4\u6587\u4EF6\r\n    private async filterFiles(files: TFile[]): Promise<TFile[]> {\r\n        const searchTerm = this.currentSearchTerm?.trim().toLowerCase();\r\n        \r\n        const filteredFiles = await Promise.all(files.map(async file => {\r\n            const matchesSearch = !searchTerm || \r\n                file.basename.toLowerCase().includes(searchTerm) ||\r\n                await this.fileContentContainsSearch(file);\r\n\r\n            // \u6807\u7B7E\u8FC7\u6EE4\r\n            let matchesTags = true;\r\n            if (this.selectedTags.size > 0) {\r\n                const cache = this.app.metadataCache.getFileCache(file);\r\n                matchesTags = cache?.tags?.some(t => this.selectedTags.has(t.tag)) ?? false;\r\n            }\r\n\r\n            // \u65E5\u671F\u6EE4\r\n            let matchesDate = true;\r\n            if (this.currentFilter.type === 'date') {\r\n                const fileDate = new Date(file.stat.mtime);\r\n                const fileDateStr = fileDate.toISOString().split('T')[0];\r\n                \r\n                if (this.currentFilter.value?.length === 7) {\r\n                    matchesDate = fileDateStr.startsWith(this.currentFilter.value);\r\n                } else {\r\n                    matchesDate = fileDateStr === this.currentFilter.value;\r\n                }\r\n            }\r\n\r\n            return matchesSearch && matchesTags && matchesDate ? file : null;\r\n        }));\r\n\r\n        return filteredFiles.filter((file): file is TFile => file !== null);\r\n    }\r\n\r\n    // \u8BBE\u7F6E\u65E0\u9650\u6EDA\u52A8\r\n    private setupInfiniteScroll() {\r\n        try {\r\n            console.log('\u8BBE\u7F6E\u65E0\u9650\u6EDA\u52A8...');\r\n            \r\n            const observer = new IntersectionObserver(\r\n                (entries) => {\r\n                    entries.forEach(entry => {\r\n                        if (entry.isIntersecting && \r\n                            !this.isLoading && \r\n                            this.hasMoreNotes && \r\n                            this.currentView === 'card') {\r\n                            this.loadNextPage();\r\n                        }\r\n                    });\r\n                },\r\n                {\r\n                    root: this.container,\r\n                    rootMargin: '200px',\r\n                    threshold: 0.1\r\n                }\r\n            );\r\n            \r\n            observer.observe(this.loadingIndicator);\r\n            \r\n            this.container.addEventListener('scroll', () => {\r\n                const { scrollTop, scrollHeight, clientHeight } = this.container;\r\n                const scrollPercentage = Math.round((scrollTop / (scrollHeight - clientHeight)) * 100);\r\n                \r\n                if (!isNaN(scrollPercentage)) {\r\n                    const scrollStatus = this.statusRight.querySelector('.scroll-status') || createDiv('status-item scroll-status');\r\n                    scrollStatus.innerHTML = `\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"18 15 12 9 6 15\"></polyline></svg>\r\n                        <span>${scrollPercentage}%</span>\r\n                    `;\r\n                    if (!this.statusRight.contains(scrollStatus)) {\r\n                        this.statusRight.appendChild(scrollStatus);\r\n                    }\r\n                }\r\n                \r\n                if (this.scrollTimeout) {\r\n                    clearTimeout(this.scrollTimeout);\r\n                }\r\n                \r\n                this.scrollTimeout = setTimeout(() => {\r\n                    const triggerThreshold = 300;\r\n                    if (scrollHeight - scrollTop - clientHeight < triggerThreshold && \r\n                        !this.isLoading && \r\n                        this.hasMoreNotes && \r\n                        this.currentView === 'card') {\r\n                        this.loadNextPage();\r\n                    }\r\n                }, 100);\r\n            });\r\n            \r\n        } catch (error) {\r\n            console.error('setupInfiniteScroll \u9519\u8BEF:', error);\r\n        }\r\n    }\r\n\r\n    // \u521B\u5EFA\u7B14\u8BB0\u5361\u7247\r\n    private async createNoteCard(file: TFile): Promise<HTMLElement> {\r\n        try {\r\n            const card = document.createElement('div');\r\n            card.addClass('note-card');\r\n            card.setAttribute('data-path', file.path);\r\n            \r\n            // \u8BBE\u7F6E\u5361\u7247\u5BBD\u5EA6\u548C\u9AD8\u5EA6\r\n            // card.style.width = `${this.cardSize}px`;\r\n            // card.style.height = `${this.cardHeight}px`;\r\n            \r\n            // \u521B\u5EFA\u5361\u7247\u5934\r\n            const header = card.createDiv('note-card-header');\r\n            // \u6DFB\u52A0\u4FEE\u6539\u65E5\u671F\r\n            if (this.cardSettings[this.currentView as keyof typeof this.cardSettings].showDate) {\r\n                const lastModified = header.createDiv('note-date show');\r\n                lastModified.setText(new Date(file.stat.mtime).toLocaleDateString());\r\n            }\r\n\r\n            // \u521B\u5EFA\u6587\u4EF6\u5939\u8DEF\u5F84\r\n            const folderPath = header.createDiv('note-folder');\r\n            const folder = file.parent ? file.parent.path : '\u6839\u76EE\u5F55';\r\n            const pathParts = folder === '\u76EE' ? ['\u6839\u76EE\u5F55'] : folder.split('/');\r\n\r\n            pathParts.forEach((part, index) => {\r\n                if (index > 0) {\r\n                    // \u53EA\u6709\u5728\u975E\u6839\u76EE\u5F55\u4E14\u4E0D\u662F\u7B2C\u4E00\u4E2A\u90E8\u5206\u65F6\u6DFB\u52A0\u5206\u9694\u7B26\r\n                    folderPath.createSpan({ text: ' / ', cls: 'folder-separator' });\r\n                }\r\n                \r\n                // \u521B\u5EFA\u53EF\u70B9\u51FB\u7684\u6587\u4EF6\u5939\u90E8\u5206\r\n                const folderPart = folderPath.createSpan({\r\n                    text: part,\r\n                    cls: 'folder-part clickable'\r\n                });\r\n                \r\n                // \u83B7\u53D6\u5230\u8FD9\u5C42\u7684\u5B8C\u6574\u8DEF\u5F84\uFF08\u5BF9\u6839\u76EE\u5F55\u505A\u7279\u6B8A\u5904\u7406\uFF09\r\n                const currentPath = folder === '\u6839\u76EE\u5F55' ? '' : pathParts.slice(0, index + 1).join('/');\r\n                \r\n                // \u6DFB\u52A0\u4E0B\u5212\u7EBF\r\n                const underline = folderPart.createSpan({ cls: 'folder-underline' });\r\n                \r\n                // \u6DFB\u52A0\u60AC\u505C\u6548\r\n                folderPart.addEventListener('mouseenter', () => {\r\n                    underline.addClass('active');\r\n                });\r\n                \r\n                folderPart.addEventListener('mouseleave', () => {\r\n                    underline.removeClass('active');\r\n                });\r\n                \r\n                // \u6DFB\u52A0\u70B9\u51FB\u4E8B\u4EF6\r\n                folderPart.addEventListener('click', async (e) => {\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                    \r\n                    // \u83B7\u53D6\u6587\u4EF6\u6D4F\u89C8\u5668\u89C6\u56FE\r\n                    const fileExplorer = this.app.workspace.getLeavesOfType('file-explorer')[0];\r\n                    if (fileExplorer && fileExplorer.view) {\r\n                        this.app.workspace.revealLeaf(fileExplorer);\r\n                        // \u83B7\u53D6\u5BF9\u5E94\u5C42\u7EA7\u7684\u6587\u4EF6\u5939\r\n                        const targetFolder = currentPath ? this.app.vault.getAbstractFileByPath(currentPath) : this.app.vault.getRoot();\r\n                        if (targetFolder && (targetFolder instanceof TFolder || !currentPath)) {\r\n                            // \u5728\u6587\u4EF6\u6D4F\u89C8\u5668\u4E2D\u5B9A\u4F4D\u5230\u8BE5\u6587\u4EF6\u5939\r\n                            await (fileExplorer.view as any).revealInFolder(targetFolder);\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n\r\n            // \u6DFB\u52A0\u6253\u5F00\u6309\u94AE\r\n            const openButton = header.createDiv('note-open-button');\r\n            openButton.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"></path><polyline points=\"15 3 21 3 21 9\"></polyline><line x1=\"10\" y1=\"14\" x2=\"21\" y2=\"3\"></line></svg>`;\r\n            openButton.setAttribute('title', '\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u5F00');\r\n            openButton.style.opacity = '0';  // \u9ED8\u8BA4\u9690\u85CF\r\n\r\n            // \u521B\u5361\u5185\u5BB9\u5668\r\n            const cardContent = card.createDiv('note-card-content');\r\n\r\n            // \u5904\u7406\u6807\u9898\r\n            const title = cardContent.createDiv('note-title');\r\n            let displayTitle = file.basename;\r\n            const timePattern = /^\\d{4}[-./]\\d{2}[-./]\\d{2}/;\r\n            if (timePattern.test(displayTitle)) {\r\n                displayTitle = displayTitle.replace(timePattern, '').trim();\r\n            }\r\n            \r\n            if (this.currentSearchTerm) {\r\n                title.innerHTML = this.highlightText(displayTitle, this.currentSearchTerm);\r\n            } else {\r\n                title.setText(displayTitle);\r\n            }\r\n\r\n            try {\r\n                // \u521B\u5EFA\u7B14\u5185\u5BB9\u5BB9\u5668\r\n                const noteContent = cardContent.createDiv('note-content');\r\n                if (this.cardSettings[this.currentView as keyof typeof this.cardSettings].showContent) {\r\n                    noteContent.addClass('show');\r\n                }\r\n                noteContent.setAttribute('data-path', file.path);\r\n\r\n                // \u6DFB\u52A0\u52A0\u8F7D\u5360\u4F4D\u7B26\r\n                const loadingPlaceholder = noteContent.createDiv('content-placeholder');\r\n                loadingPlaceholder.setText('Loading...');\r\n\r\n                // \u4F7F\u7528 Intersection Observer \u76D1\u542C\u5361\u7247\u53EF\u89C1\u6027\r\n                this.observeNoteContent(noteContent, file);\r\n\r\n                // \u9F20\u6807\u60AC\u505C\u4E8B\u4EF6\r\n                card.addEventListener('mouseenter', async () => {\r\n                    openButton.style.opacity = '1';\r\n                    // \u6839\u636E\u8BBE\u7F6E\u51B3\u5B9A\u662F\u5426\u663E\u793A/\u9690\u85CF\u5185\u5BB9\r\n                    if (!this.cardSettings.card.showContent) {\r\n                        const noteContent = cardContent.querySelector('.note-content');\r\n                        if (noteContent) {\r\n                            noteContent.addClass('hover-show');\r\n                            // \u786E\u4FDD\u5BB9\u5DF2\u52A0\u8F7D\r\n                            if (!this.loadedNotes.has(file.path)) {\r\n                                await this.loadNoteContent(noteContent as HTMLElement, file);\r\n                            }\r\n                        }\r\n                    }\r\n                    \r\n                    // \u5728\u9884\u89C8\u680F\u4E2D\u663E\u793A\u5B8C\u6574\u5185\u5BB9\r\n                    try {\r\n                        this.previewContainer.empty();\r\n                        const content = await this.app.vault.read(file);\r\n                        await MarkdownRenderer.render(\r\n                            this.app,\r\n                            content,\r\n                            this.previewContainer,\r\n                            file.path,\r\n                            this\r\n                        );\r\n                    } catch (error) {\r\n                        console.error('\u9884\u89C8\u52A0\u8F7D\u5931\u8D25:', error);\r\n                    }\r\n                });\r\n\r\n                // \u6807\u79BB\u4EF6\r\n                card.addEventListener('mouseleave', () => {\r\n                    openButton.style.opacity = '0';\r\n                    // \u6839\u636E\u8BBE\u7F6E\u51B3\u662F\u5426\u9690\u85CF\u5185\u5BB9\r\n                    if (!this.cardSettings.card.showContent) {\r\n                        const noteContent = cardContent.querySelector('.note-content');\r\n                        if (noteContent) {\r\n                            noteContent.removeClass('hover-show');\r\n                        }\r\n                    }\r\n                });\r\n\r\n                // \u6539\u4E8B\u4EF6\u76D1\u542C\r\n                openButton.addEventListener('click', async (e) => {\r\n                    e.stopPropagation();\r\n                    await openInAppropriateLeaf(this.app,file);\r\n                    card.addClass('selected'); // \u7ED9\u8BE5\u5361\u7247\u6DFB\u52A0selected\u7C7B\r\n                    // \u79FB\u9664\u5176\u4F59\u5361\u7247\u7684selected\u7C7B\r\n                    this.container.querySelectorAll('.note-card').forEach(cardElement => {\r\n                        if (cardElement !== card) {\r\n                            cardElement.removeClass('selected');\r\n                        }\r\n                    });\r\n                });\r\n            } catch (error) {\r\n                console.error('\u7B14\u8BB0\u52A0\u8F7D\u5931\u8D25:', error);\r\n                throw error; // \u91CD\u65B0\u629B\u51FA\u9519\u8BEF\u4EE5\u4FBF\u4E0A\u5C42\u5904\u7406\r\n            }\r\n\r\n            // \u52A0\u5361\u7247\u60AC\u505C\u4EF6\r\n            card.addEventListener('mouseenter', async () => {\r\n                openButton.style.opacity = '1';  // \u793A\u6253\u5F00\u6309\u94AE\r\n                // ... \u5176\u4ED6\u60AC\u505C\u4E8B ...\r\n            });\r\n\r\n            card.addEventListener('mouseleave', () => {\r\n                openButton.style.opacity = '0';  // \u9690\u85CF\u6253\u5F00\u6309\u94AE\r\n                // ... \u5176\u4ED6\u79BB\u4E8B\u4EF6\u4EE3 ...\r\n            });\r\n            // \u4FEE\u6539\u5185\u5BB9\u663E\u793A\u903B\u8F91\r\n            if (this.cardSettings.card.showContent) {\r\n                // \u521B\u5EFA\u7B14\u8BB0\u5185\u5BB9\r\n                const noteContent = cardContent.createDiv('note-content');\r\n                // ... \u5185\u5BB9\u52A0\u8F7D\u903B\u8F91 ...\r\n            }\r\n\r\n            // \u6DFB\u52A0\u952E\u83DC\u5355\u4E8B\u4EF6\u542C\r\n            card.addEventListener('contextmenu', (e) => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                this.showContextMenu(e, [file]); // \u4F20\u5165\u5F53\u524D\u6587\u4EF6\r\n            });\r\n\r\n            // \u6DFB\u52A0\u70B9\u51FB\u4E8B\u4EF6\u4E8E\u591A\u9009\r\n            card.addEventListener('click', (e) => {\r\n                this.handleCardSelection(file.path, e);\r\n            });\r\n\r\n            return card;\r\n\r\n        } catch (error) {\r\n            console.error('\u7B14\u8BB0\u52A0\u8F7D\u5931\u8D25:', error);\r\n            throw error; // \u91CD\u65B0\u629B\u51FA\u9519\u8BEF\u4EE5\u4FBF\u4E0A\u5C42\u5904\u7406\r\n        }\r\n    }\r\n\r\n    // \u9884\u89C8\u680F-\u5207\u6362\r\n    private togglePreview() {\r\n        this.isPreviewCollapsed = !this.isPreviewCollapsed;\r\n        const previewWrapper = this.containerEl.querySelector('.preview-wrapper');\r\n        \r\n        if (this.isPreviewCollapsed) {\r\n            this.previewContainer.addClass('collapsed');\r\n            previewWrapper?.addClass('collapsed');\r\n            if (previewWrapper instanceof HTMLElement) {\r\n                previewWrapper.style.width = '0px';  // \u76F4\u63A5\u8BBE\u5BBD\u5EA6\u4E3A0\r\n            }\r\n            // \u8C03\u6574\u5185\u5BB9\u533A\u57DF\u5BBD\u5EA6\r\n            const contentSection = this.containerEl.querySelector('.content-section');\r\n            if (contentSection instanceof HTMLElement) {\r\n                contentSection.style.width = '100%';\r\n            }\r\n        } else {\r\n            this.previewContainer.removeClass('collapsed');\r\n            previewWrapper?.removeClass('collapsed');\r\n            // \u6062\u590D\u9884\u89C8\u680F\u5BBD\u5EA6\r\n            const width = '300px';  // \u9ED8\u8BA4\u5EA6\r\n            if (previewWrapper instanceof HTMLElement) {\r\n                previewWrapper.style.width = width;\r\n            }\r\n            this.previewContainer.style.width = width;\r\n            // \u8C03\u6574\u5185\u57DF\r\n            // this.adjustContentWidth();\r\n        }\r\n\r\n        // \u66F4\u65B0\u6298\u53E0\u6309\u56FE\u6807\u65B9\u5411\r\n        const toggleButton = this.containerEl.querySelector('.preview-toggle svg');\r\n        if (toggleButton instanceof SVGElement) {  // \u4FEE\u6539\u578B\u68C0\r\n            toggleButton.style.transform = this.isPreviewCollapsed ? '' : 'rotate(180deg)';\r\n        }\r\n    }\r\n\r\n    // \u9884\u89C8\u680F-\u8C03\u6574\u5927\u5C0F\r\n    private setupResizer() {\r\n        let startX: number;\r\n        let startWidth: number;\r\n\r\n        const startResize = (e: MouseEvent) => {\r\n            e.preventDefault();\r\n            startX = e.pageX;\r\n            startWidth = this.previewContainer.offsetWidth;\r\n            document.addEventListener('mousemove', resize);\r\n            document.addEventListener('mouseup', stopResize);\r\n            document.body.style.cursor = 'col-resize';\r\n            this.previewResizer.addClass('resizing');\r\n        };\r\n\r\n        const resize = (e: MouseEvent) => {\r\n            if (!startWidth) return;\r\n            const width = startWidth - (e.pageX - startX);\r\n            if (width >= 50 && width <= 800) {\r\n                this.previewContainer.style.width = `${width}px`;\r\n                const previewWrapper = this.containerEl.querySelector('.preview-wrapper');\r\n                if (previewWrapper instanceof HTMLElement) {\r\n                    previewWrapper.style.width = `${width}px`;\r\n                }\r\n                this.adjustContentWidth();\r\n                \r\n                // \u5982\u679C\u6B63\u5728\u8C03\u6574\u5927\u5C0F\uFF0C\u786E\u4FDD\u9884\u680F\u662F\u5C55\u5F00\u7684\r\n                if (this.isPreviewCollapsed) {\r\n                    this.isPreviewCollapsed = false;\r\n                    this.previewContainer.removeClass('collapsed');\r\n                    const previewWrapper = this.containerEl.querySelector('.preview-wrapper');\r\n                    previewWrapper?.removeClass('collapsed');\r\n                }\r\n            }\r\n        };\r\n\r\n        const stopResize = () => {\r\n            document.removeEventListener('mousemove', resize);\r\n            document.removeEventListener('mouseup', stopResize);\r\n            document.body.style.cursor = '';\r\n            this.previewResizer.removeClass('resizing');\r\n        };\r\n\r\n        this.previewResizer.addEventListener('mousedown', startResize);\r\n    }\r\n\r\n    // \u8C03\u6574\u5185\u5BB9\u5BBD\u5EA6\r\n    private adjustContentWidth() {\r\n        const mainLayout = this.containerEl.querySelector('.main-layout');\r\n        const previewWidth = this.previewContainer.offsetWidth;\r\n        const contentSection = this.containerEl.querySelector('.content-section');\r\n        \r\n        if (mainLayout instanceof HTMLElement && contentSection instanceof HTMLElement) {\r\n            const totalWidth = mainLayout.offsetWidth;\r\n            const newContentWidth = totalWidth - previewWidth - 4; // 4px \u662F\u5206\u9694\u5BBD\u5EA6\r\n            contentSection.style.width = `${newContentWidth}px`;\r\n            \r\n            // \u91CD\u65B0\u8BA1\u7B97\u5361\u7247\u5217\u6570\r\n            const availableWidth = newContentWidth - 32; // \u51CF\u53BB\u5185\u8FB9\u8DDD\r\n            const columns = Math.floor(availableWidth / this.cardSize);\r\n            const gap = 16; // \u7247\u95F4\u8DDD\r\n            const actualCardWidth = (availableWidth - (columns - 1) * gap) / columns;\r\n            \r\n            this.container.style.gridTemplateColumns = `repeat(${columns}, ${actualCardWidth}px)`;\r\n        }\r\n    }\r\n\r\n    // \u7B14\u8BB0-\u521B\u5EFA\r\n    private async createNewNote(date?: Date) {\r\n            // \u83B7\u53D6\u5F53\u524D\u65E5\u671F\u4F5C\u4E3A\u9ED8\u8BA4\u6587\u4EF6\u540D\r\n        const baseFileName = date ? date.toLocaleDateString() : '\u672A\u547D';\r\n            let fileName = baseFileName;\r\n            let counter = 1;\r\n\r\n            // \u68C0\u67E5\u6587\u4EF6\u540D\u662F\u5426\u5DF2\u5B58\u5728\r\n            while (this.app.vault.getAbstractFileByPath(`${fileName}.md`)) {\r\n            const file = this.app.vault.getAbstractFileByPath(`${fileName}.md`);\r\n            if (file instanceof TFile && file.stat.size === 0) {\r\n                // \u5982\u679C\u8BB0\u5185\u5BB9\u4E3A\u7A7A\uFF0C\u5219\u6253\u5F00\u8FD9\u4E2A\u7B14\r\n                await openInAppropriateLeaf(this.app,file,false);\r\n                return;\r\n            } else {\r\n                fileName = date ? `${baseFileName} ${counter}` : `\u672A\u547D\u540D ${counter}`;\r\n                counter++;\r\n            }\r\n        }\r\n\r\n        try {\r\n            // \u521B\u5EFA\u65B0\u7B14\u8BB0\r\n            const file = await this.app.vault.create(\r\n                `${fileName}.md`,\r\n                ''\r\n            );\r\n\r\n            // \u5728\u65B0\u7B7E\u4E2D\u6253\u5F00\u7B14\r\n            // const leaf = this.app.workspace.getLeaf('tab');\r\n            await openInAppropriateLeaf(this.app,file,false);\r\n\r\n            // \u5237\u65B0\u7247\u89C6\u56FE\r\n            this.loadNotes();\r\n        } catch (error) {\r\n            console.error('\u521B\u5EFA\u7B14\u8BB0\u5931\u8D25:', error);\r\n        }\r\n    }\r\n\r\n    // \u901F\u7B14\u8BB0-\u521B\u5EFA\r\n    private async createQuickNote(content: string, types: string[], fileName: string): Promise<TFile | null> {\r\n        try {\r\n            // \u751F\u6210\u552F\u4E00\u7684\u4EF6\r\n            let finalFileName = fileName;\r\n            let counter = 1;\r\n            \r\n            // \u68C0\u67E5\u6587\u4EF6\u662F\u5426\u5B58\u5728\uFF0C\u5982\u679C\u5B58\u5728\u5219\u6DFB\u52A0\u6570\u5B57\u540E\u7F00\r\n            while (this.app.vault.getAbstractFileByPath(`${finalFileName}.md`)) {\r\n                finalFileName = `${fileName} ${counter}`;\r\n                counter++;\r\n            }\r\n\r\n            // \u521B\u5EFA\u7B14\u8BB0\u6587\u4EF6\r\n            const file = await this.app.vault.create(\r\n                `${finalFileName}.md`,\r\n                content\r\n            );\r\n\r\n            if (file) {\r\n                return file;\r\n            }\r\n            \r\n            return null;\r\n        } catch (error) {\r\n            console.error('\u521B\u5EFA\u7B14\u8BB0\u5931\u8D25:', error);\r\n            new Notice('\u521B\u5EFA\u7B14\u8BB0\u5931\u8D25');\r\n            return null;\r\n        }\r\n    }\r\n\r\n    // \u65F6\u95F4\u8F74-\u52A0\u8F7D\r\n    private async loadTimelinePage(container: HTMLElement) {\r\n        if (this.currentLoadingView !== 'timeline') {\r\n            console.log('\u4E2D\u65AD\u65F6\u95F4\u8F74\u89C6\u56FE\u52A0\u8F7D\uFF1A\u89C6\u56FE\u5DF2\u5207\u6362');\r\n            return;\r\n        }\r\n\r\n        if (this.timelineIsLoading || !this.timelineHasMore) {\r\n            return;\r\n        }\r\n        \r\n        try {\r\n            this.timelineIsLoading = true;\r\n            this.updateLoadingStatus('\u52A0\u8F7D\u65F6\u95F4\u8F74...');\r\n            \r\n            // \u53D6\u6240\u6709\u6587\u4EF6\r\n            const files = this.app.vault.getMarkdownFiles();\r\n            const filteredFiles = await this.filterFiles(files);\r\n            \r\n            // \u6309\u65E5\u671F\u5206\u7EC4\u5E76\u6392\u5E8F\r\n            const notesByDate = new Map<string, TFile[]>();\r\n            filteredFiles.forEach(file => {\r\n                const date = new Date(file.stat.mtime).toLocaleDateString();\r\n                if (!notesByDate.has(date)) {\r\n                    notesByDate.set(date, []);\r\n                }\r\n                notesByDate.get(date)?.push(file);\r\n            });\r\n            \r\n            const sortedDates = Array.from(notesByDate.keys())\r\n                .sort((a, b) => new Date(b).getTime() - new Date(a).getTime());\r\n            \r\n            // \u8BA1\u7B97\u5206\u9875\r\n            const start = (this.timelineCurrentPage - 1) * this.timelinePageSize;\r\n            const end = start + this.timelinePageSize;\r\n            const pageDates = sortedDates.slice(start, end);\r\n            \r\n            // \u68C0\u67E5\u662F\u5426\u8FD8\u66F4\u591A\r\n            this.timelineHasMore = end < sortedDates.length;\r\n            \r\n            // \u66F4\u65B0\u72B6\u6001\u4FE1\u606F\r\n            this.updateLoadingStatus(`\u65F6\u95F4\u8F74\u89C6\u56FE - \u52A0\u8F7D\u7B2C ${this.timelineCurrentPage} \u9875 (${start + 1}-${end} / ${sortedDates.length} \u5929)`);\r\n\r\n            // \u4F7F\u7528\u865A\u62DF\u6EDA\u52A8\u6280\u672F\r\n            const fragment = document.createDocumentFragment();\r\n            const batchSize = 3; // \u6BCF\u6279\u5904\u7406\u7684\u65E5\u7EC4\u6570\r\n            const batches = Math.ceil(pageDates.length / batchSize);\r\n\r\n            for (let i = 0; i < batches; i++) {\r\n                await new Promise<void>(resolve => {\r\n                    window.requestAnimationFrame(async () => {\r\n                        const batchDates = pageDates.slice(i * batchSize, (i + 1) * batchSize);\r\n                        \r\n                        for (const date of batchDates) {\r\n                            const dateGroup = document.createElement('div');\r\n                            dateGroup.className = 'timeline-date-group';\r\n                            \r\n                            // \u53EA\u6709\u5728 showDate \u4E3A true \u65F6\u624D\u6DFB\u52A0\u65E5\u671F\u8282\u70B9\r\n                            if (this.cardSettings.timeline.showDate) {\r\n                                dateGroup.innerHTML = `\r\n                                    <div class=\"timeline-date-node\">\r\n                                        <div class=\"timeline-node-circle\"></div>\r\n                                        <div class=\"timeline-date-label\">${date}</div>\r\n                                    </div>\r\n                                `;\r\n                            }\r\n\r\n                            const notesList = dateGroup.createDiv('timeline-notes-list');\r\n                            const notes = notesByDate.get(date) || [];\r\n                            \r\n                            // \u6279\u91CF\u521B\u5EFA\u5361\u7247\u7684\u5360\u4F4D\u7B26\r\n                            const cardPromises = notes.map(async (file) => {\r\n                                const placeholder = document.createElement('div');\r\n                                placeholder.className = 'note-card-placeholder';\r\n                                placeholder.style.width = '100%';\r\n                                placeholder.style.height = '200px'; // \u8BBE\u7F6E\u4E00\u56FA\u5B9A\u9AD8\u5EA6\r\n                                placeholder.style.backgroundColor = 'var(--background-secondary)';\r\n                                placeholder.style.borderRadius = '8px';\r\n                                placeholder.style.marginBottom = '1rem';\r\n                                notesList.appendChild(placeholder);\r\n\r\n                                // \u5F02\u6B65\u521B\u5EFA\u5B9E\u9645\u5361\u7247\r\n                                const card = await this.createNoteCard(file);\r\n                                if (card instanceof HTMLElement) {\r\n                                    card.style.width = '100%';\r\n                                    // \u53EA\u6709\u5728\u5F53\u524D\u89C6\u56FE\u7136\u662F\u65F6\u95F4\u8F74\u65F6\u624D\u66FF\u6362\u5360\u7B26\r\n                                    if (this.currentView === 'timeline') {\r\n                                        notesList.replaceChild(card, placeholder);\r\n                                    }\r\n                                }\r\n                            });\r\n\r\n                            // \u6DFB\u52A0\u65E5\u7EC4\u5230\u6863\u7247\u6BB5\r\n                            fragment.appendChild(dateGroup);\r\n                            \r\n                            // \u5F02\u6B65\u5904\u7406\u5361\u7247\u521B\u5EFA\r\n                            Promise.all(cardPromises).catch(error => {\r\n                                console.error('\u521B\u5EFA\u5361\u7247\u5931\u8D25:', error);\r\n                            });\r\n                        }\r\n                        resolve();\r\n                    });\r\n                });\r\n            }\r\n\r\n            // \u4E00\u6B21\u52A0\u6240\u6709\u5185\u5230\u5BB9\u5668\r\n            container.appendChild(fragment);\r\n            \r\n            this.timelineCurrentPage++;\r\n            \r\n        } catch (error) {\r\n            console.error('\u52A0\u8F7D\u65F6\u95F4\u8F74\u9875\u9762\u5931\u8D25:', error);\r\n            this.updateLoadingStatus('\u52A0\u8F7D\u5931\u8D25');\r\n        } finally {\r\n            this.timelineIsLoading = false;\r\n            if (this.currentLoadingView === 'timeline') {\r\n                this.currentLoadingView = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    // \u65F6\u95F4\u8F74-\u6EDA\u52A8\u542C\r\n    private setupTimelineScroll(container: HTMLElement) {\r\n        try {\r\n            console.log('\u8BBE\u7F6E\u65F6\u95F4\u8F74\u6EDA\u76D1\u542C...');\r\n            \r\n            // \u4F7F\u7528 Intersection Observer \u542C\u52A0\u8F7D\u6307\u793A\u5668\r\n            const observer = new IntersectionObserver(\r\n                (entries) => {\r\n                    entries.forEach(entry => {\r\n                        if (entry.isIntersecting && !this.timelineIsLoading && this.timelineHasMore) {\r\n                            console.log('\u89E6\u53D1\u65F6\u95F4\u8F74\u52A0\u8F7D\u66F4\u591A');\r\n                            this.loadTimelinePage(container);\r\n                        }\r\n                    });\r\n                },\r\n                {\r\n                    root: container,\r\n                    rootMargin: '100px',\r\n                    threshold: 0.1\r\n                }\r\n            );\r\n            \r\n            observer.observe(this.timelineLoadingIndicator);\r\n            console.log('\u5DF2\u6DFB\u52A0\u65F6\u95F4\u8F74 Intersection Observer');\r\n            \r\n            // \u6DFB\u52A0\u6EDA\u52A8\u4E8B\u4EF6\u5904\u7406\r\n            container.addEventListener('scroll', () => {\r\n                const { scrollTop, scrollHeight, clientHeight } = container;\r\n                if (scrollHeight - scrollTop - clientHeight < 100 && !this.timelineIsLoading && this.timelineHasMore) {\r\n                    console.log('\u6EDA\u52A8\u89E6\u53D1\u65F6\u8F74\u52A0\u8F7D\u66F4\u591A');\r\n                    this.loadTimelinePage(container);\r\n                }\r\n            });\r\n            \r\n            console.log('\u5DF2\u6DFB\u52A0\u65F6\u8F74\u6EDA\u52A8\u4E8B\u4EF6\u76D1\u542C');\r\n            \r\n        } catch (error) {\r\n            console.error('\u8BBE\u7F6E\u65F6\u95F4\u8F74\u6EDA\u52A8\u76D1\u542C\u5931\u8D25:', error);\r\n        }\r\n    }\r\n\r\n    // \u5237\u65B0\u89C6\u56FE\r\n    private async refreshView() {\r\n        // \u91CD\u7F6E\u72B6\u6001\r\n        this.currentPage = 1;\r\n        this.hasMoreNotes = true;\r\n        this.loadedNotes.clear();\r\n        \r\n        // \u65AD\u5F00\u4E4B\u524D\u7684\u89C2\u5BDF\u5668\r\n        if (this.intersectionObserver) {\r\n            this.intersectionObserver.disconnect();\r\n        }\r\n        \r\n        this.container.empty();\r\n        \r\n        // \u91CD\u65B0\u521B\u5EFA\u52A0\u8F7D\u6307\u793A\u5668\r\n        this.loadingIndicator.innerHTML = `\r\n            <div class=\"loading-spinner\"></div>\r\n            <div class=\"loading-text\">\u52A0\u8F7D\u4E2D...</div>\r\n        `;\r\n        this.loadingIndicator.style.display = 'none';\r\n        \r\n        // \u52A0\u8F7D\u7B2C\u4E00\u9875\r\n        await this.loadNextPage();\r\n        \r\n        // \u91CD\u65B0\u8BBE\u7F6E\u65E0\u9650\u6EDA\u52A8\r\n        this.setupInfiniteScroll();\r\n        \r\n        this.updateLoadingStatus('\u5237\u89C6\u56FE...');\r\n    }\r\n\r\n    // \u5361\u7247-\u9009\u62E9\r\n    private handleCardSelection(path: string, event: MouseEvent) {\r\n        const card = this.container.querySelector(`[data-path=\"${path}\"]`);\r\n        if (!card) {\r\n          this.clearSelection();\r\n          return;\r\n        }\r\n\r\n        if (event.ctrlKey) {\r\n            // Ctrl + \u70B9\u51FB\uFF1A\u5207\u6362\u9009\u62E9\r\n            if (this.selectedNotes.has(path)) {\r\n                this.selectedNotes.delete(path);\r\n                card.removeClass('selected');\r\n            } else {\r\n                this.selectedNotes.add(path);\r\n                card.addClass('selected');\r\n            }\r\n        } else if (event.shiftKey && this.lastSelectedNote) {\r\n            // Shift + \u70B9\u51FB\uFF1A\u8FDE\u7EED\u9009\u62E9\r\n            const cards = Array.from(this.container.querySelectorAll('.note-card'));\r\n            const lastIndex = cards.findIndex(c => c.getAttribute('data-path') === this.lastSelectedNote);\r\n            const currentIndex = cards.findIndex(c => c.getAttribute('data-path') === path);\r\n            \r\n            const start = Math.min(lastIndex, currentIndex);\r\n            const end = Math.max(lastIndex, currentIndex);\r\n\r\n            cards.forEach((c, i) => {\r\n                const cardPath = c.getAttribute('data-path');\r\n                if (i >= start && i <= end && cardPath) {\r\n                    this.selectedNotes.add(cardPath);\r\n                    c.addClass('selected');\r\n                }\r\n            });\r\n        } else {\r\n            // \u666E\u901A\u70B9\u51FB\uFF1A\u6E05\u9664\u5176\u4ED6\u9009\u62E9\uFF0C\u9009\u4E2D\u5F53\u524D\r\n            this.clearSelection();\r\n            this.selectedNotes.add(path);\r\n            card.addClass('selected');\r\n        }\r\n\r\n        this.lastSelectedNote = path;\r\n    }\r\n\r\n    // \u6E05\u9664\u62E9\r\n    private clearSelection() {\r\n        this.selectedNotes.clear();\r\n        this.container.querySelectorAll('.note-card.selected').forEach(card => {\r\n            card.removeClass('selected');\r\n        });\r\n    }\r\n\r\n    // \u83B7\u53D6\u9009\u4E2D\u7684\u6587\u4EF6\r\n    private getSelectedFiles(): TFile[] {\r\n        return Array.from(this.selectedNotes)\r\n            .map(path => this.app.vault.getAbstractFileByPath(path))\r\n            .filter((file): file is TFile => file instanceof TFile);\r\n    }\r\n\r\n    // \u53F3\u952E\u83DC\u5355\r\n    private showContextMenu(event: MouseEvent, files: TFile[]) {\r\n        console.log('\u663E\u793A\u53F3\u952E\u83DC\u5355:', event, files); // \u6DFB\u52A0\u8C03\u8BD5\u65E5\u5FD7\r\n        \r\n        const menu = new Menu();\r\n\r\n        if (files.length > 0) {\r\n            menu.addItem((item) => {\r\n                item\r\n                    .setTitle(`\u5728\u65B0\u6807\u7B7E\u9875\u6253\u5F00`)\r\n                    .setIcon(\"link\")\r\n                    .onClick(async () => {\r\n                        for (const file of files) {\r\n                            await openInAppropriateLeaf(this.app,file);\r\n                        }\r\n                    });\r\n            });\r\n\r\n            // \u6587\u4EF6\u5217\u8868\u4E2D\u663E\u793A\r\n            menu.addItem((item) => {\r\n                item\r\n                    .setTitle(`\u6587\u4EF6\u5217\u8868\u4E2D\u663E\u793A`)\r\n                    .setIcon(\"folder\")\r\n                    .onClick(async () => {\r\n                        const file = files[0];  //\u793A\u7B2C\u4E00\u4E2A\u9009\u4E2D\u6587\u4EF6\u7684\u4F4D\u7F6E\r\n                        await openInAppropriateLeaf(this.app,file,false);\r\n                    });\r\n            });\r\n\r\n            // \u79FB\u52A8\u6587\u4EF6\r\n            menu.addItem((item) => {\r\n                item\r\n                    .setTitle(`\u79FB\u52A8 ${files.length} \u4E2A\u6587`)\r\n                    .setIcon(\"move\")\r\n                    .onClick(() => {\r\n                        const modal = new EnhancedFileSelectionModal(\r\n                            this.app,\r\n                            files,\r\n                            this.recentFolders,\r\n                            (folders) => {\r\n                                this.recentFolders = folders;\r\n                            }\r\n                        );\r\n                        modal.open();\r\n                    });\r\n            });\r\n\r\n            // \u5220\u9664\u6587\u4EF6\r\n            menu.addItem((item) => {\r\n                item\r\n                    .setTitle(`\u5220\u9664 ${files.length} \u4E2A\u6587\u4EF6`)\r\n                    .setIcon(\"trash\")\r\n                    .onClick(async () => {\r\n                        const confirm = await new ConfirmModal(\r\n                            this.app,\r\n                            \"\u786E\u8BA4\u5220\u9664\",\r\n                            `\u662F\u5426\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u7684 ${files.length} \u4E2A\u4EF6\uFF1F`\r\n                        ).show();\r\n\r\n                        if (confirm) {\r\n                            try {\r\n                                // \u5148\u5220\u9664\u6240\u6709\u6587\u4EF6\r\n                                for (const file of files) {\r\n                                    await this.app.vault.trash(file, true);\r\n                                }\r\n\r\n                                // \u6587\u4EF6\u5220\u9664\u6210\u529F\u540E\uFF0C\u5904\u7406UI\u52A8\u753B\r\n                                files.forEach(file => {\r\n                                    const card = this.container.querySelector(`[data-path=\"${file.path}\"]`);\r\n                                    if (card instanceof HTMLElement) {\r\n                                        card.addClass('removing');\r\n                                        // \u52A8\u753B\u5B8C\u6210\u540E\u9664DOM\u5143\u7D20\r\n                                        setTimeout(() => {\r\n                                            card.remove();\r\n                                            this.selectedNotes.delete(file.path);\r\n                                        }, 300);\r\n                                    }\r\n                                });\r\n                                // \u663E\u793A\u9664\u6210\u529F\u63D0\u793A\r\n                                console.error(`\u5DF2\u5220\u9664 ${files.length} \u4E2A\u6587\u4EF6`);\r\n                            } catch (error) {\r\n                                console.error('\u5220\u9664\u6587\u4EF6\u5931\u8D25:', error);\r\n                            }\r\n                        }\r\n                    });\r\n            });\r\n        }\r\n        menu.showAtMouseEvent(event); //\u663E\u793A\u53F3\u952E\u83DC\u5355\r\n    }\r\n    \r\n    // \u5361\u7247-\u8C03\u6574\u5927\r\n    public adjustCardSize(delta: number): void {\r\n        const adjustment = delta > 0 ? -10 : 10;\r\n        const newSize = Math.max(\r\n            this.plugin.settings.minCardWidth,\r\n            this.cardSize + adjustment\r\n        );\r\n\r\n        if (newSize !== this.cardSize) {\r\n            this.cardSize = newSize;\r\n            this.updateCardSize(newSize);\r\n            // \u4FDD\u5B58\u65B0\u7684\u5BBD\u5EA6\r\n            this.plugin.saveCardWidth(newSize);\r\n        }\r\n    }\r\n\r\n    // \u5361-\u8C03\u6574\u9AD8\u5EA6\r\n    public adjustCardHeight(delta: number): void {\r\n        const adjustment = delta > 0 ? -10 : 10;\r\n        const newHeight = Math.max(\r\n            this.plugin.settings.minCardHeight ?? 0,\r\n            Math.min(this.plugin.settings.maxCardHeight ?? Infinity, this.cardHeight + adjustment)\r\n        );\r\n\r\n        if (newHeight !== this.cardHeight) {\r\n            this.cardHeight = newHeight;\r\n            this.updateCardHeight(newHeight);\r\n            // \u4F7F\u7528\u65B0\u6DFB\u52A0\u7684\u65B9\u6CD5\u4FDD\u5B58\u9AD8\u5EA6\r\n            this.plugin.saveCardHeight(newHeight);\r\n        }\r\n    }\r\n\r\n    // \u5361\u7247-\u66F4\u65B0\u5927\u5C0F\r\n    public updateCardSize(width: number) {\r\n        this.cardSize = width;\r\n        // \u66F4\u65B0\u6240\u6709\u5361\u7247\u7684\u5BBD\u5EA6\r\n        this.container.querySelectorAll('.note-card').forEach((card: Element) => {\r\n            if (card instanceof HTMLElement) {\r\n                card.style.width = `${width}px`;\r\n            }\r\n        });\r\n        // \u66F4\u65B0\u5BB9\u5668\u7684\u7F51\u683C\u5BBD\u5EA6\r\n        // this.container.style.gridTemplateColumns = `repeat(auto-fill, ${width}px)`;\r\n    }\r\n\r\n    // \u7247-\u65B0\u9AD8\u5EA6\r\n    private updateCardHeight(height: number) {\r\n        this.cardHeight = height;\r\n        // \u66F4\u65B0\u6240\u6709\u5361\u7247\u7684\u9AD8\u5EA6\r\n        this.container.querySelectorAll('.note-card').forEach((card: Element) => {\r\n            if (card instanceof HTMLElement) {\r\n                card.style.height = `${height}px`;\r\n            }\r\n        });\r\n    }\r\n\r\n    // \u65E5\u5386-\u663E\u793A\r\n    private showCalendar() {\r\n        if (!this.calendarContainer) return;\r\n        \r\n        this.calendarContainer.empty();\r\n        this.calendarContainer.style.display = 'block';\r\n        \r\n        // \u521B\u5EFA\u65E5\u5934\u90E8\r\n        const header = this.calendarContainer.createDiv('calendar-header');\r\n        \r\n        // \u4E0A\u4E2A\u6708\u94AE\r\n        const prevBtn = header.createEl('button', { cls: 'calendar-nav-btn' });\r\n        prevBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"15 18 9 12 15 6\"></polyline></svg>';\r\n        \r\n        // \u663E\u793A\u5E74\u6708\r\n        const titleEl = header.createDiv('calendar-title scrollable');\r\n        titleEl.setText(`${this.currentDate.getFullYear()}\u5E74${this.currentDate.getMonth() + 1}\u6708`);\r\n        \r\n        // \u4E0B\u4E2A\u6708\u6309\u94AE\r\n        const nextBtn = header.createEl('button', { cls: 'calendar-nav-btn' });\r\n        nextBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"9 18 15 12 9 6\"></polyline></svg>';\r\n\r\n        // \u6DFB\u52A0\u6EDA\u8F6E\u4E8B\u4EF6\u5230\u6807\u9898\u5143\u7D20\r\n        titleEl.addEventListener('wheel', (e) => {\r\n            e.preventDefault(); // \u9632\u6B62\u9875\u9762\u6EDA\u52A8\r\n            \r\n            // \u5411\u4E0A\u6EDA\u52A8\u5207\u6362\u5230\u4E0B\u4E2A\u6708\uFF0C\u5411\u4E0B\u6EDA\u52A8\u5207\u6362\u5230\u4E0A\u4E2A\u6708\r\n            if (e.deltaY < 0) {\r\n                this.currentDate.setMonth(this.currentDate.getMonth() + 1);\r\n            } else {\r\n                this.currentDate.setMonth(this.currentDate.getMonth() - 1);\r\n            }\r\n            \r\n            // \u66F4\u65B0\u6807\u9898\r\n            titleEl.setText(`${this.currentDate.getFullYear()}\u5E74${this.currentDate.getMonth() + 1}`);\r\n            \r\n            // \u6E05\u7A7A\u5E76\u91CD\u65B0\u6E32\u67D3\u65E5\u5386\u5185\u5BB9\u533A\u57DF\r\n            const existingContent = this.calendarContainer.querySelector('.calendar-weekdays, .calendar-grid');\r\n            if (existingContent) {\r\n                existingContent.remove();\r\n            }\r\n            \r\n            // \u521B\u5EFA\u661F\u671F\u5934\u90E8\r\n            const weekdays = ['\u65E5', '\u4E00', '\u4E8C', '\u4E09', '\u56DB', '\u4E94', '\u516D'];\r\n            const weekHeader = this.calendarContainer.createDiv('calendar-weekdays');\r\n            weekdays.forEach(day => {\r\n                weekHeader.createDiv('weekday').setText(day);\r\n            });\r\n\r\n            // \u521B\u5EFA\u65E5\u5386\u7F51\u683C\r\n            const grid = this.calendarContainer.createDiv('calendar-grid');\r\n            \r\n            // \u83B7\u53D6\u5F53\u6708\u7684\u7B14\u8BB0\r\n            const notesByDate = this.getNotesByDate(\r\n                this.currentDate.getFullYear(),\r\n                this.currentDate.getMonth()\r\n            );\r\n            \r\n            // \u521B\u7B14\u8BB0\u5217\u8868\u5BB9\r\n            const notesSection = this.calendarContainer.createDiv('notes-section');\r\n            \r\n            // \u586B\u5145\u65E5\u671F\u683C\u5B50\r\n            this.renderCalendarDays(grid, notesByDate, notesSection);\r\n        });\r\n\r\n        // \u6DFB\u52A0\u9F20\u6807\u63D0\u793A\r\n        titleEl.setAttribute('title', '\u6EDA\u52A8\u9F20\u6807\u6EDA\u8F6E\u5207\u6362\u6708\u4EFD');\r\n\r\n        // \u6DFB\u52A0\u5BFC\u822A\u4E8B\u4EF6\r\n        prevBtn.addEventListener('click', () => {\r\n            this.currentDate.setMonth(this.currentDate.getMonth() - 1);\r\n            titleEl.setText(`${this.currentDate.getFullYear()}\u5E74${this.currentDate.getMonth() + 1}\u6708`);\r\n            this.renderCalendarContent(this.calendarContainer);\r\n        });\r\n        \r\n        nextBtn.addEventListener('click', () => {\r\n            this.currentDate.setMonth(this.currentDate.getMonth() + 1);\r\n            titleEl.setText(`${this.currentDate.getFullYear()}\u5E74${this.currentDate.getMonth() + 1}\u6708`);\r\n            this.renderCalendarContent(this.calendarContainer);\r\n        });\r\n\r\n        // \u6E32\u67D3\u521D\u59CB\u65E5\u5386\u5185\u5BB9\r\n        this.renderCalendarContent(this.calendarContainer);\r\n    }\r\n\r\n    // \u65E5\u5386-\u9690\u85CF\r\n    private hideCalendar() {\r\n        if (!this.calendarContainer) return;\r\n        this.calendarContainer.style.display = 'none';\r\n    }\r\n\r\n    // \u6DFB\u52A0\u6E32\u67D3\u65E5\u5386\u5185\u5BB9\u7684\u65B9\u6CD5\r\n    private renderCalendarContent(container: HTMLElement) {\r\n        // \u521B\u5EFA\u661F\u671F\u5934\u90E8\r\n        const weekdays = ['\u65E5', '\u4E00', '\u4E8C', '\u4E09', '\u56DB', '\u4E94', '\u516D'];\r\n        const weekHeader = container.createDiv('calendar-weekdays');\r\n        weekdays.forEach(day => {\r\n            weekHeader.createDiv('weekday').setText(day);\r\n        });\r\n\r\n        // \u521B\u5EFA\u65E5\u5386\u7F51\u683C\r\n        const grid = container.createDiv('calendar-grid');\r\n        \r\n        // \u83B7\u53D6\u5F53\u6708\u7684\u7B14\u8BB0\r\n        const notesByDate = this.getNotesByDate(\r\n            this.currentDate.getFullYear(),\r\n            this.currentDate.getMonth()\r\n        );\r\n\r\n        // \u521B\u5EFA\u7B14\u8BB0\u5217\u8868\u5BB9\u5668\r\n        const notesSection = container.createDiv('notes-section');\r\n        \r\n        // \u586B\u5145\u65E5\u671F\u683C\uFF0C\u4F20\u5165 notesSection \u53C2\u6570\r\n        this.renderCalendarDays(grid, notesByDate, notesSection);\r\n    }\r\n\r\n\r\n    // \u9AD8\u4EAE\u6587\u672C\r\n    private highlightText(text: string, searchTerm: string): string {\r\n        if (!searchTerm || searchTerm.trim() === '') {\r\n            return text; // \u5982\u679C\u641C\u7D22\u8BCD\u4E3A\u7A7A\uFF0C\u76F4\u63A5\u8FD4\u56DE\u539F\u6587\u672C\r\n        }\r\n        \r\n        const escapedSearchTerm = searchTerm\r\n            .replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&') // \u7279\u6B8A\u5B57\u7B26\r\n            .trim(); // \u786E\u4FDD\u53BB\u9664\u7A7A\u683C\r\n        \r\n        const regex = new RegExp(`(${escapedSearchTerm})`, 'gi');\r\n        return text.replace(regex, '<span class=\"search-highlight\">$1</span>');\r\n    }\r\n\r\n    // \u641C\u7D22=\u6587\u4EF6\u5185\r\n    private async fileContentContainsSearch(file: TFile): Promise<boolean> {\r\n        if (!this.currentSearchTerm || this.currentSearchTerm.trim() === '') {\r\n            return true;\r\n        }\r\n\r\n        try {\r\n            const content = await this.app.vault.cachedRead(file);\r\n            const searchTerm = this.currentSearchTerm.trim().toLowerCase();\r\n            const fileContent = content.toLowerCase();\r\n            \r\n            // \u68C0\u67E5\u6587\u4EF6\u5BB9\u662F\u5426\u5305\u542B\u641C\u7D22\u8BCD\r\n            return fileContent.includes(searchTerm);\r\n        } catch (error) {\r\n            console.error('\u8BFB\u53D6\u6587\u4EF6\u5185\u5BB9\u5931\u8D25:', error);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // \u641C\u7D22-\u8BBE\u7F6E\r\n    private setupSearch() {\r\n        // \u4F7F\u7528\u9632\u6296\u6765\u5904\u7406\u5FEB\u901F\u8F93\u5165\r\n        const debounce = (fn: Function, delay: number) => {\r\n            let timeoutId: NodeJS.Timeout;\r\n            return  (...args: any[]) => {\r\n                clearTimeout(timeoutId);\r\n                timeoutId = setTimeout(() => fn.apply(this, args), delay);\r\n            };\r\n        };\r\n\r\n        // \u5904\u7406\u641C\u7D22\u8F93\u5165\r\n        this.searchInput.addEventListener('input', debounce(() => {\r\n            this.currentSearchTerm = this.searchInput.value.trim();\r\n            this.refreshView();\r\n        }, 200));\r\n    }\r\n\r\n    // \u4EE4-\u521B\u5EFA\u6309\u94AE\r\n    private createCommandButton(toolbar: HTMLElement) {\r\n        const commandContainer = toolbar.createDiv('command-container');\r\n        \r\n        // \u5EFA\u547D\u6309\r\n        const commandBtn = commandContainer.createEl('button', {\r\n            cls: 'command-button',\r\n        });\r\n        commandBtn.innerHTML = `\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"1\"></circle><circle cx=\"12\" cy=\"5\" r=\"1\"></circle><circle cx=\"12\" cy=\"19\" r=\"1\"></circle></svg>\r\n        `;\r\n        commandBtn.setAttribute('title', '\u547D\u4EE4\u83DC\u5355');\r\n\r\n        // \u521B\u5EFA\u83DC\u5355\u5BB9\r\n        const menu = commandContainer.createDiv('command-menu');\r\n        menu.style.display = 'none';\r\n\r\n        // \u6DFB\u52A0\u83DC\u5355\u9879\r\n        const deleteEmptyNotesItem = menu.createDiv('command-menu-item');\r\n        deleteEmptyNotesItem.setText('\u5220\u9664\u6240\u9009\u7A7A\u767D\u7B14\u8BB0');\r\n        deleteEmptyNotesItem.addEventListener('click', () => {\r\n            menu.style.display = 'none';  // \u70B9\u51FB\u540E\u9690\u85CF\u83DC\u5355\r\n            this.deleteEmptyNotes();\r\n        });\r\n\r\n        const batchRenameItem = menu.createDiv('command-menu-item');\r\n        batchRenameItem.setText('\u6279\u91CF\u91CD\u540D');\r\n        batchRenameItem.addEventListener('click', () => {\r\n            menu.style.display = 'none';  // \u70B9\u51FB\u9690\u85CF\u83DC\u5355\r\n            console.log('\u6279\u91CF\u91CD\u547D\u540D\u529F\u80FD\u5B9E\u73B0');\r\n        });\r\n\r\n        // \u4F7F\u7528\u51FB\u4E8B\u66FF\u4EE3\u9F20\u6807\u60AC\u505C\u4E8B\u4EF6\r\n        let isMenuVisible = false;\r\n        \r\n        // \u70B9\u51FB\u6309\u94AE\u65F6\u83DC\u5355\u663E\u72B6\u6001\r\n        commandBtn.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            isMenuVisible = !isMenuVisible;\r\n            menu.style.display = isMenuVisible ? 'block' : 'none';\r\n        });\r\n\r\n        // \u70B9\u51FB\u5176\u4ED6\u5730\u65B9\u65F6\u85CF\u83DC\u5355\r\n        document.addEventListener('click', (e) => {\r\n            if (!commandContainer.contains(e.target as Node)) {\r\n                isMenuVisible = false;\r\n                menu.style.display = 'none';\r\n            }\r\n        });\r\n    }\r\n\r\n    // \u547D\u4EE4-\u5220\u9664\u7A7A\u767D\u7B14\u8BB0\r\n    private async deleteEmptyNotes() {\r\n        const selectedFiles = this.getSelectedFiles();\r\n        if (selectedFiles.length === 0) {\r\n            // \u5982\u679C\u6CA1\u6709\u4E2D\u7684\u7B14\uFF0C\u63D0\u7528\u6237\r\n            new Notice('\u8BF7\u5148\u9009\u62E9\u68C0\u67E5\u7684\u7B14\u8BB0');\r\n            return;\r\n        }\r\n\r\n        // \u68C0\u67E5\u7A7A\u767D\u7B14\u8BB0\r\n        const emptyNotes: TFile[] = [];\r\n        for (const file of selectedFiles) {\r\n            const content = await this.app.vault.read(file);\r\n            // \u79FB\u9664\u6240\u7A7A\u767D\u5B57\u7B26\u540E\u68C0\u67E5\u662F\u5426\u4E3A\u7A7A\r\n            if (!content.trim()) {\r\n                emptyNotes.push(file);\r\n            }\r\n        }\r\n\r\n        if (emptyNotes.length === 0) {\r\n            new Notice('\u6240\u9009\u7B14\u8BB0\u4E2D\u6CA1\u6709\u7A7A\u767D\u7B14\u8BB0');\r\n            return;\r\n        }\r\n\r\n        // \u793A\u786E\u8BA4\u5BF9\u8BDD\u6846\r\n        const confirmModal = new ConfirmModal(\r\n            this.app,\r\n            \"\u786E\u8BA4\u5220\u9664\u7A7A\u767D\u7B14\u8BB0\",\r\n            `\u662F\u5426\u5220\u9664\u4EE5\u4E0B ${emptyNotes.length} \u4E2A\u7A7A\u767D\u7B14\u8BB0\uFF1F\\n${emptyNotes.map(file => file.basename).join('\\n')}`\r\n        );\r\n\r\n        if (await confirmModal.show()) {\r\n            // \u6267\u884C\u5220\u9664\r\n            for (const file of emptyNotes) {\r\n                await this.app.vault.trash(file, true);\r\n            }\r\n            // \u5237\u65B0\u89C6\u56FE\r\n            this.refreshView();\r\n            new Notice(`\u5220\u9664 ${emptyNotes.length} \u4E2A\u7A7A\u767D\u7B14\u8BB0`);\r\n        }\r\n    }\r\n\r\n    // \u6708\u5386-\u521B\u5EFA\u6708\u89C6\u56FE\r\n    private async createMonthView() {\r\n        if (this.currentLoadingView !== 'month') {\r\n            console.log('\u4E2D\u65AD\u6708\u5386\u89C6\u56FE\u8F7D\uFF1A\u89C6\u56FE\u5DF2\u5207\u6362');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            if (!this.container.querySelector('.month-view')) {\r\n                const monthContainer = this.container.createDiv('month-view');\r\n                \r\n                // \u521B\u5EFA\u6708\u89C6\u56FE\u5934\u90E8\r\n                const header = monthContainer.createDiv('month-header');\r\n                \r\n                // \u5E74\u4EFD\u663E\u793A\u533A\u57DF\r\n                const yearGroup = header.createDiv('year-group');\r\n                \r\n                // \u6DFB\u52A0\u4E0A\u4E00\u5E74\u6309\u94AE\r\n                const prevYearBtn = yearGroup.createEl('button', { cls: 'year-nav-btn' });\r\n                prevYearBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"15 18 9 12 15 6\"></polyline></svg>';\r\n                \r\n                // \u521B\u5EFA\u5E74\u4EFD\u663E\u793A\r\n                const yearDisplay = yearGroup.createDiv('year-display');\r\n                yearDisplay.setText(this.currentDate.getFullYear().toString());\r\n                \r\n                // \u6DFB\u52A0\u4E0B\u4E00\u5E74\u6309\u94AE\r\n                const nextYearBtn = yearGroup.createEl('button', { cls: 'year-nav-btn' });\r\n                nextYearBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"9 18 15 12 9 6\"></polyline></svg>';\r\n                \r\n                // \u6DFB\u52A0\u4EFD\u5207\u6362\u4E8B\u4EF6\r\n                prevYearBtn.addEventListener('click', () => this.navigateYear(-1));\r\n                nextYearBtn.addEventListener('click', () => this.navigateYear(1));\r\n\r\n                // \u521B\u5EFA\u6708\u4EFD\u9009\u62E9\u5668\r\n                const monthSelector = header.createDiv('month-selector');\r\n                \r\n                // \u521B\u5EFA12\u4E2A\u6708\u4EFD\u6309\u94AE\r\n                for (let i = 1; i <= 12; i++) {\r\n                    const monthBtn = monthSelector.createDiv({\r\n                        cls: `month-btn ${i === this.currentDate.getMonth() + 1 ? 'active' : ''}`,\r\n                        text: i.toString()\r\n                    });\r\n                    \r\n                    // \u6DFB\u52A0\u70B9\u4E8B\r\n                    monthBtn.addEventListener('click', () => {\r\n                        this.selectMonth(i - 1);\r\n                    });\r\n                }\r\n                \r\n                // \u6DFB\u4ECA\u5929\u6309\u94AE\r\n                const todayBtn = header.createEl('button', { \r\n                    cls: 'today-btn',\r\n                    text: '\u4ECA\u5929'\r\n                });\r\n                todayBtn.addEventListener('click', () => this.goToToday());\r\n                \r\n                // \u6DFB\u6EDA\u8F6E\u4E8B\u4EF6\r\n                monthSelector.addEventListener('wheel', (e) => {\r\n                    e.preventDefault();\r\n                    this.navigateMonth(e.deltaY > 0 ? 1 : -1);\r\n                });\r\n                \r\n                // \u521B\u5EFA\u661F\u671F\u5934\u90E8\r\n                const weekdays = ['', '\u4E00', '\u4E8C', '\u4E09', '\u56DB', '\u4E94', '\u516D'];\r\n                const weekHeader = monthContainer.createDiv('month-weekdays');\r\n                weekdays.forEach(day => {\r\n                    weekHeader.createDiv('weekday').setText(day);\r\n                });\r\n                \r\n                // \u521B\u5EFA\u65E5\u5386\u7F51\u683C\r\n                monthContainer.createDiv('month-grid');\r\n            }\r\n            \r\n            this.updateMonthView();\r\n        } finally {\r\n            if (this.currentLoadingView === 'month') {\r\n                this.currentLoadingView = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    // \u6708\u5386-\u9009\u62E9\u6708\u4EFD\r\n    private selectMonth(month: number) {\r\n        this.currentDate = new Date(this.currentDate.getFullYear(), month);\r\n        this.updateMonthView();\r\n    }\r\n\r\n    // \u6708\u5386-\u66F4\u65B0\uFFFD\uFFFD\u89C6\u56FE\r\n    private updateMonthView() {\r\n        const monthView = this.container.querySelector('.month-view');\r\n        if (!monthView) return;\r\n\r\n        // \u66F4\u65B0\u5E74\u4EFD\u663E\u793A\r\n        const yearDisplay = monthView.querySelector('.year-display');\r\n        if (yearDisplay) {\r\n            yearDisplay.setText(this.currentDate.getFullYear().toString());\r\n        }\r\n\r\n        // \u66F4\u65B0\u6708\u4EFD\u9009\u62E9\u5668\r\n        const monthBtns = monthView.querySelectorAll('.month-btn');\r\n        monthBtns.forEach((btn, index) => {\r\n            btn.toggleClass('active', index === this.currentDate.getMonth());\r\n        });\r\n\r\n        // \u66F4\u65B0\u7F51\u683C\r\n        const grid = monthView.querySelector('.month-grid');\r\n        if (grid) {\r\n            grid.empty();\r\n            this.renderMonthGrid(grid as HTMLElement);\r\n        }\r\n    }\r\n\r\n    // \u6708\u5386-\u6708\u4EFD\u5BFC\u822A\r\n    private navigateMonth(delta: number) {\r\n        const newDate = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() + delta);\r\n        \r\n        // \u5982\u679C\u5E74\u4EFD\u53D8\u5316\uFF0C\u9700\u65B0\u5E74\u4EFD\u663E\u793A\r\n        if (newDate.getFullYear() !== this.currentDate.getFullYear()) {\r\n            const yearDisplay = this.container.querySelector('.year-display');\r\n            if (yearDisplay) {\r\n                yearDisplay.setText(newDate.getFullYear().toString());\r\n            }\r\n        }\r\n        \r\n        this.currentDate = newDate;\r\n        this.updateMonthView();\r\n    }\r\n\r\n    // \u6708\u5386-\u8DF3\u8F6C\u5230\u4ECA\u5929\r\n    private goToToday() {\r\n        this.currentDate = new Date();\r\n        this.updateMonthView();\r\n    }\r\n\r\n    // \u6708\u5386-\u6E32\u67D3\u89C6\u56FE\u683C\r\n    private renderMonthGrid(grid: HTMLElement) {\r\n        const year = this.currentDate.getFullYear();\r\n        const month = this.currentDate.getMonth();\r\n        const firstDay = new Date(year, month, 1);\r\n        const lastDay = new Date(year, month + 1, 0);\r\n        \r\n        // \u83B7\u53D6\u4ECA\u5929\u65E5\u671F\r\n        const today = new Date();\r\n        const isCurrentMonth = today.getFullYear() === year && today.getMonth() === month;\r\n        \r\n        // \u83B7\u53D6\u5F53\u6708\u7684\u7B14\u8BB0\r\n        const notesByDate = this.getNotesByDate(year, month);\r\n        \r\n        // \u586B\u5145\u524D\u7F6E\u7A7A\u767D\u65E5\u671F\r\n        for (let i = 0; i < firstDay.getDay(); i++) {\r\n            grid.createDiv('month-day empty');\r\n        }\r\n        \r\n        // \u586B\u5145\u65E5\u671F\u5B50\r\n        for (let day = 1; day <= lastDay.getDate(); day++) {\r\n            const dateCell = grid.createDiv('month-day');\r\n            const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;\r\n            \r\n            // \u68C0\u67E5\u662F\u5426\u662F\u4ECA\u5929\r\n            if (isCurrentMonth && today.getDate() === day) {\r\n                dateCell.addClass('today');\r\n            }\r\n            \r\n            // \u6DFB\u52A0\u65E5\u671F\u6570\u5B57\r\n            dateCell.createDiv('day-number').setText(String(day));\r\n            \r\n            // \u6DFB\u52A0\u7B14\u8BB0\u5217\u8868\r\n            const dayNotes = notesByDate[dateStr] || [];\r\n            if (dayNotes.length > 0) {\r\n                const notesList = dateCell.createDiv('day-notes');\r\n                \r\n                // \u663E\u793A\u6240\u6709\u7B14\u8BB0\r\n                dayNotes.forEach(note => {\r\n                    const noteItem = notesList.createDiv('day-note-item');\r\n                    noteItem.setText(note.basename);\r\n                    \r\n                    // \u6DFB\u52A0\u70B9\u51FB\u4E8B\u4EF6\r\n                    noteItem.addEventListener('click', async (e) => {\r\n                        e.stopPropagation();\r\n                        await openInAppropriateLeaf(this.app,note);\r\n                    });\r\n                    \r\n                    // \u6DFB\u52A0\u9884\u89C8\u529F\u80FD\r\n                    noteItem.addEventListener('mouseenter', async () => {\r\n                        try {\r\n                            this.previewContainer.empty();\r\n                            const content = await this.app.vault.read(note);\r\n                            await MarkdownRenderer.render(\r\n                                this.app,\r\n                                content,\r\n                                this.previewContainer,\r\n                                note.path,\r\n                                this\r\n                            );\r\n                        } catch (error) {\r\n                            console.error('\u9884\u89C8\u52A0\u8F7D\u5931\u8D25:', error);\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    // \u6708\u5386-\u83B7\u53D6\u6BCF\u65E5\u7B14\u8BB0\u6570\u91CF\r\n    private getNotesByDate(year: number, month: number): Record<string, TFile[]> {\r\n        const notesByDate: Record<string, TFile[]> = {};\r\n        const files = this.app.vault.getMarkdownFiles();\r\n        \r\n        files.forEach(file => {\r\n            const fileDate = new Date(file.stat.mtime);\r\n            if (fileDate.getFullYear() === year && fileDate.getMonth() === month) {\r\n                const dateStr = fileDate.toISOString().split('T')[0];\r\n                if (!notesByDate[dateStr]) {\r\n                    notesByDate[dateStr] = [];\r\n                }\r\n                notesByDate[dateStr].push(file);\r\n            }\r\n        });\r\n        \r\n        return notesByDate;\r\n    }\r\n\r\n    // \u5E74\u4EFD\u5BFC\u822A\r\n    private navigateYear(delta: number) {\r\n        this.currentDate = new Date(this.currentDate.getFullYear() + delta, this.currentDate.getMonth());\r\n        this.updateMonthView();\r\n    }\r\n\r\n    // \u5217\u8868-\u521B\u5EFA\u89C6\u56FE\r\n    private async createListView() {\r\n        if (this.currentLoadingView !== 'list') {\r\n            console.log('\u4E2D\u5217\u8868\u89C6\u56FE\u52A0\u8F7D\uFF1A\u89C6\u56FE\u5DF2\u6362');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const files = this.app.vault.getMarkdownFiles();\r\n            const folderStructure = new Map<string, Map<string, TFile[]>>();\r\n            \r\n            // \u6784\u5EFA\u6587\u4EF6\u5939\u7ED3\u6784\u548C\u5206\u7EC4\u7B14\u8BB0\r\n            files.forEach(file => {\r\n                const pathParts = file.path.split('/');\r\n                const rootFolder = pathParts.length > 1 ? pathParts[0] : '\u6839\u5F55';\r\n                const subFolder = pathParts.length > 2 ? pathParts[1] : '';\r\n                \r\n                // \u521D\u59CB\u5316\u6839\u6587\u4EF6\u5939\u7ED3\u6784\r\n                if (!folderStructure.has(rootFolder)) {\r\n                    folderStructure.set(rootFolder, new Map());\r\n                }\r\n                \r\n                // \u5C06\u7B14\u8BB0\u6DFB\u52A0\u5230\u5BF9\u7684\u6587\u4EF6\u5939\u4E2D\r\n                const subFolders = folderStructure.get(rootFolder);\r\n                if (subFolders) {\r\n                    if (!subFolders.has(subFolder)) {\r\n                        subFolders.set(subFolder, []);\r\n                    }\r\n                    subFolders.get(subFolder)?.push(file);\r\n                }\r\n            }); // \u8FD9\u91CC\u6DFB\u52A0\u9017\u53F7\r\n            \r\n            // \u521B\u5EFA\u6587\u4EF6\u5939\u89C6\u56FE\r\n            for (const [rootFolder, subFolders] of folderStructure) {\r\n                const folderGroup = this.container.createDiv('folder-group');\r\n                \r\n                // \u521B\u5EFA\u6587\u4EF6\u7EC4\u9898\r\n                const folderHeader = folderGroup.createDiv('folder-header');\r\n                \r\n                // \u6DFB\u52A0\u6587\u4EF6\u5939\u56FE\u6807\r\n                const folderIcon = folderHeader.createDiv('folder-icon');\r\n                folderIcon.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z\"></path></svg>`;\r\n                \r\n                // \u6DFB\u52A0\u4EF6\u5939\u540D\u79F0\r\n                const folderName = folderHeader.createDiv('folder-name');\r\n                folderName.setText(rootFolder);\r\n                \r\n                // \u521B\u5EFA\u5185\u5BB9\u533A\u57DF\r\n                const contentArea = folderGroup.createDiv('folder-content-area');\r\n                \r\n                // \u521B\u5EFA\u5DE6\u4FA7\u5B50\u6587\u4EF6\u5939\u5BFC\u822A\r\n                const sideNav = contentArea.createDiv('folder-sidebar');\r\n                \r\n                // \u521B\u5EFA\u6839\u6587\u4EF6\u5939\u7684\u7B14\u8BB0\u9009\u9879\r\n                const rootNotes = subFolders.get('') || [];\r\n                if (rootNotes.length > 0) {\r\n                    const rootTitle = sideNav.createDiv('folder-title');\r\n                    rootTitle.setText('...');//\u5F53\u524D\u76EE\u5F55\r\n                    rootTitle.addEventListener('click', () => {\r\n                        this.showFolderContent(notesArea, rootNotes);\r\n                        sideNav.querySelectorAll('.folder-title').forEach(el => el.removeClass('active'));\r\n                        rootTitle.addClass('active');\r\n                    });\r\n                }\r\n                \r\n                // \u521B\u5EFA\u5B50\u6587\u4EF6\u5939\u5217\u8868\r\n                for (const [subFolder, notes] of subFolders) {\r\n                    if (subFolder !== '') {\r\n                        const subTitle = sideNav.createDiv('folder-title sub');\r\n                        subTitle.setText(subFolder);\r\n                        subTitle.addEventListener('mouseenter', () => {\r\n                            this.showFolderContent(notesArea, notes);\r\n                            sideNav.querySelectorAll('.folder-title').forEach(el => el.removeClass('active'));\r\n                            subTitle.addClass('active');\r\n                        });\r\n                    }\r\n                }\r\n                \r\n                // \u5EFA\u53F3\u4FA7\u7B14\u8BB0\u57DF\r\n                const notesArea = contentArea.createDiv('folder-content');\r\n                \r\n                // \u9ED8\u8BA4\u663E\u793A\u6587\u4EF6\u5939\u7684\u7B14\r\n                this.showFolderContent(notesArea, rootNotes);\r\n            }\r\n\r\n            // \u5E94\u7528\u89C6\u56FE\u8BBE\u7F6E\r\n            this.updateCardLayout();\r\n\r\n        } finally {\r\n            if (this.currentLoadingView === 'list') {\r\n                this.currentLoadingView = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    // \u5217\u8868-\u663E\u6587\u4EF6\u5939\u5185\u5BB9\r\n    private showFolderContent(container: HTMLElement, notes: TFile[]) {\r\n        container.empty();\r\n        \r\n        // \u6309\u4FEE\u6539\u65F6\u95F4\u6392\u5E8F\r\n        notes.sort((a, b) => b.stat.mtime - a.stat.mtime);\r\n        \r\n        // \u521B\u5EFA\u7B14\u8BB0\u5217\u8868\r\n        const notesList = container.createDiv('notes-list');\r\n        \r\n        // \u904D\u5386\u6240\u6709\u7B14\u8BB0\u521B\u5EFA\u7B14\u8BB0\u9879\r\n        notes.forEach(note => {\r\n            const noteItem = notesList.createDiv('note-item');\r\n            noteItem.setAttribute('data-path', note.path);\r\n            \r\n            // \u6DFB\u52A0\u7B14\u6807\u9898\r\n            const noteTitle = noteItem.createDiv('note-title');\r\n            noteTitle.setText(note.basename);\r\n            \r\n            // \u6DFB\u52A0\u4FEE\u65E5\u671F\r\n            const noteDate = noteItem.createDiv('note-date');\r\n            noteDate.setText(new Date(note.stat.mtime).toLocaleString());\r\n            \r\n            // \u6DFB\u52A0\u4E8B\u4EF6\u76D1\u542C\r\n            this.addNoteItemEvents(noteItem, note);\r\n        });\r\n    }\r\n\r\n    // \u5217\u8868-\u6DFB\u52A0\u7B14\u8BB0\u9879\u4E8B\u4EF6\r\n    private addNoteItemEvents(noteItem: HTMLElement, note: TFile) {\r\n        // \u5355\u51FB\u9009\u62E9\r\n        noteItem.addEventListener('click', (e) => {\r\n            this.handleCardSelection(note.path, e);\r\n        });\r\n\r\n        // \u53CC\u51FB\u6253\u5F00\r\n        noteItem.addEventListener('dblclick', async () => {\r\n            await openInAppropriateLeaf(this.app,note);\r\n        });\r\n\r\n        // \u53F3\u83DC\u5355\r\n        noteItem.addEventListener('contextmenu', (e) => {\r\n            console.log('\u83DC\u5355');\r\n            e.preventDefault();\r\n            this.showContextMenu(e, this.getSelectedFiles());\r\n        });\r\n\r\n        // \u60AC\u505C\u9884\u89C8\r\n        noteItem.addEventListener('mouseenter', async () => {\r\n            try {\r\n                this.previewContainer.empty();\r\n                const content = await this.app.vault.read(note);\r\n                await MarkdownRenderer.render(\r\n                    this.app,\r\n                    content,\r\n                    this.previewContainer,\r\n                    note.path,\r\n                    this\r\n                );\r\n            } catch (error) {\r\n                console.error('\u9884\u89C8\u52A0\u8F7D\u5931\u8D25:', error);\r\n            }\r\n        });\r\n    }\r\n\r\n    // \u6807\u7B7E-\u5237\u65B0\r\n    public refreshTags() {\r\n        this.loadTags();\r\n    }\r\n\r\n    // \u6EDA\u52A8\u540C\u6B65\r\n    private setupScrollSync() {\r\n        // \u83B7\u53D6\u5361\u7247\u5BB9\u5668\u548C\u9884\u89C8\u5668\r\n        const cardContainer = this.container;\r\n        const previewContainer = this.previewContainer;\r\n\r\n        // \u4E3A\u5361\u7247\u5BB9\u5668\u6DFB\u52A0\u6EDA\u52A8\u4E8B\u4EF6\u76D1\u542C\r\n        cardContainer.addEventListener('wheel', (e: WheelEvent) => {\r\n            // \u5982\u679C\u6309\u4F4F\u4E86 Ctrl \u6216 Shift \u952E\uFF0C\u4E0D\u5904\u7406\u6EDA\u52A8\u540C\u6B65\uFF08\u56E0\u4E3A\u8FD9\u662F\u7528\u6765\u8C03\u6574\u5361\u7247\u5927\u5C0F\u7684\uFF09\r\n            if (e.ctrlKey || e.shiftKey) {\r\n                return;\r\n            }\r\n\r\n            // \u6DFB\u52A0\u6EDA\u52A8\u65F6\u7684\u9F20\u6807\u6837\u5F0F\r\n            cardContainer.style.cursor = 'ns-resize';\r\n\r\n            // \u8BBE\u7F6E\u65F6\u5668\u6765\u6062\u590D\u9F20\u6807\u6837\u5F0F\r\n            setTimeout(() => {\r\n                cardContainer.style.cursor = 'default';\r\n            }, 150);\r\n\r\n            // \u540C\u6B65\u89C8\u5BB9\u5668\u7684\u6EDA\u52A8\u4F4D\u7F6E\r\n            previewContainer.scrollTop += e.deltaY;\r\n        });\r\n\r\n        // \u9884\u89C8\u5BB9\u6DFB\u52A0\u6EDA\u52A8\u4E8B\u4EF6\u76D1\u542C\r\n        previewContainer.addEventListener('wheel', (e: WheelEvent) => {\r\n            // \u6DFB\u52A0\u6EDA\u52A8\u65F6\u7684\u9F20\u6807\u6837\u5F0F\r\n            previewContainer.style.cursor = 'ns-resize';\r\n\r\n            // \u8BBE\u7F6E\u5B9A\u65F6\u5668\u6765\u6062\u590D\u9F20\u6807\u6837\u5F0F\r\n            setTimeout(() => {\r\n                previewContainer.style.cursor = 'default';\r\n            }, 150);\r\n        });\r\n    }\r\n\r\n    // \u5FEB\u901F\u8BB0-\u8BBE\u7F6E\u4E8B\u4EF6\r\n    private setupQuickNoteEvents(\r\n        input: HTMLTextAreaElement,\r\n        toolbar: HTMLElement,\r\n        tagSuggestions: HTMLElement\r\n    ) {\r\n        // \u4F7F\u7528\u5DF2\u5B58\u5728\u7684 titleInput\r\n        const titleInput = input.parentElement?.querySelector('.quick-note-title') as HTMLInputElement;\r\n\r\n        // \u4F7F\u7528\u5DF2\u5B58\u5728\u7684\u6807\u7B7E\u5BB9\u5668\u548C\u8F93\u5165\u6846\r\n        const tagsContainer = input.parentElement?.querySelector('.tags-container') as HTMLElement;\r\n        const tagInput = tagsContainer?.querySelector('.tag-input') as HTMLInputElement;\r\n\r\n        // \u5C06\u6807\u9898\u8F93\u5165\u6846\u79FB\u5230\u6700\u524D\r\n        if (titleInput && input.parentElement) {\r\n            input.parentElement.insertBefore(titleInput, input.parentElement.firstChild);\r\n        }\r\n\r\n        // \u5B58\u50A8\u6700\u4F7F\u7528\u7684\u6807\u7B7E\u5E76\u521D\u59CB\u5316\u663E\u793A\r\n        const recentTags = new Set<string>(this.loadRecentTags());\r\n        const tags = new Set<string>();\r\n\r\n        // \u521D\u59CB\u5316\u663E\u793A\u6700\u8FD1\u4F7F\u7528\u7684\u6807\u7B7E\r\n        recentTags.forEach(tag => {\r\n            const tagItem = tagsContainer?.createDiv('tag-item');\r\n            tagItem?.addClass('recent-tag');\r\n            tagItem?.setText(tag);\r\n            \r\n            // \u4E3A\u6700\u8FD1\u4F7F\u7528\u7684\u6807\u7B7E\u4E5F\u6DFB\u52A0\u5220\u9664\u6309\u94AE\r\n            const removeBtn = tagItem?.createDiv('remove-tag');\r\n            removeBtn?.setText('\u00D7');\r\n            removeBtn?.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                recentTags.delete(tag);\r\n                tagItem?.remove();\r\n                this.saveRecentTags(Array.from(recentTags));\r\n            });\r\n            \r\n            tags.add(tag);\r\n            if (tagInput) tagInput.value = '';\r\n        });\r\n\r\n        // \u4FEE\u6539\u6DFB\u52A0\u6807\u7684\u65B9\u6CD5\r\n        const addTag = (tagText: string) => {\r\n            if (!tagText || tags.has(tagText)) return;\r\n            \r\n            const tagItem = tagsContainer?.createDiv('tag-item');\r\n            tagItem?.setText(tagText);\r\n            \r\n            // \u6240\u6709\u6807\u7B7E\u6DFB\u52A0\u5220\u9664\u6309\u94AE\uFF0C\u5305\u62EC\u6700\u8FD1\u4F7F\u7528\u7684\u6807\u7B7E\r\n            const removeBtn = tagItem?.createDiv('remove-tag');\r\n            removeBtn?.setText('\u00D7');\r\n            removeBtn?.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                tags.delete(tagText);\r\n                tagItem?.remove();\r\n                // \u5C06\u79FB\u9664\u7684\u6807\u7B7E\u6DFB\u52A0\u5230\u6700\u8FD1\u4F7F\u7528\r\n                recentTags.add(tagText);\r\n                this.saveRecentTags(Array.from(recentTags));\r\n            });\r\n            \r\n            tags.add(tagText);\r\n            if (tagInput) tagInput.value = '';\r\n        };\r\n\r\n        // \u4FEE\u6539\u6700\u8FD1\u7B7E\u7684\u5904\u7406\r\n        recentTags.forEach(tag => {\r\n            const tagItem = tagsContainer?.createDiv('tag-item');\r\n            tagItem?.addClass('recent-tag');\r\n            tagItem?.setText(tag);\r\n            \r\n            // \u4E3A\u6700\u8FD1\u4F7F\u7528\u7684\u6807\u7B7E\u4E5F\u6DFB\u52A0\u5220\u9664\u6309\u94AE\r\n            const removeBtn = tagItem?.createDiv('remove-tag');\r\n            removeBtn?.setText('\u00D7');\r\n            removeBtn?.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                recentTags.delete(tag);\r\n                tagItem?.remove();\r\n                this.saveRecentTags(Array.from(recentTags));\r\n            });\r\n\r\n            // \u70B9\u51FB\u6700\u8FD1\u6807\u7B7E\u65F6\u6DFB\u52A0\u5230\u5F53\u524D\u6807\u7B7E\r\n            tagItem?.addEventListener('click', () => {\r\n                if (tagItem.hasClass('recent-tag')) {\r\n                    tagItem.remove();\r\n                    addTag(tag);\r\n                    recentTags.delete(tag);\r\n                    this.saveRecentTags(Array.from(recentTags));\r\n                }\r\n            });\r\n        });\r\n\r\n        // \u5904\u7406\u4EE3\u7801\u9AD8\u4EAE\r\n        input.addEventListener('input', () => {\r\n            const content = input.value;\r\n            if (content.includes('```')) {\r\n                input.addClass('has-code');\r\n                // \u4F7F\u7528 Prism.js \u6216\u5176\u4ED6\u8BED\u6CD5\u9AD8\u4EAE\u5E93\u5904\u7406\u4EE3\u7801\u5757\r\n                // \u8FD9\u91CC\u9700\u8981\u6DFB\u52A0\u5177\u4F53\u7684\u4EE3\u7801\u9AD8\u4EAE\u903B\u8F91\r\n            } else {\r\n                input.removeClass('has-code');\r\n            }\r\n        });\r\n\r\n        // \u4FEE\u6539 handleSendNote \u51FD\u6570\u7684\u5B9E\r\n        const handleSendNote = async () => {\r\n            const title = titleInput?.value?.trim();\r\n            const content = input.value.trim();\r\n            \r\n            if (!content) {\r\n                new Notice('\u8BF7\u8F93\u5165\u7B14\u8BB0\u5185\u5BB9');\r\n                return;\r\n            }\r\n\r\n            try {\r\n                // \u83B7\u53D6\u6240\u6709\u6DFB\u52A0\u7684\u6807\u7B7E\r\n                const tagItems = tagsContainer?.querySelectorAll('.tag-item.active') ?? [];\r\n                const tagTexts = Array.from(tagItems).map(item => item.textContent?.replace('\u00D7', '').trim() ?? '');\r\n                \r\n                // \u6784\u5EFA\u7B14\u8BB0\u5185\u5BB9\uFF0C\u53EA\u5305\u542B\u6FC0\u6D3B\u7684\u6807\u7B7E\r\n                const tagsContent = tagTexts.map(tag => `#${tag}`).join(' ');\r\n                const finalContent = tagsContent ? `${tagsContent}\\n\\n${content}` : content;\r\n                \r\n                // \u4F7F\u7528\u6807\u9898\u4F5C\u4E3A\u6587\u4EF6\u540D\r\n                const fileName = title || new Date().toLocaleDateString('zh-CN', {\r\n                    year: 'numeric',\r\n                    month: '2-digit',\r\n                    day: '2-digit'\r\n                }).replace(/\\//g, '-');\r\n\r\n                // \u521B\u5EFA\u8BB0\r\n                const file = await this.createQuickNote(finalContent, [], fileName);\r\n                \r\n                if (file) {\r\n                    // \u6E05\u7406\u8F93\u5165\u72B6\u6001\uFF0C\u4F46\u4FDD\u7559\u6807\u7B7E\r\n                    this.clearQuickNoteInputs(titleInput ?? null, input, tags, tagsContainer ?? null, tagInput ?? null);\r\n                    \r\n                    // \u5C06\u6240\u6709\u6807\u7B7E\u8BBE\u7F6E\u4E3A\u672A\u9009\u4E2D\u72B6\u6001\r\n                    tagsContainer?.querySelectorAll('.tag-item').forEach(item => {\r\n                        item.removeClass('active');\r\n                        item.addClass('inactive');\r\n                    });\r\n                    \r\n                    // \u5237\u89C6\u56FE\r\n                    await this.refreshView();\r\n                    \r\n                    new Notice('\u7B14\u521B\u5EFA\u6210\u529F');\r\n                }\r\n            } catch (error) {\r\n                console.error('\u521B\u5EFA\u7B14\u8BB0\u5931\u8D25:', error);\r\n                new Notice('\u521B\u5EFA\u7B14\u8BB0\u5931\u8D25');\r\n            }\r\n        };\r\n\r\n        // \u4FEE\u6539\u53D1\u9001\u6309\u94AE\u7684\u4E8B\u4EF6\u7ED1\u5B9A\r\n        const sendButton = input.parentElement?.querySelector('.quick-note-send');\r\n        if (sendButton) {\r\n            sendButton.addEventListener('click', async (e) => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                await handleSendNote();\r\n            });\r\n        }\r\n\r\n        // \u4FEE\u6539 Enter \u952E\u5904\r\n        input.addEventListener('keydown', async (e) => {\r\n            if (e.key === 'Enter' && !e.shiftKey) {\r\n                e.preventDefault();\r\n                await handleSendNote();\r\n            }\r\n        });\r\n\r\n        // \u4FEE\u6539\u6807\u7B7E\u5165\u5904\u7406\r\n        if (tagInput) {\r\n            tagInput.addEventListener('keydown', (e) => {\r\n                if (e.key === ' ' && tagInput.value.trim()) {\r\n                    e.preventDefault();\r\n                    const tagText = tagInput.value.trim();\r\n                    \r\n                    // \u6DFB\u52A0\u6807\u7B7E\uFF08\u9ED8\u8BA4\u4E3A\u9AD8\u4EAE\u72B6\u6001\uFF09\r\n                    if (tagText && !tags.has(tagText)) {\r\n                        const tagItem = tagsContainer?.createDiv('tag-item');\r\n                        tagItem?.addClass('active'); // \u9ED8\u8BA4\u4E3A\u4EAE\u72B6\u6001\r\n                        tagItem?.setText(tagText);\r\n                        \r\n                        // \u6DFB\u52A0\u5220\u9664\u6309\u94AE\r\n                        const removeBtn = tagItem?.createDiv('remove-tag');\r\n                        removeBtn?.setText('\u00D7');\r\n                        removeBtn?.addEventListener('click', (e) => {\r\n                            e.stopPropagation();\r\n                            tags.delete(tagText);\r\n                            tagItem?.remove();\r\n                        });\r\n                        \r\n                        // \u6DFB\u52A0\u70B9\u51FB\u5207\u6362\u6001\u4E8B\u4EF6\r\n                        tagItem?.addEventListener('click', (e) => {\r\n                            if (e.target !== removeBtn) {\r\n                                tagItem.toggleClass('active', !tagItem.hasClass('active')); // \u6DFB\u52A0\u7B2C\u4E8C\u4E2A\u53C2\u6570\r\n                                tagItem.toggleClass('inactive', tagItem.hasClass('active')); // \u6DFB\u52A0\u7B2C\u4E8C\u4E2A\u53C2\u6570\r\n                            }\r\n                        });\r\n                        \r\n                        tags.add(tagText);\r\n                        tagInput.value = '';\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // \u901F\u7B14\u8BB0-\u6E05\u7406\u5165\r\n    private clearQuickNoteInputs(\r\n        titleInput: HTMLInputElement | null,\r\n        contentInput: HTMLTextAreaElement,\r\n        tags: Set<string>,\r\n        tagsContainer: HTMLElement | null,\r\n        tagInput: HTMLInputElement | null\r\n    ) {\r\n        // \u6E05\u6807\u9898\r\n        if (titleInput) {\r\n            titleInput.value = '';\r\n        }\r\n\r\n        // \u6E05\u9664\u5185\u5BB9\r\n        contentInput.value = '';\r\n        contentInput.style.height = '24px';\r\n        contentInput.style.overflowY = 'hidden';\r\n\r\n        // \u91CD\u5DE5\u5177\u680F\u6309\u94AE\u72B6\u6001\r\n        const toolbar = contentInput.closest('.quick-note-bar')?.querySelector('.quick-note-toolbar');\r\n        if (toolbar) {\r\n            toolbar.querySelectorAll('.quick-note-btn').forEach(btn => {\r\n                btn.removeClass('active');\r\n            });\r\n        }\r\n    }\r\n\r\n    // \u62D6\u62FD\r\n    private setupDraggable(element: HTMLElement) {\r\n        let isDragging = false;\r\n        let offsetX: number;\r\n        let offsetY: number;\r\n        let startX: number;\r\n        let startY: number;\r\n        let isClick = true; // \u65B0\u589E\u53D8\u91CF\uFF0C\u7528\u4E8E\u5224\u65AD\u662F\u5426\u4E3A\u70B9\u51FB\u4E8B\u4EF6\r\n\r\n        const dragStart = (e: MouseEvent) => {\r\n            // \u68C0\u67E5\u662F\u5426\u5E94\u8BE5\u5141\u8BB8\u62D6\r\n            const target = e.target as HTMLElement;\r\n            if (!element.hasClass('minimized') && (\r\n                target.closest('.quick-note-input') || \r\n                target.closest('.quick-note-btn') || \r\n                target.closest('.control-button') ||\r\n                target.closest('.quick-note-send') ||\r\n                target.closest('.tag-input') ||\r\n                target.closest('.quick-note-title')\r\n            )) {\r\n                return;\r\n            }\r\n\r\n            isDragging = true;\r\n            isClick = true; // \u521D\u59CB\u72B6\u6001\u8BBE\u4E3A\u70B9\u51FB\r\n            startX = e.clientX;\r\n            startY = e.clientY;\r\n\r\n            // \u83B7\u5404\u79CD\u4F4D\u7F6E\u4FE1\u606F\r\n            const elementRect = element.getBoundingClientRect();\r\n            const workspaceLeafContent = this.containerEl.closest('.workspace-leaf-content');\r\n            \r\n            offsetX = e.clientX - elementRect.left;\r\n            offsetY = e.clientY - elementRect.top;\r\n            \r\n            element.style.transition = 'none';\r\n            element.style.cursor = 'grabbing';\r\n            element.addClass('dragging');\r\n            \r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        };\r\n\r\n        const drag = (e: MouseEvent) => {\r\n            if (!isDragging) return;\r\n            \r\n            // \u8BA1\u7B97\u52A8\u8DDD\u79BB\r\n            const moveX = Math.abs(e.clientX - startX);\r\n            const moveY = Math.abs(e.clientY - startY);\r\n            \r\n            // \u5982\u679C\u79FB\u52A8\u8D85\u8FC7\u9608\u503C\u5219\u4E0D\u662F\u70B9\u51FB\r\n            if (moveX > 5 || moveY > 5) {\r\n                isClick = false;\r\n            }\r\n            \r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            \r\n            const workspaceLeafContent = this.containerEl.closest('.workspace-leaf-content');\r\n            if (!workspaceLeafContent) return;\r\n            \r\n            const leafRect = workspaceLeafContent.getBoundingClientRect();\r\n            const newX = e.clientX - leafRect.left - offsetX;\r\n            const newY = e.clientY - leafRect.top - offsetY;\r\n\r\n            const maxX = (workspaceLeafContent as HTMLElement).offsetWidth - (element as HTMLElement).offsetWidth;\r\n            const maxY = (workspaceLeafContent as HTMLElement).offsetHeight - (element as HTMLElement).offsetHeight;\r\n            \r\n            const boundedX = Math.max(0, Math.min(newX, maxX));\r\n            const boundedY = Math.max(0, Math.min(newY, maxY));\r\n\r\n            element.style.left = `${boundedX}px`;\r\n            element.style.top = `${boundedY}px`;\r\n            element.style.transform = 'none';\r\n        };\r\n\r\n        const dragEnd = (e: MouseEvent) => {\r\n            if (!isDragging) return;\r\n            \r\n            isDragging = false;\r\n            element.style.transition = 'all 0.2s ease';\r\n            element.style.cursor = element.hasClass('minimized') ? 'grab' : 'default';\r\n            element.removeClass('dragging');\r\n            \r\n            // \u53EA\u6709\u5728\u6700\u5C0F\u5316\u72B6\u6001\u4E0B\u4E14\u662F\u70B9\u51FB\u65F6\u624D\u5C55\u5F00\r\n            if (element.hasClass('minimized') && isClick) {\r\n                this.restoreQuickNote(element);\r\n            }\r\n            \r\n            e.stopPropagation();\r\n        };\r\n\r\n  \r\n        element.addEventListener('mousedown', dragStart);\r\n        document.addEventListener('mousemove', drag);\r\n        document.addEventListener('mouseup', dragEnd);\r\n\r\n        const resizeObserver = new ResizeObserver(() => {\r\n            if (!isDragging && !element.hasClass('minimized')) {\r\n                element.style.left = '50%';\r\n                element.style.top = '20px';\r\n                element.style.transform = 'translateX(-50%)';\r\n            }\r\n        });\r\n        \r\n        const workspaceLeafContent = this.containerEl.closest('.workspace-leaf-content');\r\n        if (workspaceLeafContent) {\r\n            resizeObserver.observe(workspaceLeafContent);\r\n        }\r\n\r\n        element.addEventListener('selectstart', (e) => {\r\n            if (isDragging) {\r\n                e.preventDefault();\r\n            }\r\n        });\r\n    }\r\n\r\n    // \u4FDD\u5B58\u6700\u8FD1\u6807\u7B7E\r\n    private saveRecentTags(tags: string[]) {\r\n        localStorage.setItem('recent-tags', JSON.stringify(tags));\r\n    }\r\n\r\n    // \u52A0\u8F7D\u6700\u8FD1\u6807\u7B7E\r\n    private loadRecentTags(): string[] {\r\n        const saved = localStorage.getItem('recent-tags');\r\n        return saved ? JSON.parse(saved) : [];\r\n    }\r\n\r\n    // \u5FEB\u901F\u7B14-\u6700\u5C0F\u5316\r\n    private minimizeQuickNote(element: HTMLElement) {\r\n        const workspaceLeafContent = this.containerEl.closest('.workspace-leaf-content');\r\n        if (!workspaceLeafContent) return;\r\n        \r\n        const leafRect = workspaceLeafContent.getBoundingClientRect();\r\n        const elementRect = element.getBoundingClientRect();\r\n        const position = this.getQuickNotePosition(element);\r\n        \r\n        // \u8BA1\u7B97\u76F8\u5BF9\u4E8E workspace-leaf-content \u4F4D\u7F6E\r\n        const relativeLeft = elementRect.left - leafRect.left;\r\n        const relativeTop = elementRect.top - leafRect.top;\r\n        \r\n        // \u8BBE\u6700\u5C0F\u5316\u5C3A\u5BF8\r\n        const minimizedSize = 40;\r\n        element.style.width = `${minimizedSize}px`;\r\n        element.style.height = `${minimizedSize}px`;\r\n        \r\n        // \u6839\u636E\u4F4D\u7F6E\u8BA1\u7B97\u6700\u5316\u540E\u7684\u4F4D\u7F6E\r\n        switch (position) {\r\n            case 'top-right':\r\n                element.style.left = `${relativeLeft + (element.offsetWidth - minimizedSize)}px`;\r\n                element.style.top = `${relativeTop}px`;\r\n                break;\r\n            case 'top-left':\r\n                element.style.left = `${relativeLeft}px`;\r\n                element.style.top = `${relativeTop}px`;\r\n                break;\r\n            case 'bottom-right':\r\n                element.style.left = `${relativeLeft + (element.offsetWidth - minimizedSize)}px`;\r\n                element.style.top = `${relativeTop}px`;\r\n                break;\r\n            case 'bottom-left':\r\n                element.style.left = `${relativeLeft}px`;\r\n                element.style.top = `${relativeTop}px`;\r\n                break;\r\n            default:\r\n                // \u5C45\u6700\u5C0F\u5316\r\n                element.style.left = '50%';\r\n                element.style.transform = 'translateX(-50%)';\r\n        }\r\n        \r\n        // \u6DFB\u52A0\u6700\u5C0F\u5316\u7C7B\r\n        element.addClass('minimized');\r\n\r\n        // \u79FB\u9664\u80CC\u666F\u6A21\u7CCA\r\n        const backdrop = this.containerEl.querySelector('.quick-note-backdrop');\r\n        backdrop?.removeClass('active');\r\n    }\r\n\r\n    // \u5FEB\u901F\u7B14\u8BB0-\u6062\u590D\r\n    private restoreQuickNote(element: HTMLElement) {\r\n        if (!element.hasClass('minimized')) return;\r\n        \r\n        const workspaceLeafContent = this.containerEl.closest('.workspace-leaf-content');\r\n        if (!workspaceLeafContent) return;\r\n        \r\n        const leafRect = workspaceLeafContent.getBoundingClientRect();\r\n        const elementRect = element.getBoundingClientRect();\r\n        const position = this.getQuickNotePosition(element);\r\n        \r\n        // \u79FB\u9664\u6700\u5C0F\u5316\u7C7B\r\n        element.removeClass('minimized');\r\n        \r\n        // \u8BBE\u7F6E\u5C55\u5F00\u5C3A\u5BF8\r\n        element.style.width = '800px';\r\n        element.style.removeProperty('height');\r\n        \r\n        // \u8BA1\u7B97\u5BF9\u4E8E workspace-leaf-content \u7684\u7F6E\r\n        const relativeLeft = elementRect.left - leafRect.left;\r\n        const relativeTop = elementRect.top - leafRect.top;\r\n        \r\n        // \u6839\u636E\u4F4D\u7F6E\u8BA1\u7B97\u5C55\u5F00\u540E\u7684\u4F4D\u7F6E\r\n        switch (position) {\r\n            case 'top-right':\r\n                element.style.left = `${relativeLeft - (800 - 40)}px`; // 800\u662F\u5C55\u5F00\u5BBD\u5EA6,40\u662F\u6700\u5C0F\u5316\u5BBD\u5EA6\r\n                element.style.top = `${relativeTop}px`;\r\n                break;\r\n            case 'top-left':\r\n                element.style.left = `${relativeLeft}px`;\r\n                element.style.top = `${relativeTop}px`;\r\n                break;\r\n            case 'bottom-right':\r\n                element.style.left = `${relativeLeft - (800 - 40)}px`;\r\n                element.style.top = `${relativeTop}px`;\r\n                break;\r\n            case 'bottom-left':\r\n                element.style.left = `${relativeLeft}px`;\r\n                element.style.top = `${relativeTop}px`;\r\n                break;\r\n            default:\r\n                // \u5C45\u4E2D\u5C55\u5F00\r\n                element.style.left = '50%';\r\n                element.style.top = '20px';\r\n                element.style.transform = 'translateX(-50%)';\r\n        }\r\n\r\n        // \u6FC0\u6D3B\u80CC\u666F\u6A21\u7CCA\r\n        const backdrop = this.containerEl.querySelector('.quick-note-backdrop');\r\n        backdrop?.addClass('active');\r\n    }\r\n\r\n    // \u83B7\u53D6\u5FEB\u901F\u7B14\u8BB0\u4F4D\u7F6E\r\n    private getQuickNotePosition(element: HTMLElement) {\r\n        const workspaceLeafContent = this.containerEl.closest('.workspace-leaf-content');\r\n        if (!workspaceLeafContent) return 'center';\r\n\r\n        const leafRect = workspaceLeafContent.getBoundingClientRect();\r\n        const elementRect = element.getBoundingClientRect();\r\n        \r\n        // \u8BA1\u5143\u7D20\u4E2D\u70B9\r\n        const centerX = elementRect.left + elementRect.width / 2;\r\n        const centerY = elementRect.top + elementRect.height / 2;\r\n        \r\n        // \u8BA1\u7B97\u76F8\u5BF9\u4F4D\u7F6E\r\n        const isRight = centerX > leafRect.left + leafRect.width / 2;\r\n        const isBottom = centerY > leafRect.top + leafRect.height / 2;\r\n        \r\n        if (isRight && !isBottom) return 'top-right';\r\n        if (!isRight && !isBottom) return 'top-left';\r\n        if (isRight && isBottom) return 'bottom-right';\r\n        if (!isRight && isBottom) return 'bottom-left';\r\n        return 'center';\r\n    }\r\n\r\n    // \u7B14\u8BB0\u5185\u5BB9-\u89C2\u5BDF\r\n    private observeNoteContent(element: HTMLElement, file: TFile) {\r\n        if (this.intersectionObserver) {\r\n            this.intersectionObserver.observe(element);\r\n        }\r\n    }\r\n\r\n    // \u7B14\u8BB0\u5185\u5BB9-\u8F7D\r\n    private async loadNoteContent(container: HTMLElement, file: TFile) {\r\n        if (this.loadedNotes.has(file.path)) return;\r\n        \r\n        try {\r\n            container.empty(); // \u6E05\u9664\u8F7D\u4F4D\u7B26\r\n            \r\n            const content = await this.app.vault.read(file);\r\n            await MarkdownRenderer.render(\r\n                this.app,\r\n                content,\r\n                container,\r\n                file.path,\r\n                this\r\n            );\r\n            \r\n            // \u5982\u679C\u6709\u641C\u7D22\u8BCD\uFF0C\u5904\u7406\u9AD8\u4EAE\r\n            if (this.currentSearchTerm) {\r\n                const contentElements = container.querySelectorAll('p, li, h1, h2, h3, h4, h5, h6');\r\n                contentElements.forEach(element => {\r\n                    const originalText = element.textContent || '';\r\n                    if (originalText.toLowerCase().includes(this.currentSearchTerm.toLowerCase())) {\r\n                        element.innerHTML = this.highlightText(originalText, this.currentSearchTerm);\r\n                    }\r\n                });\r\n            }\r\n            \r\n            this.loadedNotes.add(file.path);\r\n            console.log('\u52A0\u8F7D\u7B14\u8BB0\u5185\u5BB9\u6210\u529F:', file.path);\r\n        } catch (error) {\r\n            console.error('\u52A0\u8F7D\u7B14\u8BB0\u5185\u5BB9\u5931\u8D25:', error);\r\n            container.setText('\u52A0\u8F7D\u5931\u8D25');\r\n        }\r\n    }\r\n\r\n    // \u5173\u95ED\r\n    async onClose() {\r\n        if (this.intersectionObserver) {\r\n            this.intersectionObserver.disconnect();\r\n        }\r\n        this.loadedNotes.clear();\r\n        // ... \u5176\u4ED6\u6E05\u7406\u7801 ...\r\n    }\r\n\r\n    // \u72B6\u6001\u680F-\u66F4\u65B0\u52A0\u8F7D\u72B6\u6001\r\n    private updateLoadingStatus(message: string) {\r\n        if (!this.loadingStatus) return;\r\n        \r\n        const loadingIndicator = this.loadingStatus.querySelector('.loading-indicator');\r\n        if (this.isLoading) {\r\n            // \u52A0\u8F7D\u4E2D\u72B6\u6001\r\n            loadingIndicator?.addClass('loading');\r\n            this.loadingStatus.innerHTML = `\r\n                <div class=\"loading-indicator loading\">\r\n                    <div class=\"loading-spinner\"></div>\r\n                    <span>${message}</span>\r\n                </div>\r\n            `;\r\n        } else {\r\n            // \u52A0\u8F7D\u5B8C\u6210\u72B6\u6001 - \u4E0D\u663E\u793A\u52A0\u8F7D\u52A8\u753B\r\n            loadingIndicator?.removeClass('loading');\r\n            this.loadingStatus.innerHTML = `\r\n                <div class=\"loading-indicator\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n                        <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"></path>\r\n                        <polyline points=\"22 4 12 14.01 9 11.01\"></polyline>\r\n                    </svg>\r\n                    <span>${message}</span>\r\n                </div>\r\n            `;\r\n        }\r\n    }\r\n\r\n    // \u521B\u5EFA\u65F6\u95F4\u8F74\u89C6\u56FE\r\n    private async createTimelineView() {\r\n        try {\r\n            // \u6E05\u5BB9\u5668\u5185\u5BB9\r\n            this.container.empty();\r\n            \r\n            console.log('\u5F00\u59CB\u521B\u5EFA\u65F6\u95F4\u8F74\u89C6\u56FE...');\r\n            const timelineContainer = this.container.createDiv('timeline-container');\r\n            \r\n            // \u521D\u59CB\u5316\u52A0\u8F7D\u6307\u793A\u5668\r\n            this.timelineLoadingIndicator.innerHTML = `\r\n                <div class=\"loading-spinner\"></div>\r\n                <div class=\"loading-text\">\u52A0\u8F7D\u4E2D...</div>\r\n            `;\r\n            this.timelineLoadingIndicator.style.display = 'none';\r\n            timelineContainer.appendChild(this.timelineLoadingIndicator);\r\n            \r\n            // \u91CD\u7F6E\u5206\u9875\u72B6\u6001\r\n            this.timelineCurrentPage = 1;\r\n            this.timelineHasMore = true;\r\n            this.timelineIsLoading = false;\r\n            \r\n            // \u52A0\u8F7D\u7B2C\u4E00\u9875\r\n            await this.loadTimelinePage(timelineContainer);\r\n            \r\n            // \u8BBE\u7F6E\u6EDA\u52A8\u76D1\u542C\r\n            this.setupTimelineScroll(timelineContainer);\r\n\r\n            // \u5E94\u7528\u89C6\u56FE\u8BBE\u7F6E\r\n            this.updateCardLayout();\r\n            \r\n        } catch (error) {\r\n            console.error('\u521B\u5EFA\u65F6\u8F74\u89C6\u56FE\u5931\u8D25:', error);\r\n            new Notice('\u521B\u5EFA\u65F6\u95F4\u8F74\u89C6\u56FE\u5931\u8D25');\r\n            this.updateLoadingStatus('\u521B\u5EFA\u65F6\u95F4\u89C6\u56FE\u5931\u8D25');\r\n        }\r\n    }\r\n\r\n    // \u521B\u5EFA\u5361\u7247\u8BBE\u7F6E\u9762\u677F\r\n    private createCardSettings(toolbar: HTMLElement) {\r\n        const settingsContainer = toolbar.createDiv('card-settings-container');\r\n        \r\n        // \u521B\u5EFA\u8BBE\u7F6E\u6309\u94AE\r\n        const settingsBtn = settingsContainer.createEl('button', {\r\n            cls: 'card-settings-button',\r\n        });\r\n        settingsBtn.innerHTML = `\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"3\"></circle><path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"></path></svg>\r\n            <span>\u5361\u7247\u8BBE\u7F6E</span>\r\n        `;\r\n\r\n        // \u521B\u5EFA\u8BBE\u7F6E\u9762\u677F\r\n        const settingsPanel = settingsContainer.createDiv('card-settings-panel');\r\n        settingsPanel.style.display = 'none';\r\n\r\n        // \u5207\u6362\u9762\u677F\u663E\u793A\u65F6\u66F4\u65B0\u8BBE\u7F6E\u72B6\u6001\r\n        settingsBtn.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            const isVisible = settingsPanel.style.display === 'block';\r\n            \r\n            if (!isVisible) {\r\n                // \u6253\u5F00\u9762\u677F\u65F6\uFF0C\u66F4\u65B0\u8BBE\u7F6E\u72B6\u6001\u4EE5\u53CD\u6620\u5F53\u524D\u89C6\u56FE\u7684\u8BBE\r\n                this.updateSettingsPanel(settingsPanel);\r\n            }\r\n            \r\n            settingsPanel.style.display = isVisible ? 'none' : 'block';\r\n        });\r\n\r\n        // \u70B9\u51FB\u5176\u4ED6\u5730\u65B9\u5173\u95ED\u9762\u677F\r\n        document.addEventListener('click', (e) => {\r\n            if (!settingsContainer.contains(e.target as Node)) {\r\n                settingsPanel.style.display = 'none';\r\n            }\r\n        });\r\n    }\r\n\r\n    // \u66F4\u65B0\u8BBE\u7F6E\u9762\u677F\u72B6\u6001\r\n    private updateSettingsPanel(settingsPanel: HTMLElement) {\r\n        // \u7A7A\u73B0\u6709\u8BBE\u7F6E\r\n        settingsPanel.empty();\r\n        // \u83B7\u53D6\u5F53\u524D\u89C6\u56FE\u7684\u8BBE\u7F6E\r\n        const currentSettings = this.cardSettings[this.currentView as keyof typeof this.cardSettings];\r\n\r\n        // \u6DFB\u52A0\u57FA\u672C\u8BBE\u7F6E\u9009\u9879\r\n        const basicSettings = settingsPanel.createDiv('settings-section');\r\n        basicSettings.createEl('h3', { text: '\u57FA\u672C\u8BBE\u7F6E' });\r\n\r\n        // \u663E\u793A\u65E5\u671F\u9009\r\n        const showDateOption = this.createCheckboxOption(basicSettings, '\u663E\u793A\u671F', currentSettings.showDate);\r\n       \r\n        showDateOption.addEventListener('change', (e) => {\r\n            currentSettings.showDate = (e.target as HTMLInputElement).checked;\r\n            const dateElements = this.container.querySelectorAll('.note-date');\r\n            dateElements.forEach(element => {\r\n                // \u5982\u679C\u663E\u793A\u65E5\u671F\uFF0C\u5219\u663E\uFF0C\u5426\u5219\u9690\u85CF\r\n                if (currentSettings.showDate) {\r\n                    element.removeClass('hide');\r\n                    element.addClass('show');\r\n                } else {\r\n                    element.removeClass('show');\r\n                    element.addClass('hide');\r\n                }\r\n            });\r\n \r\n        });\r\n\r\n        // \u663E\u793A\u5185\u5BB9\u9009\u9879\r\n        const showContentOption = this.createCheckboxOption(basicSettings, '\u663E\u793A\u7B14\u8BB0\u5185\u5BB9', currentSettings.showContent);\r\n        showContentOption.addEventListener('change', (e) => {\r\n            currentSettings.showContent = (e.target as HTMLInputElement).checked;\r\n            // \u6240\u6709\u89C6\u56FE\u7EDF\u4E00\u5904\u7406\u7B14\u5185\u5BB9\u663E\u793A/\u9690\u85CF\r\n            const contentElements = this.container.querySelectorAll('.note-content');\r\n            contentElements.forEach(element => {\r\n                if (currentSettings.showContent) {\r\n                    element.addClass('show');\r\n                } else {\r\n                    element.removeClass('show');\r\n                }\r\n            });\r\n        });\r\n\r\n        // \u6DFB\u52A0\u5E03\u7F6E\r\n        const layoutSettings = settingsPanel.createDiv('settings-section');\r\n        layoutSettings.createEl('h3', { text: '\u5E03\u5C40\u8BBE\u7F6E' });\r\n\r\n        // \u5361\u7247\u9AD8\u5EA6\u8BBE\u7F6E\r\n        this.createSliderOption(layoutSettings, '\u5361\u7247\u9AD8', currentSettings.cardHeight, 200, 500, 10, (value) => {\r\n            currentSettings.cardHeight = value;\r\n            // \u7EDF\u4E00\u5904\u7406\u6240\u6709\u5361\u7247\u9AD8\u5EA6\u8C03\u6574\r\n            this.container.querySelectorAll('.note-card').forEach((card: Element) => {\r\n                if (card instanceof HTMLElement) {\r\n                    card.style.height = `${value}px`;\r\n                }\r\n            });\r\n        });\r\n\r\n        // \u5361\u7247\u95F4\u8DDD\u8BBE\u7F6E\r\n        this.createSliderOption(layoutSettings, '\u5361\u7247\u95F4\u8DDD', currentSettings.cardGap, 0, 40, 4, (value) => {\r\n            currentSettings.cardGap = value;\r\n            if (this.currentView === 'card') {\r\n                // \u5361\u7247\u89C6\u56FE\u65B0\u95F4\u8DDD\r\n                this.container.style.gap = `${value}px`;\r\n            } else if (this.currentView === 'timeline') {\r\n                // \u65F6\u95F4\u8F74\u89C6\u56FE\u66F4\u65B0\u7B14\u8BB0\u5217\u8868\u7684\u95F4\u8DDD\r\n                const notesLists = this.container.querySelectorAll('.timeline-notes-list');\r\n                notesLists.forEach(list => {\r\n                    if (list instanceof HTMLElement) {\r\n                        list.style.gap = `${value}px`;\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        // \u6BCF\u884C\u5361\u7247\u6570\u91CF\u8BBE\u7F6E1\r\n        const updateCardsPerRow = (value: number) => {\r\n\r\n            cardsPerRowInput.value = value.toString();// \u66F4\u65B0\u8F93\u5165\u6846\u7684\u503C\r\n            currentSettings.cardsPerRow = value; // \u66F4\u65B0\u8BBE\u7F6E\r\n            \r\n            if (this.currentView === 'card') {\r\n                // \u53EA\u66F4\u65B0\u7F51\u5E03\u5C40\r\n                const containerWidth = this.container.offsetWidth;\r\n                const totalGap = value >= 0 ? currentSettings.cardGap : 0; // \u786E\u4FDD\u4E0D\u5C0F\u4E8E0\r\n                // \u5927\u5217\u6570\r\n                const maxColumns = Math.floor(containerWidth / (180 + totalGap));\r\n                console.log('containerWidth', containerWidth);\r\n                console.log('totalGap', totalGap);\r\n                console.log('maxColumns', maxColumns);\r\n                // \u5982\u679C\u5BBD\u5EA6\u5C0F\u4E8E150px\uFF0C\u5219repeat\u53D6\u6700\u5927\u7684\u6570\r\n                const repeatValue = value > maxColumns ? maxColumns : value;\r\n                this.container.style.gridTemplateColumns = `repeat(${repeatValue}, minmax(150px, 1fr))`;\r\n            } else if (this.currentView === 'timeline') {\r\n                // \u66F4\u65B0\u95F4\u8F74\u89C6\u56FE\u7684\u7247\u5E03\u5C40\r\n                const notesLists = this.container.querySelectorAll('.timeline-notes-list');\r\n                notesLists.forEach(list => {\r\n                    if (list instanceof HTMLElement) {\r\n                        list.style.gridTemplateColumns = `repeat(${value}, 1fr)`;\r\n                    }\r\n                });\r\n            }\r\n        };\r\n\r\n        const cardsPerRowContainer = layoutSettings.createDiv('setting-item');\r\n        cardsPerRowContainer.createEl('label', { text: '\u6BCF\u884C\u5361\u7247\u6570\u91CF' });\r\n        \r\n        // \u521B\u5EFA\u63A7\u5236\u7EC4\r\n        const controlGroup = cardsPerRowContainer.createDiv('setting-control-group');\r\n        \r\n        // \u51CF\u5C11\u6309\u94AE\r\n        const decreaseBtn = controlGroup.createEl('button', {\r\n            cls: 'cards-per-row-btn decrease',\r\n            text: '-'\r\n        });\r\n        \r\n        // \u6570\u5B57\u8F93\u5165\u6846\r\n        const cardsPerRowInput = controlGroup.createEl('input', {\r\n            type: 'number',\r\n            value: currentSettings.cardsPerRow.toString(),\r\n            placeholder: '\u81EA\u52A8'\r\n        });\r\n        \r\n        // \u52A0\u6309\r\n        const increaseBtn = controlGroup.createEl('button', {\r\n            cls: 'cards-per-row-btn increase',\r\n            text: '+'\r\n        });\r\n\r\n        // \u5C11\u6309\u94AE\u4E8B\u4EF6\r\n        decreaseBtn.addEventListener('click', () => {\r\n            const currentValue = parseInt(cardsPerRowInput.value) || 4; // \u9ED8\u8BA4\u503C\u4E3A4\r\n            if (currentValue > 0) { // \u53EA\u6709\u5F53\u503C\u5927\u4E8E0\u624D\u51CF\u5C11\r\n                updateCardsPerRow(Math.max(1, currentValue - 1)); // \u786E\u4FDD\u4E0D\u5C0F\u4E8E0\r\n            }\r\n        });\r\n\r\n        increaseBtn.addEventListener('click', () => {\r\n            const currentValue = parseInt(cardsPerRowInput.value) || 4;\r\n            updateCardsPerRow(currentValue + 1);\r\n        });\r\n\r\n        // \u8F93\u5165\u6846\u4E8B\r\n        cardsPerRowInput.addEventListener('change', (e) => {\r\n            const value = parseInt((e.target as HTMLInputElement).value);\r\n            updateCardsPerRow(isNaN(value) ? 4 : value);\r\n        });\r\n\r\n        // \u6DFB\u52A0\u6EDA\u8F6E\u652F\u6301\r\n        cardsPerRowInput.addEventListener('wheel', (e) => {\r\n            e.preventDefault(); // \u9632\u6B62\u9875\u9762\u6EDA\u52A8\r\n            if (document.activeElement === cardsPerRowInput) { // \u53EA\u5728\u8F93\u5165\u6846\u83B7\u5F97\u7126\u70B9\u65F6\u54CD\u5E94\r\n                const delta = e.deltaY > 0 ? -1 : 1; // \u5411\u4E0A\u6EDA\u52A8\u589E\u52A0\uFF0C\u5411\u4E0B\u6EDA\u52A8\u51CF\u5C11\r\n                const currentValue = parseInt(cardsPerRowInput.value) || 4;\r\n                updateCardsPerRow(currentValue + delta);\r\n            }\r\n        });\r\n    }\r\n\r\n    // \u521B\u5EFA\u9009\u6846\u9009\u9879\r\n    private createCheckboxOption(container: HTMLElement, label: string, defaultChecked: boolean): HTMLInputElement {\r\n        const settingItem = container.createDiv('setting-item');\r\n        \r\n        // \u521B\u5EFA\u590D\u9009\u6846\r\n        const checkbox = document.createElement('input');\r\n        checkbox.type = 'checkbox';\r\n        checkbox.checked = defaultChecked;\r\n        settingItem.appendChild(checkbox);\r\n        \r\n        // \u521B\u5EFA\u6807\u7B7E\r\n        const labelEl = document.createElement('label');\r\n        labelEl.textContent = label;\r\n        settingItem.appendChild(labelEl);\r\n        \r\n        return checkbox;\r\n    }\r\n\r\n    // \u65B0\u5361\u7247\u5E03\u5C40\r\n    private updateCardLayout() {\r\n        const container = this.container;\r\n        if (!container) return;\r\n\r\n        const currentSettings = this.cardSettings[this.currentView as keyof typeof this.cardSettings];\r\n\r\n        // \u66F4\u65B0\u5BB9\u5668\u6837\u5F0F\r\n        container.style.gap = `${currentSettings.cardGap}px`;\r\n\r\n        // \u66F4\u65B0\u6240\u6709\u5361\u7247\u7684\u9AD8\u5EA6\r\n        container.querySelectorAll('.note-card').forEach((card: Element) => {\r\n            if (card instanceof HTMLElement) {\r\n                card.style.height = `${currentSettings.cardHeight}px`;\r\n            }\r\n        });\r\n\r\n        // \u8BA1\u7B97\u6BCF\u884C\u6700\u5927\u53EF\u7684\u5361\u7247\u6570\u91CF\r\n        const minCardWidth = 150;\r\n        const containerWidth = container.offsetWidth;\r\n        const maxPossibleCards = Math.floor((containerWidth + currentSettings.cardGap) / (minCardWidth + currentSettings.cardGap));\r\n\r\n        // \u8BA1\u7B97\u6BCF\u884C\u5361\u7247\u6570\u91CF\r\n        if (currentSettings.cardsPerRow > 0) {\r\n            // \u56FA\u5B9A\u6BCF\u884C\u5361\u7247\u6570\u91CF\uFF0C\u4F46\u4E0D\u8D85\u8FC7\u6700\u5927\u53EF\u80FD\u6570\u91CF\r\n            const columns = Math.min(currentSettings.cardsPerRow, maxPossibleCards);\r\n            const totalGap = currentSettings.cardGap * (columns - 1);\r\n            const cardWidth = (containerWidth - totalGap) / columns;\r\n            container.style.gridTemplateColumns = `repeat(${columns}, ${cardWidth}px)`;\r\n        } else {\r\n            // \u81EA\u52A8\u8BA1\u7B97\u6BCF\u884C\u5361\u7247\u6570\u91CF\uFF08\u4F7F\u7528\u89C6\u56FE\u8BA4\u503C\uFF09\r\n            const defaultColumns = this.cardSettings[this.currentView as keyof typeof this.cardSettings].cardsPerRow;\r\n            const columns = Math.min(defaultColumns, maxPossibleCards);\r\n            const totalGap = currentSettings.cardGap * (columns - 1);\r\n            const cardWidth = (containerWidth - totalGap) / columns;\r\n            container.style.gridTemplateColumns = `repeat(${columns}, ${cardWidth}px)`;\r\n        }\r\n    }\r\n\r\n    // \u8BBE\u7F6E\u89C2\u5BDF\u5668\r\n    private setupIntersectionObserver(): void {\r\n        this.intersectionObserver = new IntersectionObserver(\r\n            (entries) => {\r\n                entries.forEach(async (entry) => {\r\n                    if (entry.isIntersecting) {\r\n                        const noteContent = entry.target as HTMLElement;\r\n                        const filePath = noteContent.getAttribute('data-path');\r\n                        \r\n                        if (filePath && !this.loadedNotes.has(filePath)) {\r\n                            const file = this.app.vault.getAbstractFileByPath(filePath);\r\n                            if (file instanceof TFile) {\r\n                                await this.loadNoteContent(noteContent, file);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            {\r\n                rootMargin: '100px',\r\n                threshold: 0.1\r\n            }\r\n        );\r\n    }\r\n\r\n    // \u521B\u5EFA\u6ED1\u5757\u9009\r\n    private createSliderOption(\r\n        container: HTMLElement, \r\n        label: string, \r\n        defaultValue: number, \r\n        min: number, \r\n        max: number, \r\n        step: number, \r\n        onChange: (value: number) => void\r\n    ): void {\r\n        const settingItem = container.createDiv('setting-item');\r\n        settingItem.createEl('label', { text: label });\r\n        \r\n        const controlGroup = settingItem.createDiv('setting-control-group');\r\n        \r\n        // \u51CF\u5C11\u6309\u94AE\r\n        const decreaseBtn = controlGroup.createEl('button', {\r\n            cls: 'setting-control-btn decrease',\r\n            text: '-'\r\n        });\r\n        \r\n        // \u521B\u5EFA\u6570\u5B57\u8F93\u5165\u6846\r\n        const numberInput = controlGroup.createEl('input', {\r\n            type: 'number',\r\n            value: defaultValue.toString(),\r\n            attr: {\r\n                min: min.toString(),\r\n                max: max.toString(),\r\n                step: step.toString()\r\n            }\r\n        });\r\n        \r\n        // \u589E\u52A0\u6309\u94AE\r\n        const increaseBtn = controlGroup.createEl('button', {\r\n            cls: 'setting-control-btn increase',\r\n            text: '+'\r\n        });\r\n\r\n        // \u66F4\u65B0\u503C\u7684\u51FD\u6570\r\n        const updateValue = (value: number) => {\r\n            // \u786E\u4FDD\u503C\u5728\u8303\u56F4\u5185\r\n            value = Math.max(min, Math.min(max, value));\r\n            numberInput.value = value.toString();\r\n            onChange(value);\r\n        };\r\n\r\n        // \u6DFB\u6309\u94AE\u4E8B\u4EF6\r\n        decreaseBtn.addEventListener('click', () => {\r\n            const currentValue = parseInt(numberInput.value) || defaultValue;\r\n            updateValue(currentValue - step);\r\n        });\r\n\r\n        increaseBtn.addEventListener('click', () => {\r\n            const currentValue = parseInt(numberInput.value) || defaultValue;\r\n            updateValue(currentValue + step);\r\n        });\r\n\r\n        // \u5165\u6846\u4E8B\u4EF6\r\n        numberInput.addEventListener('change', (e) => {\r\n            const value = parseInt((e.target as HTMLInputElement).value);\r\n            updateValue(isNaN(value) ? defaultValue : value);\r\n        });\r\n\r\n        // \u6DFB\u52A0\u6EDA\u8F6E\u652F\u6301\r\n        numberInput.addEventListener('wheel', (e) => {\r\n            e.preventDefault(); // \u9632\u6B62\u9875\u9762\u6EDA\u52A8\r\n            if (document.activeElement === numberInput) { // \u53EA\u5728\u8F93\u5165\u6846\u83B7\u5F97\u7126\u70B9\u65F6\u54CD\u5E94\r\n                const delta = e.deltaY > 0 ? -step : step;\r\n                const currentValue = parseInt(numberInput.value) || defaultValue;\r\n                updateValue(currentValue + delta);\r\n            }\r\n        });\r\n    }\r\n\r\n    // \u6DFB\u52A0\u83B7\u53D6\u5468\u6570\u7684\u65B9\u6CD5\r\n    private getWeekNumber(date: Date): number {\r\n        const target = new Date(date.valueOf());\r\n        const dayNr = (date.getDay() + 6) % 7; // \u8C03\u6574\u4E3A\u5468\u4E00\u4E3A\u4E00\u5468\u7684\u5F00\u59CB\r\n        target.setDate(target.getDate() - dayNr + 3);\r\n        const firstThursday = target.valueOf();\r\n        target.setMonth(0, 1);\r\n        if (target.getDay() !== 4) {\r\n            target.setMonth(0, 1 + ((4 - target.getDay()) + 7) % 7);\r\n        }\r\n        const weekNum = 1 + Math.ceil((firstThursday - target.valueOf()) / 604800000);\r\n        console.log(`\u8BA1\u7B97\u5468\u6570 - \u671F:${date.toISOString()}, \u5468\u6570:${weekNum}`);\r\n        return weekNum;\r\n    }\r\n\r\n    // \u521B\u5EFA\u5468\u89C6\u56FE\r\n    private async createWeekView() {\r\n        // \u786E\u5F53\u524D\u6B63\u5728\u52A0\u8F7D\u7684\u5468\u89C6\u56FE\r\n        if (this.currentLoadingView !== 'week') {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            console.log('\u5F00\u59CB\u521B\u5EFA\u5468\u56FE');\r\n            this.container.empty();\r\n            const weekContainer = this.container.createDiv('week-view');\r\n            \r\n            // \u521B\u5EFA\u5468\u89C6\u56FE\u5934\u90E8\r\n            const header = weekContainer.createDiv('week-header');\r\n            const navGroup = header.createDiv('week-nav-group');\r\n            \r\n            // \u4E0A\u4E00\u5468\u6309\u94AE\r\n            const prevWeekBtn = navGroup.createEl('button', { \r\n                cls: 'week-nav-btn',\r\n                attr: { title: '\u4E0A\u4E00\u5468' }\r\n            });\r\n            prevWeekBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"15 18 9 12 15 6\"></polyline></svg>';\r\n            \r\n            // \u663E\u793A\u5F53\u524D\u5468\u4FE1\u606F\r\n            const weekInfo = navGroup.createDiv('week-info');\r\n            const currentMonth = this.getMonthForWeek(this.currentYear, this.currentWeek);\r\n            weekInfo.setText(`${this.currentYear}\u5E74${currentMonth}\u6708 \u7B2C${this.currentWeek}\u5468`);\r\n            \r\n            // \u6DFB\u52A0\u672C\u5468\u6309\u94AE\r\n            const currentWeekBtn = navGroup.createEl('button', {\r\n                cls: 'week-nav-btn current-week',\r\n                attr: { title: '\u8FD4\u56DE\u672C\u5468' }\r\n            });\r\n            currentWeekBtn.innerHTML = `\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n                    <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\r\n                    <polyline points=\"12 6 12 12 16 14\"></polyline>\r\n                </svg>\r\n            `;\r\n            \r\n            // \u4E0B\u4E00\u5468\u6309\u94AE\r\n            const nextWeekBtn = navGroup.createEl('button', { \r\n                cls: 'week-nav-btn',\r\n                attr: { title: '\u4E0B\u4E00\u5468' }\r\n            });\r\n            nextWeekBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"9 18 15 12 9 6\"></polyline></svg>';\r\n\r\n            // \u6DFB\u52A0\u5BFC\u822A\u4E8B\u4EF6\r\n            prevWeekBtn.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                this.navigateWeek(-1);\r\n            });\r\n            \r\n            currentWeekBtn.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                this.goToCurrentWeek();\r\n            });\r\n            \r\n            nextWeekBtn.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                this.navigateWeek(1);\r\n            });\r\n\r\n            // \u521B\u5EFA\u5468\u89C6\u56FE\u5185\u5BB9\u533A\u57DF\r\n            const weekContent = weekContainer.createDiv('week-content');\r\n            \r\n            // \u83B7\u53D6\u672C\u5468\u7684\u65E5\u671F\u8303\u56F4\r\n            const weekDates = getWeekDates(this.currentYear, this.currentWeek);\r\n            \r\n            // \u521B\u5EFA\u65E5\u671F\u5934\u90E8\r\n            const daysHeader = weekContent.createDiv('week-days-header');\r\n            // \u4FEE\u6539\u987A\u5E8F\uFF0C\u5C06\u5468\u65E5\u653E\u5230\u6700\u540E\r\n            const weekdays = ['\u5468\u4E00', '\u5468\u4E8C', '\u5468\u4E09', '\u5468\u56DB', '\u5468\u4E94', '\u5468\u516D', '\u5468\u65E5'];\r\n            weekdays.forEach((day, index) => {\r\n                const dayHeader = daysHeader.createDiv('week-day-header');\r\n                // \u8C03\u6574\u65E5\u671F\u7D22\u5F15\uFF0C\u5C06\u5468\u65E5\u5BF9\u5E94\u7684\u65E5\u671F\u653E\u5230\u6700\u540E\r\n                const dateIndex = index === 6 ? 0 : index + 1;\r\n                const date = weekDates[dateIndex];\r\n                dayHeader.innerHTML = `\r\n                    <div class=\"weekday-name\">${day}</div>\r\n                    <div class=\"date-number\">${date.getDate()}</div>\r\n                `;\r\n            });\r\n\r\n            // \u521B\u5EFA\u7B14\u8BB0\u5BB9\u5668\r\n            const notesContainer = weekContent.createDiv('week-notes-container');\r\n            \r\n            // \u8C03\u6574\u65E5\u671F\u987A\u5E8F\uFF0C\u5C06\u5468\u65E5\u7684\u7B14\u8BB0\u653E\u5230\u6700\u540E\r\n            const reorderedDates = [\r\n                ...weekDates.slice(1), // \u5468\u4E00\u5230\u5468\u516D\r\n                weekDates[0]           // \u5468\r\n            ];\r\n            \r\n            // \u4E3A\u6BCF\u4E00\u5929\u521B\u5EFA\u7B14\u8BB0\u5217\u8868\r\n            reorderedDates.forEach(async date => {\r\n                const dayNotes = notesContainer.createDiv('day-notes-column');\r\n                const notes = await this.getNotesForDate(date);\r\n                \r\n                notes.forEach(note => {\r\n                    const noteCard = this.createWeekNoteCard(note);\r\n                    dayNotes.appendChild(noteCard);\r\n                });\r\n            });\r\n\r\n        } catch (error) {\r\n            console.error('\u521B\u5EFA\u5468\u89C6\u56FE\u5931\u8D25:', error);\r\n            new Notice('\u521B\u5EFA\u5468\u89C6\u56FE\u5931\u8D25');\r\n        } finally {\r\n            // \u53EA\u6709\u5F53\u524D\u4ECD\u5728\u52A0\u8F7D\u5468\u89C6\u56FE\u65F6\u624D\u6E05\u9664\u52A0\u8F7D\u72B6\u6001\r\n            if (this.currentLoadingView === 'week') {\r\n                this.currentLoadingView = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    // \u6DFB\u52A0\u8FD4\u56DE\u672C\u5468\u7684\u65B9\u6CD5\r\n    private goToCurrentWeek() {\r\n        const today = new Date();\r\n        this.currentYear = today.getFullYear();\r\n        this.currentWeek = this.getWeekNumber(today);\r\n        this.createWeekView();\r\n    }\r\n\r\n    // \u4FEE\u6539\u83B7\u53D6\u6307\u5B9A\u65E5\u671F\u7684\u7B14\u8BB0\u65B9\u6CD5\u52A0\u65E5\u671F\u8303\u56F4\u67E5\r\n    private async getNotesForDate(date: Date): Promise<TFile[]> {\r\n        const files = this.app.vault.getMarkdownFiles();\r\n        return files.filter(file => {\r\n            const fileDate = new Date(file.stat.ctime);\r\n            return this.isSameDay(fileDate, date);\r\n        }).sort((a, b) => b.stat.mtime - a.stat.mtime); // \u6309\u4FEE\u6539\u65F6\u95F4\u964D\u5E8F\u6392\u5E8F\r\n    }\r\n\r\n    // \u6DFB\u52A0\u65E5\u671F\u6BD4\u8F83\u65B9\u6CD5\r\n    private isSameDay(date1: Date, date2: Date): boolean {\r\n        return date1.getFullYear() === date2.getFullYear() &&\r\n               date1.getMonth() === date2.getMonth() &&\r\n               date1.getDate() === date2.getDate();\r\n    }\r\n\r\n\r\n\r\n    // \u521B\u5EFA\u5468\u89C6\u56FE\u7684\u7B14\u8BB0\u5361\u7247\r\n    private createWeekNoteCard(file: TFile): HTMLElement {\r\n        const card = createDiv('week-note-card');\r\n        \r\n        // \u6DFB\u52A0\u6807\u9898\r\n        const title = card.createDiv('week-note-title');\r\n        title.setText(file.basename);\r\n        \r\n        // \u6DFB\u52A0\u4FEE\u6539\u65F6\u95F4\r\n        const time = card.createDiv('week-note-time');\r\n        time.setText(new Date(file.stat.mtime).toLocaleTimeString('zh-CN', {\r\n            hour: '2-digit',\r\n            minute: '2-digit'\r\n        }));\r\n        \r\n        // \u6DFB\u52A0\u70B9\u51FB\u4E8B\u4EF6\r\n        card.addEventListener('click', async () => {\r\n            await openInAppropriateLeaf(this.app,file);\r\n        });\r\n        \r\n        // \u6DFB\u52A0\u9884\u89C8\u529F\u80FD\r\n        card.addEventListener('mouseenter', async () => {\r\n            try {\r\n                this.previewContainer.empty();\r\n                const content = await this.app.vault.read(file);\r\n                await MarkdownRenderer.render(\r\n                    this.app,\r\n                    content,\r\n                    this.previewContainer,\r\n                    file.path,\r\n                    this\r\n                );\r\n            } catch (error) {\r\n                console.error('\u9884\u89C8\u52A0\u8F7D\u5931\u8D25:', error);\r\n            }\r\n        });\r\n        \r\n        return card;\r\n    }\r\n\r\n    // \u5468\u89C6\u56FE\u5BFC\u822A\r\n    private navigateWeek(delta: number) {\r\n        console.log('\u5BFC\u822A\u524D - \u5E74\u4EFD:', this.currentYear, ':', this.currentWeek, '\u589E\u91CF:', delta);\r\n        \r\n        // \u4FDD\u5B58\u5F53\u7684\u548C\u5E74\u4EFD\r\n        let newWeek = this.currentWeek;\r\n        let newYear = this.currentYear;\r\n        \r\n        // \u8BA1\u7B97\u65B0\u7684\u5468\u6570\r\n        newWeek += delta;\r\n        \r\n        // \u5904\u7406\u5E74\u4EFD\u66F4\r\n        const getWeeksInYear = (year: number) => {\r\n            const lastDay = new Date(year, 11, 31);\r\n            const weekNum = this.getWeekNumber(lastDay);\r\n            console.log(`${year}\u5E74\u7684\u603B\u5468\u6570:`, weekNum);\r\n            return weekNum;\r\n        };\r\n        \r\n        if (newWeek < 1) {\r\n            newYear--;\r\n            newWeek = getWeeksInYear(newYear);\r\n            console.log('\u5207\u6362\u5230\u4E0A\u4E00\u5E74\u7684\u6700\u540E\u4E00\u5468');\r\n        } else {\r\n            const weeksInYear = getWeeksInYear(newYear);\r\n            if (newWeek > weeksInYear) {\r\n                newYear++;\r\n                newWeek = 1;\r\n                console.log('\u5207\u6362\u5230\u4E0B\u4E00\u5E74\u7684\u7B2C\u4E00\u5468');\r\n            }\r\n        }\r\n        \r\n        // \u66F4\u65B0\u72B6\u6001\r\n        this.currentYear = newYear;\r\n        this.currentWeek = newWeek;\r\n        \r\n        console.log('\u5BFC\u822A\u540E - \u5E74\u4EFD:', this.currentYear, '\u5468\u6570:', this.currentWeek);\r\n        \r\n        // \u66F4\u65B0\u5468\u4FE1\u606F\u663E\u793A\r\n        const weekInfo = this.containerEl.querySelector('.week-info');\r\n        if (weekInfo) {\r\n            const currentMonth = this.getMonthForWeek(this.currentYear, this.currentWeek);\r\n            weekInfo.setText(`${this.currentYear}\u5E74${currentMonth}\u6708 \u7B2C${this.currentWeek}\u5468`);\r\n        }\r\n\r\n        // \u6E05\u7A7A\u73B0\u6709\u7B14\u8BB0\u5217\u8868\r\n        const notesContainer = this.containerEl.querySelector('.week-notes-container');\r\n        if (notesContainer) {\r\n            notesContainer.empty();\r\n            \r\n            // \u83B7\u53D6\u65B0\u7684\u65E5\u671F\u8303\u56F4\r\n            const weekDates = getWeekDates(this.currentYear, this.currentWeek);\r\n            \r\n            // \u8C03\u6574\u65E5\u671F\u987A\u5E8F\uFF0C\u5C06\u5468\u65E5\u7684\u7B14\u8BB0\u653E\u5230\u6700\u540E\r\n            const reorderedDates = [\r\n                ...weekDates.slice(1), // \u5468\u4E00\u5230\u5468\u516D\r\n                weekDates[0]           // \u5468\u65E5\r\n            ];\r\n            \r\n            // \u4E3A\u6BCF\u4E00\u5929\u521B\u5EFA\u7B14\u8BB0\u5217\u8868\r\n            reorderedDates.forEach(async date => {\r\n                const dayNotes = notesContainer.createDiv('day-notes-column');\r\n                const notes = await this.getNotesForDate(date);\r\n                \r\n                // \u4E3A\u6BCF\u4E2A\u7B14\u8BB0\u521B\u5EFA\u5361\u7247\r\n                notes.forEach(note => {\r\n                    const noteCard = this.createWeekNoteCard(note);\r\n                    dayNotes.appendChild(noteCard);\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    // \u83B7\u53D6\u6307\u5B9A\u5468\u6240\u5728\u7684\u6708\u4EFD\r\n    private getMonthForWeek(year: number, week: number): number {\r\n        try {\r\n            const weekDates = getWeekDates(year, week);\r\n            // \u4F7F\u7528\u5468\u4E2D\u95F4\u7684\u65E5\u671F\uFF08\u5468\u56DB\uFF09\u6765\u786E\u5B9A\u6708\u4EFD\r\n            const middleDate = weekDates[3];\r\n            console.log('\u5468\u4E2D\u95F4\u65E5\u671F:', middleDate);\r\n            return middleDate.getMonth() + 1; // JavaScript \u6708\u4EFD\u4ECE 0 \u5F00\u59CB\uFF0C\u6240\u4EE5\u8981\u52A0 1\r\n        } catch (error) {\r\n            console.error('\u83B7\u53D6\u6708\u4EFD\u5931:', error);\r\n            return 1; // \u8FD4\u56DE\u9ED8\u8BA4\u503C\r\n        }\r\n    }\r\n\r\n    // \u521B\u5EFA\u4E3B\u9875\u89C6\u56FE\r\n    private async createHomeView() {\r\n        // console.log('Creating home view...');\r\n        // console.log('Current modules:', this.homeModules);\r\n        \r\n        if (this.currentLoadingView !== 'home') {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            this.container.empty();\r\n            const homeContainer = this.container.createDiv('home-container');\r\n            \r\n            // \u521B\u5EFA\u6A21\u5757\u7F51\u683C\u5BB9\u5668\r\n            const moduleGrid = homeContainer.createDiv('module-grid');\r\n            \r\n            // \u521B\u5EFA\u4E09\u5217\u5BB9\u5668\r\n            const leftColumn = moduleGrid.createDiv('left-column');\r\n            const centerColumn = moduleGrid.createDiv('center-column');\r\n            const rightColumn = moduleGrid.createDiv('right-column');\r\n            \r\n            // \u6309\u5217\u5206\u7EC4\u6392\u5E8F\u53EF\u89C1\u7684\u6A21\u5757\r\n            const visibleModules = this.homeModules.filter(m => m.visible);\r\n            console.log('Visible modules:', visibleModules);\r\n            \r\n            if (visibleModules.length === 0) {\r\n                console.log('No visible modules found, using default modules');\r\n                this.homeModules = DEFAULT_HOME_MODULES;\r\n                await this.plugin.saveSettings();\r\n            }\r\n            \r\n            // \u5206\u7C7B\u6A21\u5757\r\n            const leftModules = visibleModules.filter(m => m.position === 'left')\r\n                .sort((a, b) => a.order - b.order);\r\n            const centerModules = visibleModules.filter(m => m.position === 'center')\r\n                .sort((a, b) => a.order - b.order);\r\n            const rightModules = visibleModules.filter(m => m.position === 'right')\r\n                .sort((a, b) => a.order - b.order);\r\n            \r\n            console.log('Left modules:', leftModules);\r\n            console.log('Center modules:', centerModules);\r\n            console.log('Right modules:', rightModules);\r\n\r\n            // \u6E32\u5DE6\u4FA7\u5217\u6A21\u5757\r\n            for (const module of leftModules) {\r\n                console.log('Creating left module:', module.id);\r\n                const moduleEl = await this.createModule(leftColumn, module);\r\n                moduleEl.setAttribute('data-position', 'left');\r\n                this.setupModuleDragging(moduleEl);\r\n            }\r\n            \r\n            // \u6E32\u67D3\u4E2D\u95F4\u5217\u6A21\u5757\r\n            for (const module of centerModules) {\r\n                console.log('Creating center module:', module.id);\r\n                const moduleEl = await this.createModule(centerColumn, module);\r\n                moduleEl.setAttribute('data-position', 'center');\r\n                this.setupModuleDragging(moduleEl);\r\n            }\r\n            \r\n            // \u6E32\u67D3\u53F3\u4FA7\u5217\u6A21\u5757\r\n            for (const module of rightModules) {\r\n                console.log('Creating right module:', module.id);\r\n                const moduleEl = await this.createModule(rightColumn, module);\r\n                moduleEl.setAttribute('data-position', 'right');\r\n                this.setupModuleDragging(moduleEl);\r\n            }\r\n\r\n        } catch (error: any) {\r\n            console.error('\u521B\u5EFA\u4E3B\u9875\u89C6\u56FE\u5931\u8D25:', error);\r\n            console.error(error.stack);  // \u6DFB\u52A0\u9519\u8BEF\u5806\u6808\u4FE1\u606F\r\n            new Notice('\u521B\u5EFA\u4E3B\u9875\u89C6\u56FE\u5931\u8D25');\r\n        }\r\n    }\r\n\r\n    // \u521B\u5EFA\u5355\u4E2A\u6A21\u5757\r\n    private async createModule(container: HTMLElement, module: HomeModule): Promise<HTMLElement> {\r\n        const moduleEl = container.createDiv(`module-container ${module.type}-module`);\r\n        moduleEl.setAttribute('data-module-id', module.id); // \u6DFB\u52A0\u6A21\u5757ID\r\n        moduleEl.style.gridColumn = `span ${module.columns || 4}`;\r\n        \r\n        // \u521B\u5EFA\u6A21\u5757\u5934\u90E8\r\n        const header = moduleEl.createDiv('module-header');\r\n        header.createEl('h3', { text: module.name });\r\n        \r\n        // \u6DFB\u52A0\u5927\u5C0F\u8C03\u6574\u94AE\r\n        const resizeControls = moduleEl.createDiv('module-resize');\r\n        \r\n        // \u51CF\u5C0F\u6309\u94AE\r\n        const decreaseBtn = resizeControls.createEl('button');\r\n        decreaseBtn.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line></svg>`;\r\n        \r\n        // \u589E\u5927\u6309\u94AE\r\n        const increaseBtn = resizeControls.createEl('button');\r\n        increaseBtn.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line></svg>`;\r\n        \r\n        // \u521B\u5EFA\u6A21\u5757\u5185\u5BB9\r\n        const content = moduleEl.createDiv('module-content');\r\n        await this.renderModuleContent(content, module);\r\n\r\n        return moduleEl;\r\n    }\r\n\r\n    // \u663E\u793A\u6A21\u5757\u7BA1\u7406\u5668\r\n    private showModuleManager() {\r\n        const modal = new ModuleManagerModal(this.app, this.homeModules, async (modules) => {\r\n            this.homeModules = modules;\r\n            // \u7531\u4E8ECardView\u7C7B\u4E0A\u4E0D\u5B58\u5728saveModuleSettings\u65B9\u6CD5\uFF0C\u6211\u4EEC\u5C06\u5176\u6CE8\u91CA\u6389\r\n            // this.saveModuleSettings();\r\n            this.createHomeView();\r\n        });\r\n        modal.open();\r\n    }\r\n\r\n    // \u6A21\u5757-\u70ED\u529B\u56FE\r\n    private async renderHeatmap(container: HTMLElement) {\r\n        console.log('\u6E32\u67D3\u70ED\u529B\u56FE...');\r\n        const heatmapContainer = container.createDiv('heatmap-container');\r\n        \r\n        // \u83B7\u53D6\u8FC7\u53BB\u4E00\u5E74\u7684\u6570\u636E\r\n        const endDate = new Date();// \u5F53\u524D\u65E5\u671F\r\n        const startDate = new Date();// \u5F53\u524D\u65E5\u671F\r\n        startDate.setFullYear(endDate.getFullYear() - 1);// \u8BBE\u7F6E\u4E3A\u4E00\u5E74\u524D\r\n        console.log('\u5F00\u59CB\u65E5\u671F:', startDate);\r\n        console.log('\u7ED3\u675F\u65E5\u671F:', endDate);\r\n\r\n        // \u521B\u5EFA\u65E5\u671F\u5230\u8BA1\u6570\u7684\u6620\u5C04\r\n        const dateCountMap = new Map<string, number>();\r\n        \r\n        // \u521D\u59CB\u5316\u6240\u6709\u65E5\u671F\u7684\u8BA1\u6570\u4E3A0\r\n        for (let d = new Date(startDate); d <= endDate; d.setDate(d.getDate() + 1)) {\r\n            const dateStr = d.toISOString().split('T')[0];\r\n            dateCountMap.set(dateStr, 0);\r\n        }\r\n        \r\n        // \u7EDF\u8BA1\u6BCF\u5929\u7684\u7B14\u8BB0\u6570\u91CF\r\n        const files = this.app.vault.getMarkdownFiles();\r\n        files.forEach(file => {\r\n            const date = new Date(file.stat.mtime);\r\n            if (date >= startDate && date <= endDate) {\r\n                const dateStr = date.toISOString().split('T')[0];\r\n                dateCountMap.set(dateStr, (dateCountMap.get(dateStr) || 0) + 1);\r\n            }\r\n        });\r\n\r\n        // \u521B\u5EFA\u70ED\u529B\u56FE\u8868\u683C\r\n        const heatmapGrid = heatmapContainer.createDiv('heatmap-grid');\r\n        \r\n        // \u6DFB\u52A0\u661F\u671F\u6807\u7B7E - \u663E\u793A\u6240\u6709\u5DE5\u4F5C\u65E5\r\n        const weekLabels = heatmapGrid.createDiv('week-labels');\r\n        ['', '\u4E00', '\u4E8C', '\u4E09', '\u56DB', '\u4E94', '\u516D', '\u65E5'].forEach(label => {\r\n            weekLabels.createDiv('week-label').setText(label);\r\n        });\r\n        \r\n        // \u521B\u5EFA\u6708\u4EFD\u6807\u7B7E\u5BB9\u5668\r\n        const monthLabels = heatmapGrid.createDiv('month-labels');\r\n        \r\n        // \u521B\u5EFA\u65E5\u671F\u683C\u5B50\u5BB9\u5668\r\n        const daysContainer = heatmapGrid.createDiv('days-container');\r\n        \r\n        // \u8C03\u6574\u5F00\u59CB\u65E5\u671F\u5230\u5468\u4E00\r\n        let iterDate = new Date(startDate);\r\n        // \u5982\u679C\u5F00\u59CB\u65E5\u671F\u4E0D\u662F\u5468\u4E00\uFF0C\u8C03\u6574\u5230\u4E0A\u4E00\u4E2A\u5468\u4E00\r\n        const dayOfWeek = iterDate.getDay();\r\n        const diff = dayOfWeek === 0 ? 6 : dayOfWeek - 1; // \u5C06\u5468\u65E5(0)\u8F6C\u6362\u4E3A6\r\n        iterDate.setDate(iterDate.getDate() - diff);\r\n        \r\n        let currentMonth = iterDate.getMonth();\r\n        \r\n        // \u521B\u5EFA\u6708\u4EFD\u6807\u7B7E\r\n        const months = ['\u4E00\u6708', '\u4E8C\u6708', '\u4E09\u6708', '\u56DB\u6708', '\u4E94\u6708', '\u516D\u6708', '\u4E03\u6708', '\u516B\u6708', '\u4E5D\u6708', '\u5341\u6708', '\u5341\u4E00\u6708', '\u5341\u4E8C\u6708'];\r\n        let monthDiv = monthLabels.createDiv('month-label');\r\n        monthDiv.setText(months[currentMonth]);\r\n\r\n        // \u521B\u5EFA\u6708\u4EFD\u6807\u7B7E\u6620\u5C04\r\n        let monthLabelsMap = new Map<number, HTMLElement>();\r\n        let currentMonthStartCol = 0;\r\n        let currentCol = 0;\r\n\r\n        // \u521B\u5EFA\u6240\u6709\u65E5\u671F\u683C\u5B50\r\n        const allDayCells: HTMLElement[] = [];\r\n        let currentYear = iterDate.getFullYear();\r\n\r\n        while (iterDate <= endDate) {\r\n            const dateStr = iterDate.toISOString().split('T')[0];\r\n            const count = dateCountMap.get(dateStr) || 0;\r\n            \r\n            // \u521B\u5EFA\u65E5\u671F\u683C\u5B50\r\n            const dayCell = document.createElement('div');\r\n            dayCell.className = 'day-cell';\r\n            dayCell.setAttribute('data-date', dateStr);\r\n            dayCell.setAttribute('data-count', count.toString());\r\n            \r\n            // \u8BBE\u7F6E\u989C\u8272\u7EA7\u522B\r\n            let colorClass = 'level-0';\r\n            if (count > 0) {\r\n                if (count >= 5) colorClass = 'level-4';\r\n                else if (count >= 3) colorClass = 'level-3';\r\n                else if (count >= 2) colorClass = 'level-2';\r\n                else colorClass = 'level-1';\r\n            }\r\n            dayCell.classList.add(colorClass);\r\n            \r\n            // \u6DFB\u52A0\u60AC\u505C\u63D0\u793A\r\n            dayCell.setAttribute('title', `${dateStr}: ${count} \u6761\u7B14\u8BB0`);\r\n            \r\n            allDayCells.push(dayCell);\r\n\r\n            // \u68C0\u67E5\u6708\u4EFD\u53D8\u5316\r\n            const newMonth = iterDate.getMonth();\r\n            const newYear = iterDate.getFullYear();\r\n            if (newMonth !== currentMonth || newYear !== currentYear) {\r\n                // \u4E3A\u4E0A\u4E00\u4E2A\u6708\u521B\u5EFA\u6807\u7B7E\r\n                const monthLabel = monthLabels.createDiv('month-label');\r\n                monthLabel.setText(months[currentMonth]);\r\n                // monthLabel.style.width = `${(currentCol - currentMonthStartCol) * 14}px`; // 14px = \u683C\u5B50\u5BBD\u5EA6(10px) + \u95F4\u8DDD(2px) * 2\r\n                monthLabelsMap.set(currentMonth + currentYear * 12, monthLabel);\r\n                \r\n                // \u66F4\u65B0\u5F53\u524D\u6708\u4EFD\u4FE1\u606F\r\n                currentMonth = newMonth;\r\n                currentYear = newYear;\r\n                currentMonthStartCol = currentCol;\r\n            }\r\n            \r\n            currentCol++;\r\n            iterDate.setDate(iterDate.getDate() + 1);\r\n        }\r\n\r\n        // \u4E3A\u6700\u540E\u4E00\u4E2A\u6708\u521B\u5EFA\u6807\u7B7E\r\n        const lastMonthLabel = monthLabels.createDiv('month-label');\r\n        lastMonthLabel.setText(months[currentMonth]);\r\n        // lastMonthLabel.style.width = `${(currentCol - currentMonthStartCol) * 14}px`;\r\n        monthLabelsMap.set(currentMonth + currentYear * 12, lastMonthLabel);\r\n\r\n        // \u5C06\u6240\u6709\u65E5\u671F\u683C\u5B50\u6DFB\u52A0\u5230\u5BB9\u5668\u4E2D\r\n        allDayCells.forEach(cell => daysContainer.appendChild(cell));\r\n\r\n        // \u6DFB\u52A0\u65E5\u671F\u683C\u5B50\u7684\u9F20\u6807\u4E8B\u4EF6\r\n        daysContainer.querySelectorAll('.day-cell').forEach(cell => {\r\n            cell.addEventListener('mouseenter', () => {\r\n                const dateStr = cell.getAttribute('data-date');\r\n                if (!dateStr) return;\r\n                \r\n                const date = new Date(dateStr);\r\n                const monthKey = date.getMonth() + date.getFullYear() * 12;\r\n\r\n                // \u79FB\u9664\u6240\u6709\u6708\u4EFD\u6807\u7B7E\u7684\u9AD8\u4EAE\r\n                monthLabelsMap.forEach(label => label.removeClass('highlight'));\r\n\r\n                // \u9AD8\u4EAE\u5BF9\u5E94\u6708\u4EFD\u7684\u6807\u7B7E\r\n                const monthLabel = monthLabelsMap.get(monthKey);\r\n                if (monthLabel) {\r\n                    monthLabel.addClass('highlight');\r\n                }\r\n\r\n                // \u9AD8\u4EAE\u5BF9\u5E94\u7684\u661F\u671F\u6807\u7B7E\r\n                const weekDay = date.getDay();\r\n                weekLabels.querySelectorAll('.week-label').forEach((label, index) => {\r\n                    label.toggleClass('highlight', index === weekDay);\r\n                });\r\n\r\n                // \u9AD8\u4EAE\u540C\u6708\u4EFD\u7684\u6240\u6709\u683C\u5B50\r\n                daysContainer.querySelectorAll('.day-cell').forEach(otherCell => {\r\n                    const otherDateStr = otherCell.getAttribute('data-date');\r\n                    if (!otherDateStr) return;\r\n                    \r\n                    const otherDate = new Date(otherDateStr);\r\n                    if (otherDate.getMonth() === date.getMonth() && \r\n                        otherDate.getFullYear() === date.getFullYear()) {\r\n                        otherCell.addClass('month-hover');\r\n                    }\r\n                });\r\n            });\r\n            \r\n            cell.addEventListener('mouseleave', () => {\r\n                // \u79FB\u9664\u6240\u6709\u9AD8\u4EAE\r\n                monthLabelsMap.forEach(label => label.removeClass('highlight'));\r\n                weekLabels.querySelectorAll('.week-label').forEach(label => {\r\n                    label.removeClass('highlight');\r\n                });\r\n                daysContainer.querySelectorAll('.day-cell').forEach(cell => {\r\n                    cell.removeClass('month-hover');\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    \r\n    // \u6A21\u5757-\u672C\u5468\u7B14\u8BB0\r\n    private async renderWeeklyNotes(container: HTMLElement) {\r\n        console.log('Rendering weekly notes module...');\r\n        const weeklyContainer = container.createDiv('weekly-notes');\r\n        const weekStart = getStartOfWeek();\r\n        const weekEnd = getEndOfWeek();\r\n        \r\n        const notes = this.app.vault.getMarkdownFiles()\r\n            .filter(file => {\r\n                const mtime = new Date(file.stat.mtime);\r\n                return mtime >= weekStart && mtime <= weekEnd;\r\n            })\r\n            .sort((a, b) => b.stat.mtime - a.stat.mtime)\r\n            .slice(0, 10);\r\n\r\n        for (const note of notes) {\r\n            const noteItem = weeklyContainer.createDiv('note-item');\r\n            noteItem.createEl('span', { text: note.basename, cls: 'note-title' });\r\n            \r\n            // \u521B\u5EFA\u65E5\u671F\u5BB9\u5668\r\n            const dateContainer = noteItem.createEl('span', { cls: 'note-date' });\r\n            \r\n            // \u8BA1\u7B97\u76F8\u5BF9\u65F6\u95F4\r\n            const relativeTime = this.getRelativeTime(note.stat.mtime);\r\n            dateContainer.setText(relativeTime);\r\n            \r\n            // \u6DFB\u52A0\u5177\u4F53\u65E5\u671F\u4F5C\u4E3A title \u5C5E\u6027\r\n            const exactDate = new Date(note.stat.mtime).toLocaleString('zh-CN', {\r\n                year: 'numeric',\r\n                month: '2-digit',\r\n                day: '2-digit',\r\n                hour: '2-digit',\r\n                minute: '2-digit'\r\n            });\r\n            dateContainer.setAttribute('title', exactDate);\r\n            \r\n            // \u6DFB\u52A0\u9F20\u6807\u60AC\u505C\u4E8B\u4EF6\r\n            noteItem.addEventListener('mouseenter', () => {\r\n                dateContainer.setText(exactDate);\r\n            });\r\n            \r\n            noteItem.addEventListener('mouseleave', () => {\r\n                dateContainer.setText(relativeTime);\r\n            });\r\n            \r\n            noteItem.addEventListener('click', () => {\r\n                openInAppropriateLeaf(this.app, note);\r\n            });\r\n        }\r\n    }\r\n\r\n    // \u6DFB\u52A0\u8BA1\u7B97\u76F8\u5BF9\u65F6\u95F4\u7684\u8F85\u52A9\u65B9\u6CD5\r\n    private getRelativeTime(timestamp: number): string {\r\n        const now = Date.now();\r\n        const diff = now - timestamp;\r\n        const minute = 60 * 1000;\r\n        const hour = minute * 60;\r\n        const day = hour * 24;\r\n        const week = day * 7;\r\n        const month = day * 30;\r\n        const year = day * 365;\r\n\r\n        if (diff < minute) {\r\n            return '\u521A\u521A';\r\n        } else if (diff < hour) {\r\n            const minutes = Math.floor(diff / minute);\r\n            return `${minutes}\u5206\u949F\u524D`;\r\n        } else if (diff < day) {\r\n            const hours = Math.floor(diff / hour);\r\n            return `${hours}\u5C0F\u65F6\u524D`;\r\n        } else if (diff < week) {\r\n            const days = Math.floor(diff / day);\r\n            return `${days}\u5929\u524D`;\r\n        } else if (diff < month) {\r\n            const weeks = Math.floor(diff / week);\r\n            return `${weeks}\u5468\u524D`;\r\n        } else if (diff < year) {\r\n            const months = Math.floor(diff / month);\r\n            return `${months}\u4E2A\u6708\u524D`;\r\n        } else {\r\n            const years = Math.floor(diff / year);\r\n            return `${years}\u5E74\u524D`;\r\n        }\r\n    }\r\n\r\n    // \u6A21\u5757-\u65E5\u5386\r\n    private async renderCalendarModule(container: HTMLElement) {\r\n        container.empty(); // \u6E05\u7A7A\u5BB9\u5668\r\n        const moduleContainer = container.createDiv('calendar-module');\r\n        \r\n        // \u521B\u5EFA\u5DE6\u53F3\u5E03\u5C40\r\n        const calendarSection = moduleContainer.createDiv('calendar-section');\r\n        const notesSection = moduleContainer.createDiv('notes-section');\r\n        \r\n        // \u521B\u5EFA\u65E5\u5386\u90E8\u5206\r\n        const calendarContainer = calendarSection.createDiv('calendar-container');\r\n        \r\n        // \u521B\u5EFA\u65E5\u5386\u5934\u90E8\r\n        const header = calendarContainer.createDiv('calendar-header');\r\n        \r\n        // \u4E0A\u4E2A\u6708\u6309\u94AE\r\n        const prevBtn = header.createEl('button', { cls: 'calendar-nav-btn' });\r\n        prevBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"15 18 9 12 15 6\"></polyline></svg>';\r\n        \r\n        // \u663E\u793A\u5E74\u6708\r\n        const titleEl = header.createDiv('calendar-title');\r\n        titleEl.setText(`${this.currentDate.getFullYear()}\u5E74${this.currentDate.getMonth() + 1}\u6708`);\r\n        \r\n        // \u4E0B\u4E2A\u6708\u6309\u94AE\r\n        const nextBtn = header.createEl('button', { cls: 'calendar-nav-btn' });\r\n        nextBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"9 18 15 12 9 6\"></polyline></svg>';\r\n\r\n        // \u6DFB\u52A0\u4ECA\u5929\u6309\u94AE\r\n        const todayBtn = header.createEl('button', { cls: 'calendar-today-btn' });\r\n        todayBtn.innerText = '\u4ECA\u5929';\r\n\r\n        // \u70B9\u51FB\u4ECA\u5929\u6309\u94AE\u65F6\u8DF3\u8F6C\u5230\u4ECA\u5E74\u7684\u6708\u4EFD\uFF0C\u5E76\u9AD8\u4EAE\u4ECA\u5929\u7684\u65E5\u671F\r\n        todayBtn.addEventListener('click', () => {\r\n            this.currentDate.setFullYear(new Date().getFullYear());\r\n            this.currentDate.setMonth(new Date().getMonth());\r\n            this.renderCalendarModule(container);\r\n            const today = new Date().getDate();\r\n            const dayElements = document.querySelectorAll('.calendar-grid .day');\r\n            dayElements.forEach(day => {\r\n                if (day.textContent === today.toString()) {\r\n                    day.classList.add('today');\r\n                }\r\n            });\r\n        });\r\n\r\n\r\n        // \u6DFB\u52A0\u6EDA\u8F6E\u4E8B\u4EF6\u5230\u6807\u9898\u5143\u7D20\r\n        titleEl.addEventListener('wheel', (e) => {\r\n            e.preventDefault(); // \u9632\u6B62\u9875\u9762\u6EDA\u52A8\r\n            \r\n            // \u5411\u4E0A\u6EDA\u52A8\u5207\u6362\u5230\u4E0B\u4E2A\u6708\uFF0C\u5411\u4E0B\u6EDA\u52A8\u5207\u6362\u5230\u4E0A\u4E2A\u6708\r\n            if (e.deltaY < 0) {\r\n                this.currentDate.setMonth(this.currentDate.getMonth() + 1);\r\n            } else {\r\n                this.currentDate.setMonth(this.currentDate.getMonth() - 1);\r\n            }\r\n            \r\n            // \u91CD\u65B0\u6E32\u67D3\u65E5\u5386\r\n            this.renderCalendarModule(container);\r\n        });\r\n\r\n        // \u6DFB\u52A0\u9F20\u6807\u60AC\u505C\u6837\u5F0F\u63D0\u793A\r\n        titleEl.setAttribute('title', '\u6EDA\u52A8\u9F20\u6807\u6EDA\u8F6E\u5207\u6362\u6708\u4EFD');\r\n        titleEl.addClass('scrollable');\r\n\r\n        // \u521B\u5EFA\u661F\u671F\u5934\u90E8\r\n        const weekdays = ['\u65E5', '\u4E00', '\u4E8C', '\u4E09', '\u56DB', '\u4E94', '\u516D'];\r\n        const weekHeader = calendarContainer.createDiv('calendar-weekdays');\r\n        weekdays.forEach(day => {\r\n            weekHeader.createDiv('weekday').setText(day);\r\n        });\r\n\r\n        // \u521B\u5EFA\u65E5\u5386\u7F51\u683C\r\n        const grid = calendarContainer.createDiv('calendar-grid');\r\n        \r\n        // \u83B7\u53D6\u5F53\u6708\u7684\u7B14\u8BB0\r\n        const notesByDate = this.getNotesByDate(\r\n            this.currentDate.getFullYear(),\r\n            this.currentDate.getMonth()\r\n        );\r\n        \r\n        // \u586B\u5145\u65E5\u671F\u683C\u5B50\r\n        this.renderCalendarDays(grid, notesByDate, notesSection);\r\n        \r\n        // \u6DFB\u52A0\u5BFC\u822A\u4E8B\u4EF6\r\n        prevBtn.addEventListener('click', () => {\r\n            this.currentDate.setMonth(this.currentDate.getMonth() - 1);\r\n            this.renderCalendarModule(container);\r\n        });\r\n        \r\n        // \u4E0B\u4E2A\u6708\u6309\u94AE\r\n        nextBtn.addEventListener('click', () => {\r\n            this.currentDate.setMonth(this.currentDate.getMonth() + 1);\r\n            this.renderCalendarModule(container);\r\n        });\r\n\r\n        // \u9F20\u6807\u79BB\u5F00\u7B14\u8BB0\u533A\u57DF\u65F6\u9690\u85CF\u7B14\u8BB0\u533A\u57DF\r\n        notesSection.addEventListener('mouseleave', (event) => {\r\n            console.log('mouseleave',event);\r\n            notesSection.classList.remove('active');\r\n        });\r\n\r\n    }\r\n\r\n\r\n   \r\n\r\n    // \u6E32\u67D3\u65E5\u5386\u5929\u6570\r\n    private renderCalendarDays(grid: HTMLElement, notesByDate: Record<string, TFile[]>, notesSection: HTMLElement) {\r\n        const year = this.currentDate.getFullYear();\r\n        const month = this.currentDate.getMonth();\r\n        const firstDay = new Date(year, month, 1).getDay();\r\n        const lastDay = new Date(year, month + 1, 0).getDate();\r\n        \r\n        // \u586B\u5145\u524D\u7F6E\u7A7A\u767D\u65E5\u671F\r\n        for (let i = 0; i < firstDay; i++) {\r\n            grid.createDiv('calendar-day empty');\r\n        }\r\n        \r\n        // \u586B\u5145\u65E5\u671F\u683C\u5B50\r\n        for (let day = 1; day <= lastDay; day++) {\r\n            const dateCell = grid.createDiv('calendar-day');\r\n            const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;\r\n            \r\n            // \u68C0\u67E5\u662F\u5426\u662F\u4ECA\u5929\r\n            const today = new Date();\r\n            if (today.getFullYear() === year && \r\n                today.getMonth() === month && \r\n                today.getDate() === day) {\r\n                dateCell.addClass('today');\r\n            }\r\n            \r\n            // \u6DFB\u52A0\u65E5\u671F\u6570\u5B57\r\n            dateCell.createDiv('day-number').setText(String(day));\r\n            \r\n            // \u5982\u679C\u6709\u7B14\uFF0C\u6DFB\u52A0\u6807\u8BB0\r\n            const dayNotes = notesByDate[dateStr] || [];\r\n            if (dayNotes.length >0) {\r\n                dateCell.createDiv('note-count').setText(dayNotes.length.toString());\r\n            }\r\n            \r\n            // \u663E\u793A\u5F53\u5929\u7684\u7B14\u8BB0\u548C\u6240\u5728\u6587\u4EF6\u5939\r\n            const displayNotesForDate = (dateStr: string, dayNotes: TFile[]) => {\r\n                notesSection.empty();\r\n                if (dayNotes.length > 0) {\r\n                    const dateTitle = notesSection.createDiv('date-title');\r\n                    dateTitle.setText(`${dateStr} \u7684\u7B14\u8BB0`);\r\n                    \r\n                    const notesList = notesSection.createDiv('notes-list');\r\n                    dayNotes.forEach(note => {\r\n                        const noteItem = notesList.createDiv('note-item');\r\n\r\n                        noteItem.setText(`${note.basename}`);\r\n                        noteItem.title = (`${note.parent ? note.parent.path : '\u672A\u77E5\u8DEF\u5F84'}`);\r\n                        \r\n                        noteItem.addEventListener('click', () => {\r\n                            openInAppropriateLeaf(this.app, note);\r\n                        });\r\n                    });\r\n                } else {\r\n                    notesSection.createDiv('empty-message')\r\n                        .setText('\u5F53\u5929\u6CA1\u6709\u7B14\u8BB0');\r\n                }\r\n            };\r\n\r\n            // \u6DFB\u52A0\u9F20\u6807\u4E8B\u4EF6\r\n            dateCell.addEventListener('mouseenter', () => {\r\n                if (!notesSection.classList.contains('active') ) {\r\n                   displayNotesForDate(dateStr, dayNotes);\r\n                } \r\n            });\r\n\r\n            // \u6DFB\u52A0\u9F20\u6807\u70B9\u51FB\u4EF6\r\n            dateCell.addEventListener('click', () => {\r\n\r\n                // \u663E\u793A\u5F53\u5929\u7684\u7B14\u8BB0\r\n                displayNotesForDate(dateStr, dayNotes);\r\n\r\n                // \u5982\u679C\u70B9\u51FB\u7684\u662F\u540C\u4E00\u4E2A\uFF0C\u5219\u5207\u6362selected\r\n                if (dateCell.classList.contains('selected')) {\r\n                    dateCell.classList.remove('selected');\r\n                    notesSection.classList.remove('active');\r\n                } else {\r\n                    // \u5982\u679C\u4E0D\u662F\u5219\u79FB\u9664\u5176\u4ED6\u7684\r\n                    document.querySelectorAll('.calendar-module .calendar-grid .calendar-day.selected').forEach(el => {\r\n                        el.classList.remove('selected');\r\n                        notesSection.classList.remove('active');\r\n                    });\r\n                    // \u7ED9\u70B9\u51FB\u7684\u6DFB\u52A0selected\r\n                    dateCell.classList.add('selected');\r\n                    notesSection.classList.add('active');\r\n                }\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n\r\n    // \u4FDD\u5B58\u6A21\u5757\u8BBE\u7F6E\r\n    private async saveModuleSettings() {\r\n        // \u4FDD\u5B58\u5230\u63D2\u4EF6\u8BBE\u7F6E\u4E2D\r\n        await this.plugin.saveHomeModules(this.homeModules);\r\n    }\r\n\r\n    // \u6E32\u67D3\u6A21\u5757\u5185\u5BB9\r\n    private async renderModuleContent(container: HTMLElement, module: HomeModule) {\r\n        console.log('Rendering module:', module.type);\r\n        try {\r\n        switch (module.type) {\r\n            case 'heatmap':\r\n                await this.renderHeatmap(container);\r\n                break;\r\n            case 'weekly':\r\n                await this.renderWeeklyNotes(container);\r\n                break;\r\n            case 'stats':\r\n                await renderStats(this.app,container);\r\n                break;\r\n            case 'calendar':\r\n                await this.renderCalendarModule(container);\r\n                break;\r\n            case 'quicknote':\r\n                await this.renderQuickNoteModule(container);\r\n                break;\r\n            case 'todo':\r\n                await this.renderTodoModule(container);\r\n                break;\r\n                default:\r\n                    console.warn('Unknown module type:', module.type);\r\n                    container.createDiv('module-error').setText(`Unknown module type: ${module.type}`);\r\n            }\r\n        } catch (error: any) {\r\n            console.error('Error rendering module:', module.type, error);\r\n            console.error(error.stack);\r\n            container.createDiv('module-error').setText(`Error loading ${module.type} module: ${error.message}`);\r\n        }\r\n    }\r\n\r\n    // \u5207\u6362\u6A21\u5757\r\n    private toggleModuleEditing(enable: boolean) {\r\n        console.log('\u5207\u6362\u6A21\u5757\u7F16\u8F91:', enable);\r\n        \r\n        const modules = this.container.querySelectorAll('.module-container');\r\n        const columns = this.container.querySelectorAll('.left-column, .center-column, .right-column');\r\n        \r\n        if (enable) {\r\n            // \u542F\u7528\u7F16\u8F91\u6A21\u5F0F\r\n            modules.forEach(module => {\r\n                if (module instanceof HTMLElement) {\r\n                    // \u5148\u79FB\u9664\u53EF\u80FD\u5B58\u5728\u7684\u65E7\u63A7\u4EF6\r\n                    module.querySelectorAll('.module-drag-handle, .module-controls').forEach(el => el.remove());\r\n                    \r\n                    module.classList.add('editable');\r\n                    this.setupModuleDragging(module); // \u8BBE\u7F6E\u62D6\u62FD\r\n                }\r\n            });\r\n\r\n            columns.forEach(column => {\r\n                column.classList.add('editable');\r\n            });\r\n        } else {\r\n            // \u7981\u7528\u7F16\u8F91\u6A21\u5F0F\r\n            modules.forEach(module => {\r\n                if (module instanceof HTMLElement) {\r\n                    // \u79FB\u9664\u7F16\u8F91\u6A21\u5F0F\u7C7B\u548C\u6240\u6709\u63A7\u5236\u5143\u7D20\r\n                    module.classList.remove('editable');\r\n                    module.querySelectorAll('.module-drag-handle, .module-controls').forEach(el => el.remove());\r\n                    \r\n                    // \u6E05\u7406\u6240\u6709\u62D6\u62FD\u76F8\u5173\u7684\u6837\u5F0F\r\n                    module.style.position = '';\r\n                    module.style.zIndex = '';\r\n                    module.style.width = '';\r\n                    module.style.left = '';\r\n                    module.style.top = '';\r\n                    module.style.transform = '';\r\n                    module.style.cursor = '';\r\n                    module.classList.remove('dragging');\r\n                    \r\n                    // \u901A\u8FC7\u514B\u9686\u8282\u70B9\u6765\u79FB\u9664\u6240\u6709\u4E8B\u4EF6\u76D1\u542C\u5668\r\n                    const newModule = module.cloneNode(true) as HTMLElement;\r\n                    if (module.parentNode) {\r\n                        // \u4FDD\u5B58\u539F\u6709\u7684\u5185\u5BB9\u5143\u7D20\r\n                        const content = module.querySelector('.module-content');\r\n                        const newContent = newModule.querySelector('.module-content');\r\n                        \r\n                        if (content && newContent) {\r\n                            // \u66FF\u6362\u5185\u5BB9\u5143\u7D20\uFF0C\u4FDD\u6301\u539F\u6709\u7684\u4E8B\u4EF6\u76D1\u542C\u5668\r\n                            newContent.replaceWith(content);\r\n                        }\r\n                        \r\n                        // \u66FF\u6362\u6574\u4E2A\u6A21\u5757\r\n                        module.parentNode.replaceChild(newModule, module);\r\n                    }\r\n                }\r\n            });\r\n\r\n            columns.forEach(column => {\r\n                column.classList.remove('editable');\r\n                column.classList.remove('drop-target');\r\n                column.querySelectorAll('.drop-marker').forEach(marker => marker.remove());\r\n            });\r\n\r\n            // \u79FB\u9664\u6240\u6709\u5360\u4F4D\u7B26\u548C\u6807\u8BB0\r\n            this.container.querySelectorAll('.module-placeholder, .drop-marker').forEach(el => el.remove());\r\n\r\n            // \u91CD\u65B0\u6E32\u67D3\u4E3B\u9875\u89C6\u56FE\uFF0C\u4F46\u4E0D\u8FDB\u5165\u7F16\u8F91\u6A21\u5F0F\r\n            this.createHomeView();\r\n        }\r\n\r\n        console.log('\u6A21\u5757\u7F16\u8F91\u5207\u6362\u5B8C\u6210');\r\n    }\r\n\r\n    // \u8BBE\u7F6E\u6A21\u5757\u62D6\u62FD\r\n    private setupModuleDragging(module: HTMLElement) {\r\n        console.log('\u8BBE\u7F6E\u6A21\u5757\u62D6\u62FD:', module);\r\n        \r\n        // \u68C0\u67E5\u6A21\u5757\u662F\u5426\u6709 editable \u7C7B\r\n        if (!module.classList.contains('editable')) {\r\n            console.log('\u6A21\u5757\u4E0D\u662F\u53EF\u7F16\u8F91\u7684,\u8DF3\u8FC7\u62D6\u62FD\u8BBE\u7F6E');\r\n            return;\r\n        }\r\n\r\n        let isDragging = false;\r\n        let startX: number;\r\n        let startY: number;\r\n        let startPosition: string;\r\n        let startIndex: number;\r\n        let placeholder: HTMLElement | null = null;\r\n        let dropTarget: HTMLElement | null = null;\r\n\r\n        // \u6DFB\u52A0\u62D6\u62FD\u624B\u67C4\u5230\u5DE6\u4E0A\u89D2\r\n        const dragHandle = document.createElement('div');\r\n        dragHandle.className = 'module-drag-handle visible'; // \u6DFB\u52A0 visible \u7C7B\r\n        dragHandle.innerHTML = `\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n                <path d=\"M3 12h18M3 6h18M3 18h18\"></path>\r\n            </svg>\r\n        `;\r\n        module.appendChild(dragHandle);\r\n\r\n        // \u6DFB\u52A0\u4E0A\u4E0B\u79FB\u52A8\u6309\u94AE\u5230\u53F3\u89D2\r\n        const moduleControls = document.createElement('div');\r\n        moduleControls.className = 'module-controls visible'; // \u6DFB\u52A0 visible \u7C7B\r\n        \r\n        const moveUpBtn = document.createElement('button');\r\n        moveUpBtn.className = 'move-up-btn';\r\n        moveUpBtn.innerHTML = '\u2191';\r\n        moveUpBtn.title = '\u5411\u4E0A\u79FB\u52A8';\r\n        moveUpBtn.addEventListener('click', (e) => {\r\n            e.stopPropagation(); // \u963B\u6B62\u4E8B\u4EF6\u5192\u6CE1\r\n            console.log('\u70B9\u51FB\u5411\u4E0A\u79FB\u52A8\u6309\u94AE');\r\n            this.moveModule(module, 'up');\r\n        });\r\n\r\n        const moveDownBtn = document.createElement('button');\r\n        moveDownBtn.className = 'move-down-btn';\r\n        moveDownBtn.innerHTML = '\u2193';\r\n        moveDownBtn.title = '\u5411\u4E0B\u79FB\u52A8';\r\n        moveDownBtn.addEventListener('click', (e) => {\r\n            e.stopPropagation(); // \u963B\u6B62\u4E8B\u4EF6\u5192\u6CE1\r\n            console.log('\u70B9\u51FB\u5411\u4E0B\u79FB\u52A8\u6309\u94AE');\r\n            this.moveModule(module, 'down');\r\n        });\r\n\r\n        moduleControls.appendChild(moveUpBtn);//\u5411\u4E0A\u79FB\u52A8\u6309\u94AE\r\n        moduleControls.appendChild(moveDownBtn);//\u5411\u4E0B\u79FB\u52A8\u6309\u94AE\r\n        module.appendChild(moduleControls);//\u6DFB\u52A0\u5230\u6A21\u5757\u4E0A\r\n\r\n        // \u5B9A\u4E49\u62D6\u62FD\u5F00\u59CB\u51FD\u6570\r\n        const startDrag = (e: MouseEvent) => {\r\n            console.log('\u5F00\u59CB\u62D6\u62FD', e.target); \r\n            \r\n            // \u68C0\u67E5\u70B9\u51FB\u76EE\u6807\r\n            if (e.target instanceof HTMLElement && (\r\n                e.target.closest('.module-controls') ||\r\n                e.target.closest('input') ||\r\n                e.target.closest('textarea') ||\r\n                e.target.closest('button')\r\n            )) {\r\n                console.log('\u70B9\u51FB\u4E86\u4EA4\u4E92\u5143\u7D20,\u5FFD\u7565\u62D6\u62FD');\r\n                return;\r\n            }\r\n\r\n            isDragging = true;\r\n            startX = e.pageX;\r\n            startY = e.pageY;\r\n            startPosition = module.getAttribute('data-position') || '';\r\n            startIndex = Array.from(module.parentElement?.children || []).indexOf(module);\r\n\r\n            // \u8BB0\u5F55\u6A21\u5757\u539F\u59CB\u5C3A\u5BF8\r\n            const rect = module.getBoundingClientRect();\r\n            const originalWidth = rect.width;\r\n            const originalHeight = rect.height;\r\n\r\n            console.log('\u62D6\u62FD\u5F00\u59CB:', { \r\n                startX,\r\n                startY,\r\n                startPosition,\r\n                startIndex,\r\n                originalWidth,\r\n                originalHeight\r\n            });\r\n\r\n            // \u521B\u5EFA\u5360\u4F4D\u7B26\r\n            placeholder = document.createElement('div');\r\n            placeholder.className = 'module-placeholder';\r\n            placeholder.style.height = `${originalHeight}px`;\r\n            placeholder.style.width = `${originalWidth}px`;\r\n            module.parentElement?.insertBefore(placeholder, module);\r\n            console.log('\u521B\u5EFA\u5360\u4F4D\u7B26');\r\n\r\n            // \u8BBE\u7F6E\u62D6\u62FD\u6837\u5F0F\r\n            module.style.position = 'fixed';\r\n            module.style.zIndex = '1000';\r\n            module.style.width = `${originalWidth}px`; // \u4F7F\u7528\u56FA\u5B9A\u5BBD\u5EA6\r\n            module.style.height = `${originalHeight}px`; // \u4F7F\u7528\u56FA\u5B9A\u9AD8\u5EA6\r\n            module.style.left = `${rect.left}px`;\r\n            module.style.top = `${rect.top}px`;\r\n            module.classList.add('dragging');\r\n            console.log('\u5E94\u7528\u62D6\u62FD\u6837\u5F0F');\r\n\r\n            document.addEventListener('mousemove', handleDrag);\r\n            document.addEventListener('mouseup', stopDrag);\r\n\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        };\r\n\r\n        // \u5B9A\u4E49\u62D6\u62FD\u8FC7\u7A0B\u51FD\u6570\r\n        const handleDrag = (e: MouseEvent) => {\r\n            if (!isDragging) return;\r\n            console.log('\u62D6\u62FD\u4E2D:', e.pageX, e.pageY);\r\n\r\n            const dx = e.pageX - startX;\r\n            const dy = e.pageY - startY;\r\n            \r\n            // \u66F4\u65B0\u6A21\u5757\u4F4D\u7F6E\r\n            module.style.transform = `translate(${dx}px, ${dy}px)`;\r\n\r\n            // \u83B7\u53D6\u6240\u6709\u5217\u5BB9\u5668\r\n            const columns = [\r\n                this.container.querySelector('.left-column'),\r\n                this.container.querySelector('.center-column'),\r\n                this.container.querySelector('.right-column')\r\n            ].filter((col): col is HTMLElement => col instanceof HTMLElement);\r\n\r\n            // \u6E05\u9664\u6240\u6709\u653E\u7F6E\u6807\u8BB0\r\n            this.container.querySelectorAll('.drop-marker').forEach(marker => marker.remove());\r\n            columns.forEach(col => col.classList.remove('drop-target'));\r\n\r\n            // \u68C0\u67E5\u9F20\u6807\u4F4D\u5E76\u66F4\u65B0\u653E\u7F6E\u6807\u8BB0\r\n            for (const column of columns) {\r\n                const rect = column.getBoundingClientRect();\r\n                if (e.clientX >= rect.left && e.clientX <= rect.right &&\r\n                    e.clientY >= rect.top && e.clientY <= rect.bottom) {\r\n                    \r\n                    // \u627E\u5230\u76EE\uFFFD\uFFFD\uFFFD\u5217\r\n                    dropTarget = column;\r\n                    column.classList.add('drop-target');\r\n\r\n                    // \u83B7\u53D6\u5217\u4E2D\u7684\u6240\u6709\u6A21\u5757\r\n                    const modules = Array.from(column.children).filter(child => \r\n                        child.classList.contains('module-container') && \r\n                        child !== module && \r\n                        child !== placeholder\r\n                    );\r\n\r\n                    // \u627E\u5230\u6700\u8FD1\u7684\u6A21\u5757\u548C\u63D2\u5165\u4F4D\u7F6E\r\n                    let insertBefore: Element | null = null;\r\n                    let insertPosition: 'before' | 'after' = 'before';\r\n\r\n                    for (const targetModule of modules) {\r\n                        const targetRect = targetModule.getBoundingClientRect();\r\n                        const targetMiddle = targetRect.top + targetRect.height / 2;\r\n\r\n                        if (e.clientY < targetMiddle) {\r\n                            insertBefore = targetModule;\r\n                            insertPosition = 'before';\r\n                            break;\r\n                        } else {\r\n                            insertBefore = targetModule.nextElementSibling;\r\n                            insertPosition = 'after';\r\n                        }\r\n                    }\r\n\r\n                    // \u521B\u5EFA\u653E\u7F6E\u6807\u8BB0\r\n                    const marker = document.createElement('div');\r\n                    marker.className = 'drop-marker';\r\n                    \r\n                    if (modules.length === 0) {\r\n                        // \u5982\u679C\u5217\u4E3A\u7A7A\uFF0C\u663E\u793A\u4E00\u4E2A\u6C34\u5E73\u7EBF\r\n                        marker.style.width = '100%';\r\n                        marker.style.height = '2px';\r\n                        column.appendChild(marker);\r\n                    } else {\r\n                        // \u5728\u76EE\u6807\u4F4D\u7F6E\u663E\u793A\u4E00\u4E2A\u6C34\u5E73\u7EBF\r\n                        marker.style.width = '100%';\r\n                        marker.style.height = '2px';\r\n                        if (insertBefore) {\r\n                            column.insertBefore(marker, insertBefore);\r\n                        } else {\r\n                            column.appendChild(marker);\r\n                        }\r\n                    }\r\n\r\n                    // \u79FB\u52A8\u5360\u4F4D\u7B26\r\n                    if (placeholder) {\r\n                        if (insertBefore) {\r\n                            column.insertBefore(placeholder, insertBefore);\r\n                        } else {\r\n                            column.appendChild(placeholder);\r\n                        }\r\n                    }\r\n\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n\r\n        // \u5B9A\u4E49\u62D6\u62FD\u7ED3\u675F\u51FD\u6570\r\n        const stopDrag = async () => {\r\n            if (!isDragging) return;\r\n            console.log('\u505C\u6B62\u62D6\u62FD');\r\n            \r\n            isDragging = false;\r\n\r\n            try {\r\n                // \u5982\u679C\u6709\u5360\u4F4D\u7B26\uFF0C\u4F7F\u7528\u5360\u4F4D\u7B26\u7684\u4F4D\u7F6E\u6765\u786E\u5B9A\u76EE\u6807\u4F4D\u7F6E\r\n                if (placeholder && placeholder.parentElement) {\r\n                    const targetColumn = placeholder.parentElement;\r\n                    const newPosition = targetColumn.classList.contains('left-column') ? 'left'\r\n                        : targetColumn.classList.contains('right-column') ? 'right'\r\n                        : 'center';\r\n\r\n                    // \u66F4\u65B0\u6A21\u5757\u914D\u7F6E\r\n                    const moduleId = module.getAttribute('data-module-id');\r\n                    const moduleConfig = this.homeModules.find(m => m.id === moduleId);\r\n                    \r\n                    if (moduleConfig) {\r\n                        // \u5148\u91CD\u7F6E\u6A21\u5757\u6837\u5F0F\uFF0C\u8FD9\u6837\u6A21\u5757\u5C31\u4F1A\u56DE\u5230\u6587\u6863\u6D41\u4E2D\r\n                        module.style.position = '';\r\n                        module.style.zIndex = '';\r\n                        module.style.left = '';\r\n                        module.style.top = '';\r\n                        module.style.transform = '';\r\n                        module.style.width = '';\r\n                        module.style.height = '';\r\n                        module.classList.remove('dragging');\r\n\r\n                        // \u7136\u540E\u79FB\u52A8\u6A21\u5757\u5230\u76EE\u6807\u4F4D\u7F6E\r\n                        targetColumn.insertBefore(module, placeholder);\r\n\r\n                        // \u66F4\u65B0\u4F4D\u7F6E\u548C\u5217\u6570\r\n                        moduleConfig.position = newPosition;\r\n                        moduleConfig.columns = newPosition === 'center' ? 2 : 1;\r\n\r\n                        // \u66F4\u65B0\u987A\u5E8F\r\n                        const sameColumnModules = this.homeModules\r\n                            .filter(m => m.position === newPosition);\r\n\r\n                        // \u83B7\u53D6\u65B0\u7684\u7D22\u5F15\u4F4D\u7F6E\r\n                        const newIndex = Array.from(targetColumn.children)\r\n                            .filter(child => child.classList.contains('module-container'))\r\n                            .indexOf(module);\r\n\r\n                        // \u66F4\u65B0\u987A\u5E8F\r\n                        moduleConfig.order = newIndex;\r\n                        sameColumnModules.forEach((m, i) => {\r\n                            if (i >= newIndex && m.id !== moduleConfig.id) {\r\n                                m.order = i + 1;\r\n                            }\r\n                        });\r\n\r\n                        // \u4FDD\u5B58\u66F4\u65B0\r\n                        await this.saveModuleSettings();\r\n                    }\r\n                }\r\n\r\n                // \u79FB\u9664\u5360\u4F4D\u7B26\u548C\u6807\u8BB0\r\n                placeholder?.remove();\r\n                this.container.querySelectorAll('.drop-marker').forEach(marker => marker.remove());\r\n                this.container.querySelectorAll('.drop-target').forEach(el => el.classList.remove('drop-target'));\r\n\r\n            } catch (error) {\r\n                console.error('\u62D6\u62FD\u7ED3\u675F\u5904\u7406\u9519\u8BEF:', error);\r\n                // \u786E\u4FDD\u6E05\u7406\u6837\u5F0F\u548C\u5360\u4F4D\u7B26\r\n                module.style.position = '';\r\n                module.style.zIndex = '';\r\n                module.style.left = '';\r\n                module.style.top = '';\r\n                module.style.transform = '';\r\n                module.style.width = '';\r\n                module.style.height = '';\r\n                module.classList.remove('dragging');\r\n                placeholder?.remove();\r\n            }\r\n        };\r\n\r\n        // \u6DFB\u52A0\u62D6\u62FD\u4E8B\u4EF6\u76D1\u542C\r\n        console.log('\u6DFB\u52A0\u62D6\u62FD\u4E8B\u4EF6\u76D1\u542C');\r\n        dragHandle.addEventListener('mousedown', (e: Event) => {\r\n            console.log('\u62D6\u62FD\u624B\u67C4mousedown');\r\n            if (e instanceof MouseEvent) {\r\n                startDrag(e);\r\n            }\r\n        });\r\n\r\n        module.addEventListener('mousedown', (e: Event) => {\r\n            console.log('Module mousedown');\r\n            if (e instanceof MouseEvent) {\r\n                startDrag(e);\r\n            }\r\n        });\r\n\r\n        console.log('\u6A21\u5757\u62D6\u62FD\u8BBE\u7F6E\u5B8C\u6210');\r\n    }\r\n\r\n    // \u6DFB\u52A0\u79FB\u52A8\u6A21\u5757\u7684\u65B9\u6CD5\r\n    private moveModule(module: HTMLElement, direction: 'up' | 'down') {\r\n        console.log('\u79FB\u52A8\u6A21\u5757:', direction);\r\n        \r\n        const moduleId = module.getAttribute('data-module-id');\r\n        const moduleConfig = this.homeModules.find(m => m.id === moduleId);\r\n        if (!moduleConfig) {\r\n            console.log('\u672A\u627E\u5230\u6A21\u5757\u914D\u7F6E');\r\n            return;\r\n        }\r\n\r\n        const currentPosition = moduleConfig.position;\r\n        const sameColumnModules = this.homeModules\r\n            .filter(m => m.position === currentPosition)\r\n            .sort((a, b) => a.order - b.order);\r\n\r\n        console.log('\u540C\u5217\u6A21\u5757:', sameColumnModules);\r\n        \r\n        const currentIndex = sameColumnModules.indexOf(moduleConfig);\r\n        if (currentIndex === -1) {\r\n            console.log('\u672A\u627E\u5230\u5F53\u524D\u6A21\u5757\u7D22\u5F15');\r\n            return;\r\n        }\r\n\r\n        const newIndex = direction === 'up' ? currentIndex - 1 : currentIndex + 1;\r\n        if (newIndex < 0 || newIndex >= sameColumnModules.length) {\r\n            console.log('\u65B0\u7D22\u5F15\u8D85\u51FA\u8303\u56F4:', newIndex);\r\n            return;\r\n        }\r\n\r\n        // \u4EA4\u6362\u987A\u5E8F\r\n        const targetModule = sameColumnModules[newIndex];\r\n        console.log('\u4EA4\u6362\u987A\u5E8F:', {\r\n            current: moduleConfig.order,\r\n            target: targetModule.order\r\n        });\r\n        \r\n        const tempOrder = moduleConfig.order;\r\n        moduleConfig.order = targetModule.order;\r\n        targetModule.order = tempOrder;\r\n\r\n        // \u4FDD\u5B58\u66F4\u65B0\u5E76\u91CD\u65B0\u6E32\u67D3\r\n        this.saveModuleSettings();\r\n        this.createHomeView().then(() => {\r\n            // \u91CD\u65B0\u5E94\u7528\u7F16\u8F91\u6A21\u5F0F\r\n            const modules = this.container.querySelectorAll('.module-container');\r\n            modules.forEach(m => {\r\n                if (m instanceof HTMLElement) {\r\n                    m.classList.add('editable');\r\n                    this.setupModuleDragging(m);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    // \u66F4\u65B0\u6A21\u5757\u4F4D\u7F6E\r\n    private updateModulePosition(module: HTMLElement, newPosition: 'left' | 'center' | 'right') {\r\n        const moduleId = module.getAttribute('data-module-id');\r\n        const moduleConfig = this.homeModules.find(m => m.id === moduleId);\r\n        \r\n        if (moduleConfig) {\r\n            console.log('\u66F4\u65B0\u6A21\u5757\u4F4D\u7F6E:', {\r\n                from: moduleConfig.position,\r\n                to: newPosition\r\n            });\r\n\r\n            // \u66F4\u65B0\u4F4D\u7F6E\u548C\u5217\u6570\r\n            moduleConfig.position = newPosition;\r\n            moduleConfig.columns = newPosition === 'center' ? 2 : 1;\r\n\r\n            // \u66F4\u65B0\u987A\u5E8F\uFF08\u6DFB\u52A0\u5230\u76EE\u6807\u5217\u7684\u672B\u5C3E\uFF09\r\n            const sameColumnModules = this.homeModules\r\n                .filter(m => m.position === newPosition)\r\n                .sort((a, b) => a.order - b.order);\r\n            \r\n            moduleConfig.order = sameColumnModules.length;\r\n\r\n            // \u4FDD\u5B58\u66F4\u65B0\r\n            this.saveModuleSettings();\r\n\r\n            // \u91CD\u65B0\u6E32\u67D3\u4E3B\u9875\u89C6\u56FE\u5E76\u4FDD\u6301\u7F16\u6A21\u5F0F\r\n            this.createHomeView().then(() => {\r\n                // \u91CD\u65B0\u5E94\u7528\u7F16\u8F91\u6A21\u5F0F\r\n                const modules = this.container.querySelectorAll('.module-container');\r\n                modules.forEach(m => {\r\n                    if (m instanceof HTMLElement) {\r\n                        m.classList.add('editable');\r\n                        this.setupModuleDragging(m);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    // \u6E05\u7406\u6A21\u5757\u7F16\u8F91\r\n    private cleanupModuleEditing(module: HTMLElement) {\r\n        // \u79FB\u9664\u6240\u6709\u8C03\u6574\u5927\u5C0F\u7684\u624B\u67C4\r\n        module.querySelectorAll('.resize-handle').forEach(handle => handle.remove());\r\n        \r\n        // \u6E05\u9664\u62D6\u62FD\u76F8\u5173\u7684\u6837\u5F0F\r\n        module.style.transform = '';\r\n        module.style.zIndex = '';\r\n        module.style.opacity = '';\r\n        module.classList.remove('module-dragging'); // \u6DFB\u52A0\u8FD9\u884C\uFF0C\u79FB\u9664\u62D6\u62FD\u65F6\u7684\u6837\u5F0F\u7C7B\r\n        \r\n        // \u79FB\u9664\u865A\u7EBF\u8FB9\r\n        module.style.border = '1px solid var(--background-modifier-border)'; // \u6062\u590D\u9ED8\u8BA4\u8FB9\u6846\u6837\u5F0F\r\n    }\r\n    \r\n\r\n    // \u6A21\u5757-\u5FEB\u901F\u7B14\u8BB0\r\n    private async renderQuickNoteModule(container: HTMLElement) {\r\n        const quickNoteContainer = container.createDiv('quicknote-module');\r\n        \r\n        // \u521B\u5EFA\u8F93\u5165\u5BB9\u5668\r\n        const inputContainer = quickNoteContainer.createDiv('quick-note-input-container');\r\n\r\n        // \u521B\u5EFA\u6807\u9898\u8F93\u5165\u6846\r\n        const titleInput = inputContainer.createEl('input', {\r\n            cls: 'quick-note-title',\r\n            attr: {\r\n                placeholder: '\u8F93\u5165\u7B14\u6807\u9898...',\r\n                type: 'text'\r\n            }\r\n        });\r\n\r\n        // \u521B\u5EFA\u5185\u5BB9\u8F93\u5165\u6846\r\n        const noteInput = inputContainer.createEl('textarea', {\r\n            cls: 'quick-note-input',\r\n            attr: {\r\n                placeholder: '\u8F93\u5165\u7B14\u8BB0\u5185\u5BB9\uFF0C\u6309 Enter \u53D1\u9001...'\r\n            }\r\n        });\r\n\r\n        // \u521B\u5EFA\u6807\u7B7E\u5BB9\u5668\u548C\u6807\u7B7E\u96C6\r\n        const tagsContainer = inputContainer.createDiv('tags-container');\r\n        const tags = new Set<string>();\r\n\r\n        // \u521B\u5EFA\u6807\u7B7E\u8F93\u5165\u6846\r\n        const tagInput = tagsContainer.createEl('input', {\r\n            cls: 'tag-input',\r\n            attr: {\r\n                placeholder: '\u6DFB\u52A0\u6807\u7B7E...'\r\n            }\r\n        });\r\n\r\n        // \u521B\u5EFA\u5DE5\u5177\u680F\r\n        const quickNoteToolbar = inputContainer.createDiv('quick-note-toolbar');\r\n\r\n        // \u6DFB\u52A0\u4EE3\u7801\u6309\u94AE\r\n        const codeBtn = quickNoteToolbar.createEl('button', {\r\n            cls: 'quick-note-btn',\r\n            attr: { 'data-type': 'code' }\r\n        });\r\n        codeBtn.innerHTML = `\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"16 18 22 12 16 6\"></polyline><polyline points=\"8 6 2 12 8 18\"></polyline></svg>\r\n            \u7801\r\n        `;\r\n\r\n        // \u6DFB\u52A0\u56FE\u7247\u6309\u94AE\r\n        const imageBtn = quickNoteToolbar.createEl('button', {\r\n            cls: 'quick-note-btn',\r\n            attr: { 'data-type': 'image' }\r\n        });\r\n        imageBtn.innerHTML = `\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\"></circle><polyline points=\"21 15 16 10 5 21\"></polyline></svg>\r\n            \u56FE\u7247\r\n        `;\r\n\r\n        // \u6DFB\u52A0\u7075\u611F\u6309\u94AE\r\n        const ideaBtn = quickNoteToolbar.createEl('button', {\r\n            cls: 'quick-note-btn',\r\n            attr: { 'data-type': 'idea' }\r\n        });\r\n        ideaBtn.innerHTML = `\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\"></line><line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\"></line></svg>\r\n            \u7075\u611F\r\n        `;\r\n\r\n        // \u521B\u5EFA\u6807\u7B7E\u5EFA\u8BAE\u5BB9\u5668\r\n        const tagSuggestions = inputContainer.createDiv('tag-suggestions');\r\n\r\n        // \u6DFB\u52A0\u4E8B\u4EF6\u5904\u7406\r\n        this.setupQuickNoteEvents(noteInput, quickNoteToolbar, tagSuggestions);\r\n\r\n        // \u6DFB\u52A0\u9001\u6309\u94AE\r\n        const sendButton = inputContainer.createEl('button', {\r\n            cls: 'quick-note-send',\r\n            attr: {\r\n                'title': '\u9001\u8BB0'\r\n            }\r\n        });\r\n        sendButton.innerHTML = `\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><line x1=\"22\" y1=\"2\" x2=\"11\" y2=\"13\"></line><polygon points=\"22 2 15 22 11 13 2 9 22 2\"></polygon></svg>\r\n        `;\r\n\r\n        // \u53D1\u9001\u6309\u94AE\u4E8B\u4EF6\r\n        sendButton.addEventListener('click', async (e) => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            \r\n            const title = titleInput.value.trim();\r\n            const content = noteInput.value.trim();\r\n            \r\n            if (!content) {\r\n                new Notice('\u8BF7\u8F93\u5165\u7B14\u8BB0\u5185\u5BB9');\r\n                return;\r\n            }\r\n\r\n            try {\r\n                // \u83B7\u53D6\u6240\u6709\u6DFB\u52A0\u7684\u6807\u7B7E\r\n                const tagItems = tagsContainer.querySelectorAll('.tag-item');\r\n                const tagTexts = Array.from(tagItems).map(item => item.textContent?.replace('\u00D7', '').trim() ?? '');\r\n                \r\n                // \u6784\u5EFA\u7B14\u8BB0\u5185\u5BB9\u5305\u542B\u6807\u7B7E\r\n                const tagsContent = tagTexts.map(tag => `#${tag}`).join(' ');\r\n                const finalContent = tagsContent ? `${tagsContent}\\n\\n${content}` : content;\r\n                \r\n                // \u4F7F\u7528\u6807\u9898\u4F5C\u4E3A\u6587\u4EF6\u540D\r\n                const fileName = title || new Date().toLocaleDateString('zh-CN', {\r\n                    year: 'numeric',\r\n                    month: '2-digit',\r\n                    day: '2-digit'\r\n                }).replace(/\\//g, '-');\r\n\r\n                // \u521B\u5EFA\u7B14\u8BB0\r\n                const file = await this.createQuickNote(finalContent, [], fileName);\r\n                \r\n                if (file) {\r\n                    // \u6E05\u7406\u8F93\u5165\u72B6\u6001\r\n                    this.clearQuickNoteInputs(titleInput, noteInput, tags, tagsContainer, tagInput);\r\n                    \r\n                    new Notice('\uFFFD\uFFFD\uFFFD\u8BB0\u521B\u5EFA\u6210\u529F');\r\n                }\r\n            } catch (error) {\r\n                console.error('\u521B\u5EFA\u7B14\u8BB0\u5931\u8D25:', error);\r\n                new Notice('\u521B\u5EFA\u7B14\u8BB0\u5931\u8D25');\r\n            }\r\n        });\r\n    }\r\n\r\n    // \u6A21\u5757-\u5F85\u529E\u4E8B\u9879\r\n    private async renderTodoModule(container: HTMLElement) {\r\n        const todoContainer = container.createDiv('todo-module');\r\n        \r\n        // \u521B\u5EFA\u5206\u7C7B\u6807\u7B7E\r\n        const tabs = todoContainer.createDiv('todo-tabs');\r\n        const allTab = tabs.createDiv('todo-tab active');\r\n        allTab.setText('\u5168\u90E8');\r\n        const pendingTab = tabs.createDiv('todo-tab');\r\n        pendingTab.setText('\u5F85\u5B8C\u6210');\r\n        const completedTab = tabs.createDiv('todo-tab');\r\n        completedTab.setText('\u5DF2\u5B8C\u6210');\r\n\r\n\r\n        // \u521B\u5EFA\u8F93\u5165\u533A\u57DF\r\n        const inputArea = todoContainer.createDiv('todo-input-area');\r\n        \r\n        // \u521B\u5EFA\u8F93\u5165\u6846\r\n        const input = inputArea.createEl('input', {\r\n            type: 'text',\r\n            placeholder: '\u6DFB\u52A0\u65B0\u7684\u5F85\u529E\u4E8B\u9879...',\r\n            cls: 'todo-input'\r\n        });\r\n\r\n        // \u521B\u5EFA\u65E5\u671F\u9009\u62E9\u5668\r\n        const dateInput = inputArea.createEl('input', {\r\n            type: 'date',\r\n            cls: 'todo-date-input'\r\n        });\r\n\r\n        // \u521B\u5EFA\u6DFB\u52A0\u6309\u94AE\r\n        const addButton = inputArea.createEl('button', {\r\n            text: '\u6DFB\u52A0',\r\n            cls: 'todo-add-btn'\r\n        });\r\n\r\n        // \u521B\u5EFA\u5F85\u529E\u4E8B\u5217\u8868\u5BB9\r\n        const todoList = todoContainer.createDiv('todo-list');\r\n        \r\n\r\n        // \u52A0\u8F7D\u4FDD\u5B58\u7684\u5F85\u529E\u4E8B\u9879\r\n        const todos = await this.loadTodos();\r\n        this.renderTodoList(todoList, todos, 'all');\r\n\r\n        // \u6DFB\u52A0\u4E8B\u4EF6\u5904\u7406\r\n        addButton.addEventListener('click', async () => {\r\n            const content = input.value.trim();\r\n            const dueDate = dateInput.value;\r\n            if (content) {\r\n                const newTodo = {\r\n                    id: Date.now().toString(),\r\n                    content,\r\n                    completed: false,\r\n                    dueDate: dueDate || undefined,\r\n                    createdAt: new Date().toISOString()\r\n                };\r\n                \r\n                todos.push(newTodo);\r\n                await this.saveTodos(todos);\r\n                this.renderTodoList(todoList, todos, 'all');\r\n                \r\n                input.value = '';\r\n                dateInput.value = '';\r\n            }\r\n        });\r\n\r\n        // \u6DFB\u52A0\u56DE\u8F66\u952E\u5904\u7406\r\n        input.addEventListener('keypress', (e) => {\r\n            if (e.key === 'Enter') {\r\n                addButton.click();\r\n            }\r\n        });\r\n\r\n        // \u6DFB\u52A0\u6807\u7B7E\u5207\u6362\u4E8B\u4EF6\r\n        allTab.addEventListener('click', () => {\r\n            tabs.querySelectorAll('.todo-tab').forEach(tab => tab.removeClass('active'));\r\n            allTab.addClass('active');\r\n            this.renderTodoList(todoList, todos, 'all');\r\n        });\r\n\r\n        // \u5F85\u5B8C\u6210\u6807\u7B7E\u4E8B\u4EF6\r\n        pendingTab.addEventListener('click', () => {\r\n            tabs.querySelectorAll('.todo-tab').forEach(tab => tab.removeClass('active'));\r\n            pendingTab.addClass('active');\r\n            this.renderTodoList(todoList, todos, 'pending');\r\n        });\r\n\r\n        // \u5B8C\u6210\u6807\u7B7E\u4E8B\u4EF6\r\n        completedTab.addEventListener('click', () => {\r\n            tabs.querySelectorAll('.todo-tab').forEach(tab => tab.removeClass('active'));\r\n            completedTab.addClass('active');\r\n            this.renderTodoList(todoList, todos, 'completed');\r\n        });\r\n    }\r\n\r\n    // \u52A0\u8F7D\u5F85\u529E\u4E8B\u9879\r\n    private async loadTodos(): Promise<any[]> {\r\n        try {\r\n            const data = await this.plugin.loadData();\r\n            return data?.todos || [];\r\n        } catch (error) {\r\n            console.error('\u52A0\u8F7D\u5F85\u529E\u4E8B\u9879\u5931\u8D25:', error);\r\n            return [];\r\n        }\r\n    }\r\n\r\n    // \u4FDD\u5B58\u5F85\u529E\u4E8B\u9879\r\n    private async saveTodos(todos: any[]) {\r\n        try {\r\n            const data = await this.plugin.loadData() || {};\r\n            data.todos = todos;\r\n            await this.plugin.saveData(data);\r\n        } catch (error) {\r\n            console.error('\u4FDD\u5B58\u5F85\u529E\u4E8B\u9879\u5931\u8D25:', error);\r\n        }\r\n    }\r\n\r\n    // \u6E32\u67D3\u5F85\u529E\u4E8B\u9879\u5217\u8868\r\n    private renderTodoList(container: HTMLElement, todos: any[], filter: 'all' | 'pending' | 'completed') {\r\n        container.empty();\r\n        \r\n        const filteredTodos = todos.filter((todo: any) => {\r\n            if (filter === 'all') return true;\r\n            if (filter === 'pending') return !todo.completed;\r\n            if (filter === 'completed') return todo.completed;\r\n            return true;\r\n        });\r\n\r\n        filteredTodos.forEach(todo => {\r\n            const todoItem = container.createDiv('todo-item');\r\n            \r\n            // \u521B\u5EFA\u590D\u9009\u6846\r\n            const checkbox = todoItem.createEl('input', {\r\n                type: 'checkbox',\r\n                cls: 'todo-checkbox'\r\n            });\r\n            checkbox.checked = todo.completed;\r\n            \r\n            // \u521B\u5EFA\u5185\u5BB9\u533A\u57DF\r\n            const content = todoItem.createDiv('todo-content');\r\n            content.setText(todo.content);\r\n            if (todo.completed) {\r\n                content.addClass('completed');\r\n            }\r\n            \r\n            // \u5982\u679C\u6709\u622A\u6B62\u65E5\u671F\uFF0C\u663E\u793A\u65E5\u671F\r\n            if (todo.dueDate) {\r\n                const dueDate = todoItem.createDiv('todo-due-date');\r\n                const date = new Date(todo.dueDate);\r\n                dueDate.setText(date.toLocaleDateString());\r\n                \r\n                // \u5982\u679C\u5DF2\u8FC7\u671F\u4E14\u672A\u5B8C\u6210\uFF0C\u6DFB\u52A0\u8FC7\u671F\u6837\u5F0F\r\n                if (!todo.completed && date < new Date()) {\r\n                    dueDate.addClass('overdue');\r\n                }\r\n            }\r\n            \r\n            // \u521B\u5EFA\u5220\u9664\u6309\u94AE\r\n            const deleteBtn = todoItem.createDiv('todo-delete-btn');\r\n            deleteBtn.setText('\u00D7');\r\n            \r\n            // \u6DFB\u52A0\u4E8B\u4EF6\u5904\u7406\r\n            checkbox.addEventListener('change', async () => {\r\n                todo.completed = checkbox.checked;\r\n                content.toggleClass('completed', todo.completed);\r\n                await this.saveTodos(todos);\r\n            });\r\n            \r\n            deleteBtn.addEventListener('click', async () => {\r\n                const index = todos.findIndex(t => t.id === todo.id);\r\n                if (index !== -1) {\r\n                    todos.splice(index, 1);\r\n                    await this.saveTodos(todos);\r\n                    this.renderTodoList(container, todos, filter);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    // \u5728 CardView \u7C7B\u4E2D\u6DFB\u4EE5\u4E0B\u65B9\u6CD5\r\n\r\n    // \u663E\u793A\u7F51\u683C\u5BF9\u9F50\u6307\u793A\u5668\r\n    private showGridSnapIndicator(module: HTMLElement, width: number) {\r\n        let indicator = this.container.querySelector('.grid-snap-indicator');\r\n        if (!indicator) {\r\n            indicator = this.container.createDiv('grid-snap-indicator');\r\n        }\r\n        \r\n        const rect = module.getBoundingClientRect();\r\n        if (indicator instanceof HTMLElement) {\r\n            indicator.style.top = `${rect.top}px`;\r\n            indicator.style.left = `${rect.left}px`;\r\n            indicator.style.width = `${width}px`;\r\n            indicator.style.height = `${rect.height}px`;\r\n            indicator.style.display = 'block';\r\n        }\r\n    }\r\n\r\n    // \u9690\u85CF\u7F51\u683C\u5BF9\u9F50\u6307\u793A\u5668\r\n    private hideGridSnapIndicator() {\r\n        const indicator = this.container.querySelector('.grid-snap-indicator');\r\n        if (indicator instanceof HTMLElement) {\r\n            indicator.style.display = 'none';\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n// \u6A21\u5757\u7BA1\u7406-\u5F39\u7A97\r\nclass ModuleManagerModal extends Modal {\r\n    private modules: HomeModule[];\r\n    private onSave: (modules: HomeModule[]) => void;\r\n    private previewContainer: HTMLElement;\r\n    \r\n    constructor(app: App, modules: HomeModule[], onSave: (modules: HomeModule[]) => void) {\r\n        super(app);\r\n        this.modules = [...modules];\r\n        this.onSave = onSave;\r\n        this.previewContainer = createDiv(); // \u521D\u59CB\u5316 previewContainer\r\n    }\r\n\r\n    onOpen() {\r\n        const { contentEl } = this;\r\n        contentEl.empty();\r\n        \r\n        contentEl.createEl('h2', { text: '\u7BA1\u7406\u4E3B\u9875\u6A21\u5757' });\r\n        \r\n        // \u6DFB\u52A0\u9884\u89C8\u5BB9\r\n        this.previewContainer = contentEl.createDiv('preview-container');\r\n        this.updatePreview();\r\n        \r\n        const moduleList = contentEl.createDiv('module-list');\r\n        \r\n        this.modules.forEach((module, index) => {\r\n            const moduleItem = moduleList.createDiv('module-item');\r\n            \r\n            // \u6DFB\u52A0\u62D6\u52A8\u624B\r\n            moduleItem.createDiv('drag-handle').innerHTML = '\u22EE\u22EE';\r\n            \r\n            // \u6DFB\u52A0\u53EF\u89C1\u6027\u5207\u6362\r\n            const visibilityToggle = moduleItem.createEl('input', {\r\n                type: 'checkbox',\r\n                attr: { checked: module.visible }\r\n            } as any);\r\n            visibilityToggle.addEventListener('change', () => {\r\n                this.modules[index].visible = visibilityToggle.checked;\r\n            });\r\n            \r\n            // \u6DFB\u52A0\u6A21\u5757\u540D\u79F0\r\n            moduleItem.createEl('span', { text: module.name });\r\n            \r\n            // \u6DFB\u52A0\u4E0A\u4E0B\u79FB\u52A8\u6309\u94AE\r\n            const moveUp = moduleItem.createEl('button', { text: '\u2191' });\r\n            const moveDown = moduleItem.createEl('button', { text: '\u2193' });\r\n            \r\n            moveUp.addEventListener('click', () => this.moveModule(index, -1));\r\n            moveDown.addEventListener('click', () => this.moveModule(index, 1));\r\n        });\r\n        \r\n        // \u6DFB\u52A0\u4FDD\u5B58\u6309\u94AE\r\n        const saveBtn = contentEl.createEl('button', {\r\n            text: '\u4FDD\u5B58',\r\n            cls: 'mod-cta'\r\n        });\r\n        saveBtn.addEventListener('click', () => {\r\n            this.onSave(this.modules);\r\n            this.close();\r\n        });\r\n    }\r\n\r\n    // \u79FB\u52A8\u6A21\u5757\r\n    private moveModule(index: number, direction: number) {\r\n        const newIndex = index + direction;\r\n        if (newIndex >= 0 && newIndex < this.modules.length) {\r\n            const temp = this.modules[index];\r\n            this.modules[index] = this.modules[newIndex];\r\n            this.modules[newIndex] = temp;\r\n            // \u66F4\u65B0\u987A\u5E8F\r\n            this.modules.forEach((m, i) => m.order = i);\r\n            // \u91CD\u65B0\u6E32\u67D3\u5217\r\n            this.onOpen();\r\n        }\r\n    }\r\n\r\n    // \u6DFB\u52A0\u9884\u89C8\u66F4\u65B0\u65B9\u6CD5\r\n    private updatePreview() {\r\n        this.previewContainer.empty();\r\n        const previewGrid = this.previewContainer.createDiv('module-grid');\r\n        \r\n        this.modules\r\n            .filter(m => m.visible)\r\n            .sort((a, b) => a.order - b.order)\r\n            .forEach(module => {\r\n                const modulePreview = previewGrid.createDiv('module-preview');\r\n                modulePreview.style.gridColumn = `span ${module.columns || 4}`;\r\n                modulePreview.createEl('h4', { text: module.name });\r\n            });\r\n    }\r\n}\r\n\r\n// \u9ED8\u8BA4\u4E3B\u9875\u6A21\u5757\u914D\u7F6E\r\nexport const DEFAULT_HOME_MODULES: HomeModule[] = [\r\n    {\r\n        id: 'quicknote',\r\n        name: '\u5FEB\u901F\u7B14\u8BB0',\r\n        type: 'quicknote',\r\n        visible: true,\r\n        order: 0,\r\n        columns: 2,\r\n        position: 'center'\r\n    },\r\n    {\r\n        id: 'heatmap',\r\n        name: '\u6D3B\u52A8\u70ED\u529B\u56FE',\r\n        type: 'heatmap',\r\n        visible: true,\r\n        order: 1,\r\n        columns: 1,\r\n        position: 'left'\r\n    },\r\n    {\r\n        id: 'stats',\r\n        name: '\u7B14\u8BB0\u7EDF\u8BA1',\r\n        type: 'stats',\r\n        visible: true,\r\n        order: 2,\r\n        columns: 1,\r\n        position: 'right'\r\n    },\r\n    {\r\n        id: 'weekly',\r\n        name: '\u672C\u5468\u7B14\u8BB0',\r\n        type: 'weekly',\r\n        visible: true,\r\n        order: 3,\r\n        columns: 1,\r\n        position: 'left'\r\n    },\r\n    {\r\n        id: 'calendar',\r\n        name: '\u65E5\u5386',\r\n        type: 'calendar',\r\n        visible: true,\r\n        order: 4,\r\n        columns: 2,\r\n        position: 'center'\r\n    },\r\n    {\r\n        id: 'todo',\r\n        name: '\u5F85\u529E\u4E8B\u9879',\r\n        type: 'todo',\r\n        visible: true,\r\n        order: 5,\r\n        columns: 1,\r\n        position: 'right'\r\n    }\r\n];\r\n\r\n", "import {\r\n    TFile,\r\n    Notice,\r\n} from 'obsidian';\r\n\r\ninterface FolderItem {\r\n    path: string;\r\n    name: string;\r\n    level: number;\r\n}\r\n\r\n\r\n\r\n// \u6253\u5F00\u6587\u4EF6\r\nexport async function openInAppropriateLeaf(app: any, file: TFile, openFile: boolean = true) {\r\n    const fileExplorer = app.workspace.getLeavesOfType('file-explorer')[0];\r\n    if (fileExplorer) {\r\n        // app.workspace.revealLeaf(fileExplorer);  // \u5982\u679C\u6587\u4EF6\u6D4F\u89C8\u5DF2\u7ECF\u5728\uFF0C\u76F4\u63A5\u6D3B\u5B83\r\n        try {\r\n            if (openFile) {\r\n                // \u53EA\u6709\u5728\u8981\u6253\u5F00\u6587\u4EF6\u65F6\u624D\u6267\u884C\u8FD9\u4E9B\u64CD\u4F5C\r\n                const leaves = app.workspace.getLeavesOfType('markdown');\r\n                const currentRoot = app.leaf?.getRoot();\r\n                const otherLeaf = leaves.find((leaf: any) => {\r\n                    const root = leaf.getRoot();\r\n                    return root !== currentRoot;\r\n                });\r\n                \r\n                let targetLeaf;\r\n                if (otherLeaf) {\r\n                    await otherLeaf.openFile(file);\r\n                    targetLeaf = otherLeaf;\r\n                } else {\r\n                    targetLeaf = app.workspace.getLeaf('tab');\r\n                    await targetLeaf.openFile(file);\r\n                }\r\n                \r\n                app.workspace.setActiveLeaf(targetLeaf);\r\n            }\r\n            \r\n            // \u65E0\u8BBA\u662F\u5426\u6253\u5F00\u6587\u4EF6\uFF0C\u90FD\u5728\u6587\u4EF6\u7BA1\u7406\u5668\u4E2D\u5B9A\u4F4D\u6587\u4EF6\r\n            const fileExplorer = app.workspace.getLeavesOfType('file-explorer')[0];\r\n            if (fileExplorer && fileExplorer.view) {\r\n                await (fileExplorer.view as any).revealInFolder(file);\r\n            }\r\n        } catch (error) {\r\n            console.error('\u64CD\u4F5C\u5931\u8D25:', error);\r\n            new Notice('\u64CD\u4F5C\u5931\u8D25');\r\n        }\r\n    }\r\n}\r\n\r\n\r\n// \u83B7\u53D6\u6307\u5B9A\u5468\u7684\u65E5\u671F\u8303\u56F4\r\nexport function getWeekDates(year: number, week: number): Date[] {\r\n    console.log('\u83B7\u53D6\u5468\u65E5\u671F\u8303\u56F4 - \u5E74\u4EFD:', year, '\u5468\u6570:', week);\r\n    \r\n    // \u83B7\u53D6\u8BE5\u5E74\u7B2C\u4E00\u5929\r\n    const firstDayOfYear = new Date(year, 0, 1);\r\n    console.log('\u5E74\u521D\u7B2C\u4E00\u5929:', firstDayOfYear.toISOString());\r\n    \r\n    // \u8C03\u6574\u5230\u7B2C\u4E00\u4E2A\u5468\u4E00\r\n    const daysToFirstMonday = (8 - firstDayOfYear.getDay()) % 7;\r\n    const firstMonday = new Date(year, 0, 1 + daysToFirstMonday);\r\n    console.log('\u7B2C\u4E00\u4E2A\u5468\u4E00:', firstMonday.toISOString());\r\n    \r\n    // \u8BA1\u7B97\u76EE\u6807\u5468\u7684\u5468\u4E00\r\n    const weekStart = new Date(firstMonday);\r\n    weekStart.setDate(weekStart.getDate() + (week - 1) * 7);\r\n    console.log('\u76EE\u6807\u5468\u7684\u5468\u4E00:', weekStart.toISOString());\r\n    \r\n    // \u751F\u6210\u8BE5\u5468\u7684\u6240\u6709\u65E5\u671F\r\n    const dates: Date[] = [];\r\n    for (let i = 0; i < 7; i++) {\r\n        const date = new Date(weekStart);\r\n        date.setDate(date.getDate() + i);\r\n        dates.push(date);\r\n    }\r\n    \r\n    console.log('\u751F\u6210\u7684\u65E5\u671F\u8303\u56F4:', dates.map(d => d.toISOString()));\r\n    return dates;\r\n}\r\n\r\n\r\n// \u521B\u5EFA\u6587\u4EF6\u5939\u6811\r\nexport function createFolderTree(container: HTMLElement, folders: FolderItem[], selectFolder: (element: HTMLElement, path: string) => void) {\r\n    folders.forEach(folder => {\r\n        const item = container.createDiv({\r\n            cls: 'folder-item'\r\n        });\r\n\r\n        // \u6DFB\u52A0\u7F29\u8FDB\r\n        item.style.paddingLeft = `${folder.level * 20 + 10}px`;\r\n\r\n        // \u6DFB\u52A0\u6587\u4EF6\u5939\u56FE\u6807\u548C\u540D\u79F0\r\n        const icon = item.createSpan({\r\n            cls: 'folder-icon'\r\n        });\r\n        icon.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z\"></path></svg>`;\r\n        const nameSpan = item.createSpan({\r\n            cls: 'folder-name'\r\n        });\r\n        nameSpan.textContent = folder.name;\r\n\r\n        item.addEventListener('click', () => selectFolder(item, folder.path));\r\n    });\r\n}\r\n\r\n\r\n// \u83B7\u53D6\u5468\u7ED3\u675F\u65F6\u95F4\r\nexport function getEndOfWeek(): Date {\r\n    const date = new Date();\r\n    const day = date.getDay();\r\n    const diff = date.getDate() - day + (day === 0 ? 0 : 7); // \u8C03\u6574\u5468\u65E5\r\n    return new Date(date.setDate(diff));\r\n}\r\n\r\n\r\n// \u83B7\u53D6\u5468\u5F00\u59CB\u65F6\u95F4\r\nexport function  getStartOfWeek(): Date {\r\n    const date = new Date();\r\n    const day = date.getDay();\r\n    const diff = date.getDate() - day + (day === 0 ? -6 : 1); // \u8C03\u6574\u5468\u65E5\r\n    return new Date(date.setDate(diff));\r\n}\r\n", "import {\r\n    TFile,\r\n} from 'obsidian';\r\n\r\n\r\n// \u6A21\u5757-\u7EDF\u8BA1\u4FE1\u606F\r\nexport async function renderStats(app: any, container: HTMLElement) {\r\n    console.log('Rendering stats module...');\r\n    const statsContainer = container.createDiv('stats-container');\r\n    \r\n    // \u6DFB\u52A0\u521B\u5EFA\u7EDF\u8BA1\u5361\u7247\u7684\u8F85\u52A9\u65B9\u6CD5\r\n    const createStatCard  = (container: HTMLElement, label: string, value: number)=> {\r\n        const card = container.createDiv('stat-card');\r\n        card.createDiv('stat-label').setText(label);\r\n        card.createDiv('stat-value').setText(value.toString());\r\n    }\r\n\r\n\r\n    const files =  app.vault.getMarkdownFiles();\r\n    const totalNotes = files.length;\r\n    \r\n    // \u8BA1\u7B97\u603B\u5B57\u6570\r\n    let totalWords = 0;\r\n    for (const file of files) {\r\n        const content = await  app.vault.read(file);\r\n        totalWords += content.split(/\\s+/).length;\r\n    }\r\n    \r\n    // \u83B7\u53D6\u6240\u6709\u6807\u7B7E\r\n    const allTags = new Set<string>();\r\n    files.forEach((file: TFile) => {\r\n        const cache =  app.metadataCache.getFileCache(file);\r\n        if (cache?.tags) {\r\n            cache.tags.forEach((tag: {tag: string}) => allTags.add(tag.tag));\r\n        }\r\n    });\r\n    \r\n    // \u521B\u5EFA\u7EDF\u8BA1\u5361\u7247\r\n    createStatCard(statsContainer, '\u603B\u7B14\u8BB0\u6570', totalNotes);\r\n    createStatCard(statsContainer, '\u603B\u5B57\u6570', totalWords);\r\n    createStatCard(statsContainer, '\u4F7F\u7528\u6807\u7B7E\u6570', allTags.size);\r\n}\r\n\r\n"],
  "mappings": "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",
  "names": ["import_obsidian", "import_obsidian", "fileExplorer", "container", "_a", "_b", "noteContent", "previewWrapper", "e", "workspaceLeafContent", "module", "cell", "dateStr", "dayNotes", "module"]
}

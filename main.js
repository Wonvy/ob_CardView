/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};

// main.ts
__export(exports, {
  default: () => CardViewPlugin
});
var import_obsidian2 = __toModule(require("obsidian"));

// cardView.ts
var import_obsidian = __toModule(require("obsidian"));
var VIEW_TYPE_CARD = "card-view";
var CardView = class extends import_obsidian.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.isPreviewCollapsed = false;
    this.currentFolder = null;
    this.plugin = plugin;
    this.currentView = plugin.settings.defaultView;
  }
  getViewType() {
    return VIEW_TYPE_CARD;
  }
  getDisplayText() {
    return "\u5361\u7247\u89C6\u56FE";
  }
  async onOpen() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.addClass("card-view-container");
    const toolbar = containerEl.createDiv("card-view-toolbar");
    const leftTools = toolbar.createDiv("toolbar-left");
    const newNoteBtn = leftTools.createEl("button", {
      cls: "new-note-button"
    });
    newNoteBtn.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
            <span>\u65B0\u5EFA\u7B14\u8BB0</span>
        `;
    newNoteBtn.addEventListener("click", () => this.createNewNote());
    const viewSwitcher = leftTools.createDiv("view-switcher");
    this.createViewSwitcher(viewSwitcher);
    this.tagContainer = toolbar.createDiv("tag-filter");
    await this.loadTags();
    const contentArea = containerEl.createDiv("card-view-content");
    this.container = contentArea.createDiv("card-container");
    const previewWrapper = containerEl.createDiv("preview-wrapper");
    this.previewContainer = previewWrapper.createDiv("preview-container");
    const previewControls = previewWrapper.createDiv("preview-controls");
    const toggleButton = previewControls.createEl("button", {
      cls: "preview-toggle",
      attr: { "aria-label": "\u6298\u53E0\u9884\u89C8" }
    });
    toggleButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>`;
    toggleButton.addEventListener("click", () => this.togglePreview());
    this.previewResizer = previewWrapper.createDiv("preview-resizer");
    this.setupResizer();
    await this.loadNotes();
  }
  async loadTags() {
    const tags = this.getAllTags();
    tags.forEach((tag) => {
      const tagEl = this.tagContainer.createEl("button", { text: tag });
      tagEl.addEventListener("click", () => this.filterByTag(tag));
    });
  }
  getAllTags() {
    const tags = new Set();
    this.app.vault.getMarkdownFiles().forEach((file) => {
      const cache = this.app.metadataCache.getFileCache(file);
      if (cache == null ? void 0 : cache.tags) {
        cache.tags.forEach((tag) => tags.add(tag.tag));
      }
    });
    return Array.from(tags);
  }
  createViewSwitcher(container) {
    const views = [
      { id: "card", icon: "grid", text: "\u5361\u7247\u89C6\u56FE" },
      { id: "list", icon: "list", text: "\u5217\u8868\u89C6\u56FE" },
      { id: "timeline", icon: "clock", text: "\u65F6\u95F4\u8F74\u89C6\u56FE" }
    ];
    views.forEach((view) => {
      const btn = container.createEl("button", {
        cls: `view-switch-btn ${view.id === this.currentView ? "active" : ""}`
      });
      const iconHtml = {
        "grid": '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>',
        "list": '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>',
        "clock": '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>'
      };
      const iconSpan = btn.createSpan({ cls: "view-switch-icon" });
      iconSpan.innerHTML = iconHtml[view.icon];
      btn.createSpan({ text: view.text, cls: "view-switch-text" });
      btn.addEventListener("click", () => {
        container.querySelectorAll(".view-switch-btn").forEach((b) => b.removeClass("active"));
        btn.addClass("active");
        this.switchView(view.id);
      });
    });
  }
  async loadNotes() {
    const files = this.app.vault.getMarkdownFiles();
    this.container.empty();
    files.forEach((file) => {
      const card = this.createNoteCard(file);
      this.container.appendChild(card);
    });
  }
  createNoteCard(file) {
    const card = document.createElement("div");
    card.addClass("note-card");
    const title = card.createDiv("note-title");
    title.setText(file.basename);
    const lastModified = card.createDiv("note-date");
    lastModified.setText(new Date(file.stat.mtime).toLocaleDateString());
    const folderPath = card.createDiv("note-folder");
    const folder = file.parent ? file.parent.path === "/" ? "\u6839\u76EE\u5F55" : file.parent.path : "\u6839\u76EE\u5F55";
    folderPath.setText(folder);
    folderPath.setAttribute("title", folder);
    folderPath.addEventListener("click", (e) => {
      e.stopPropagation();
      this.highlightFolder(folder);
      this.revealFolderInExplorer(folder);
    });
    const cache = this.app.metadataCache.getFileCache(file);
    if (cache == null ? void 0 : cache.tags) {
      const tagContainer = card.createDiv("note-tags");
      cache.tags.forEach((tag) => {
        const tagEl = tagContainer.createEl("span", {
          text: tag.tag,
          cls: "note-tag"
        });
      });
    }
    card.addEventListener("click", async () => {
      const leaf = this.app.workspace.getLeaf("tab");
      await leaf.openFile(file);
    });
    card.addEventListener("mouseenter", async () => {
      try {
        this.previewContainer.empty();
        const content = await this.app.vault.read(file);
        await import_obsidian.MarkdownRenderer.renderMarkdown(content, this.previewContainer, file.path, this);
      } catch (error) {
        console.error("\u9884\u89C8\u52A0\u8F7D\u5931\u8D25:", error);
        this.previewContainer.setText("\u9884\u89C8\u52A0\u8F7D\u5931\u8D25");
      }
    });
    return card;
  }
  switchView(view) {
    this.currentView = view;
    this.container.setAttribute("data-view", view);
    this.container.empty();
    if (view === "timeline") {
      this.createTimelineView();
    } else {
      this.loadNotes();
    }
  }
  filterByTag(tag) {
    const files = this.app.vault.getMarkdownFiles();
    this.container.empty();
    files.forEach((file) => {
      const cache = this.app.metadataCache.getFileCache(file);
      if ((cache == null ? void 0 : cache.tags) && cache.tags.some((t) => t.tag === tag)) {
        const card = this.createNoteCard(file);
        this.container.appendChild(card);
      }
    });
    this.tagContainer.querySelectorAll("button").forEach((btn) => {
      if (btn.textContent === tag) {
        btn.addClass("active-tag");
      } else {
        btn.removeClass("active-tag");
      }
    });
  }
  togglePreview() {
    this.isPreviewCollapsed = !this.isPreviewCollapsed;
    if (this.isPreviewCollapsed) {
      this.previewContainer.addClass("collapsed");
    } else {
      this.previewContainer.removeClass("collapsed");
    }
  }
  setupResizer() {
    let startX;
    let startWidth;
    const startResize = (e) => {
      e.preventDefault();
      startX = e.pageX;
      startWidth = parseInt(getComputedStyle(this.previewContainer).width, 10);
      document.addEventListener("mousemove", resize);
      document.addEventListener("mouseup", stopResize);
    };
    const resize = (e) => {
      const width = startWidth - (e.pageX - startX);
      if (width >= 50 && width <= 800) {
        this.previewContainer.style.width = `${width}px`;
        if (this.isPreviewCollapsed) {
          this.isPreviewCollapsed = false;
          this.previewContainer.removeClass("collapsed");
        }
      }
    };
    const stopResize = () => {
      document.removeEventListener("mousemove", resize);
      document.removeEventListener("mouseup", stopResize);
    };
    this.previewResizer.addEventListener("mousedown", startResize);
  }
  highlightFolder(folder) {
    this.currentFolder = this.currentFolder === folder ? null : folder;
    this.container.querySelectorAll(".note-card").forEach((card) => {
      const folderElement = card.querySelector(".note-folder");
      const cardFolder = folderElement ? folderElement.textContent : null;
      if (cardFolder) {
        card.toggleClass("folder-highlight", cardFolder === folder);
      }
    });
  }
  async revealFolderInExplorer(folder) {
    const fileExplorer = this.app.workspace.getLeavesOfType("file-explorer")[0];
    if (fileExplorer) {
      const fileExplorerView = fileExplorer.view;
      if (folder === "\u6839\u76EE\u5F55") {
        if (fileExplorerView.expandFolder) {
          await fileExplorerView.expandFolder("/");
        }
        return;
      }
      if (fileExplorerView.expandFolder) {
        const folderParts = folder.split("/");
        let currentPath = "";
        for (const part of folderParts) {
          currentPath += (currentPath ? "/" : "") + part;
          await fileExplorerView.expandFolder(currentPath);
        }
        if (fileExplorerView.setSelection) {
          await fileExplorerView.setSelection(folder);
        }
      }
    }
  }
  async createNewNote() {
    const date = new Date();
    const fileName = `\u672A\u547D\u540D\u7B14\u8BB0 ${date.toLocaleString().replace(/[/:]/g, "-")}`;
    try {
      const file = await this.app.vault.create(`${fileName}.md`, "# " + fileName + "\n\n");
      const leaf = this.app.workspace.getLeaf("tab");
      await leaf.openFile(file);
      this.loadNotes();
    } catch (error) {
      console.error("\u521B\u5EFA\u7B14\u8BB0\u5931\u8D25:", error);
    }
  }
  createTimelineView() {
    const timelineContainer = this.container.createDiv("timeline-container");
    const files = this.app.vault.getMarkdownFiles();
    const notesByDate = new Map();
    files.forEach((file) => {
      const date = new Date(file.stat.mtime).toLocaleDateString();
      if (!notesByDate.has(date)) {
        notesByDate.set(date, []);
      }
      const notes = notesByDate.get(date);
      if (notes) {
        notes.push(file);
      }
    });
    const sortedDates = Array.from(notesByDate.keys()).sort((a, b) => new Date(b).getTime() - new Date(a).getTime());
    sortedDates.forEach((date) => {
      const dateGroup = timelineContainer.createDiv("timeline-date-group");
      const dateNode = dateGroup.createDiv("timeline-date-node");
      dateNode.createDiv("timeline-node-circle");
      dateNode.createDiv("timeline-date-label").setText(date);
      const notesList = dateGroup.createDiv("timeline-notes-list");
      const notes = notesByDate.get(date);
      if (notes) {
        notes.forEach((file) => {
          const noteItem = notesList.createDiv("timeline-note-item");
          noteItem.createDiv("timeline-note-marker");
          const noteContent = noteItem.createDiv("timeline-note-content");
          noteContent.createDiv("timeline-note-title").setText(file.basename);
          noteItem.addEventListener("click", async () => {
            const leaf = this.app.workspace.getLeaf("tab");
            await leaf.openFile(file);
          });
          noteItem.addEventListener("mouseenter", async () => {
            try {
              this.previewContainer.empty();
              const content = await this.app.vault.read(file);
              await import_obsidian.MarkdownRenderer.renderMarkdown(content, this.previewContainer, file.path, this);
            } catch (error) {
              console.error("\u9884\u89C8\u52A0\u8F7D\u5931\u8D25:", error);
            }
          });
        });
      }
    });
  }
};

// main.ts
var DEFAULT_SETTINGS = {
  defaultView: "card"
};
var CardViewSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian2.Setting(containerEl).setName("\u9ED8\u8BA4\u89C6\u56FE").setDesc("\u9009\u62E9\u9ED8\u8BA4\u7684\u89C6\u56FE\u6A21\u5F0F").addDropdown((dropdown) => dropdown.addOption("card", "\u5361\u7247\u89C6\u56FE1").addOption("list", "\u5217\u8868\u89C6\u56FE").addOption("timeline", "\u65F6\u95F4\u8F74\u89C6\u56FE").setValue(this.plugin.settings.defaultView).onChange(async (value) => {
      this.plugin.settings.defaultView = value;
      await this.plugin.saveSettings();
    }));
  }
};
var CardViewPlugin = class extends import_obsidian2.Plugin {
  async onload() {
    await this.loadSettings();
    this.registerView(VIEW_TYPE_CARD, (leaf) => new CardView(leaf, this));
    this.addRibbonIcon("layout-grid", "\u5361\u7247\u89C6\u56FE", () => {
      this.activateView();
    });
    this.addSettingTab(new CardViewSettingTab(this.app, this));
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async activateView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType(VIEW_TYPE_CARD)[0];
    if (!leaf) {
      leaf = workspace.getLeaf("tab");
      await leaf.setViewState({
        type: VIEW_TYPE_CARD,
        active: true
      });
    }
    workspace.revealLeaf(leaf);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJjYXJkVmlldy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIFRGaWxlLCBXb3Jrc3BhY2VMZWFmIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBDYXJkVmlldywgVklFV19UWVBFX0NBUkQgfSBmcm9tICcuL2NhcmRWaWV3JztcclxuXHJcbmludGVyZmFjZSBDYXJkVmlld1BsdWdpblNldHRpbmdzIHtcclxuICAgIGRlZmF1bHRWaWV3OiAnY2FyZCcgfCAnbGlzdCcgfCAndGltZWxpbmUnO1xyXG59XHJcblxyXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBDYXJkVmlld1BsdWdpblNldHRpbmdzID0ge1xyXG4gICAgZGVmYXVsdFZpZXc6ICdjYXJkJ1xyXG59XHJcblxyXG4vLyBcdTZERkJcdTUyQTBcdThCQkVcdTdGNkVcdTkwMDlcdTk4NzlcdTUzNjFcdTdDN0JcclxuY2xhc3MgQ2FyZFZpZXdTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgICBwbHVnaW46IENhcmRWaWV3UGx1Z2luO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IENhcmRWaWV3UGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXkoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1OUVEOFx1OEJBNFx1ODlDNlx1NTZGRScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdTkwMDlcdTYyRTlcdTlFRDhcdThCQTRcdTc2ODRcdTg5QzZcdTU2RkVcdTZBMjFcdTVGMEYnKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gXHJcbiAgICAgICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2NhcmQnLCAnXHU1MzYxXHU3MjQ3XHU4OUM2XHU1NkZFMScpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbGlzdCcsICdcdTUyMTdcdTg4NjhcdTg5QzZcdTU2RkUnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ3RpbWVsaW5lJywgJ1x1NjVGNlx1OTVGNFx1OEY3NFx1ODlDNlx1NTZGRScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRWaWV3KVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6ICdjYXJkJyB8ICdsaXN0JyB8ICd0aW1lbGluZScpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFZpZXcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZFZpZXdQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG4gICAgc2V0dGluZ3M6IENhcmRWaWV3UGx1Z2luU2V0dGluZ3M7XHJcblxyXG4gICAgYXN5bmMgb25sb2FkKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxyXG4gICAgICAgICAgICBWSUVXX1RZUEVfQ0FSRCxcclxuICAgICAgICAgICAgKGxlYWY6IFdvcmtzcGFjZUxlYWYpID0+IG5ldyBDYXJkVmlldyhsZWFmLCB0aGlzKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbignbGF5b3V0LWdyaWQnLCAnXHU1MzYxXHU3MjQ3XHU4OUM2XHU1NkZFJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2YXRlVmlldygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IENhcmRWaWV3U2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBhY3RpdmF0ZVZpZXcoKSB7XHJcbiAgICAgICAgY29uc3QgeyB3b3Jrc3BhY2UgfSA9IHRoaXMuYXBwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBsZWFmID0gd29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfQ0FSRClbMF07XHJcbiAgICAgICAgaWYgKCFsZWFmKSB7XHJcbiAgICAgICAgICAgIC8vIFx1NEZFRVx1NjUzOVx1OEZEOVx1OTFDQ1x1RkYwQ1x1NEY3Rlx1NzUyOCBnZXRMZWFmIFx1NTIxQlx1NUVGQVx1NjVCMFx1NjgwN1x1N0I3RVx1OTg3NVxyXG4gICAgICAgICAgICBsZWFmID0gd29ya3NwYWNlLmdldExlYWYoJ3RhYicpO1xyXG4gICAgICAgICAgICBhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBWSUVXX1RZUEVfQ0FSRCxcclxuICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xyXG4gICAgfVxyXG59ICIsICJpbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgVEZpbGUsIE1hcmtkb3duUmVuZGVyZXIgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBDYXJkVmlld1BsdWdpbiBmcm9tICcuL21haW4nO1xyXG5cclxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9DQVJEID0gJ2NhcmQtdmlldyc7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2FyZFZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XHJcbiAgICBwcml2YXRlIHBsdWdpbjogQ2FyZFZpZXdQbHVnaW47XHJcbiAgICBwcml2YXRlIGN1cnJlbnRWaWV3OiAnY2FyZCcgfCAnbGlzdCcgfCAndGltZWxpbmUnO1xyXG4gICAgcHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSB0YWdDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBjb250ZW50Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgcHJldmlld0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHByZXZpZXdSZXNpemVyOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgaXNQcmV2aWV3Q29sbGFwc2VkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGN1cnJlbnRGb2xkZXI6IHN0cmluZyB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU2Nzg0XHU5MDIwXHU1MUZEXHU2NTcwXHJcbiAgICAgKiBAcGFyYW0gbGVhZiAtIFx1NURFNVx1NEY1Q1x1NTMzQVx1NTNGNlx1NUI1MFx1ODI4Mlx1NzBCOVxyXG4gICAgICogQHBhcmFtIHBsdWdpbiAtIFx1NjNEMlx1NEVGNlx1NUI5RVx1NEY4QlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IENhcmRWaWV3UGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIobGVhZik7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VmlldyA9IHBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0VmlldztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1ODNCN1x1NTNENlx1ODlDNlx1NTZGRVx1N0M3Qlx1NTc4QlxyXG4gICAgICogQHJldHVybnMgXHU4OUM2XHU1NkZFXHU3QzdCXHU1NzhCXHU2ODA3XHU4QkM2XHU3QjI2XHJcbiAgICAgKi9cclxuICAgIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFZJRVdfVFlQRV9DQVJEO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU4M0I3XHU1M0Q2XHU4OUM2XHU1NkZFXHU2NjNFXHU3OTNBXHU2NTg3XHU2NzJDXHJcbiAgICAgKiBAcmV0dXJucyBcdTY2M0VcdTc5M0FcdTU3MjhcdTY4MDdcdTdCN0VcdTk4NzVcdTRFMEFcdTc2ODRcdTY1ODdcdTY3MkNcclxuICAgICAqL1xyXG4gICAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ1x1NTM2MVx1NzI0N1x1ODlDNlx1NTZGRSc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTg5QzZcdTU2RkVcdTYyNTNcdTVGMDBcdTY1RjZcdTc2ODRcdTUyMURcdTU5Q0JcdTUzMTZcdTUxRkRcdTY1NzBcclxuICAgICAqIFx1NTIxQlx1NUVGQVx1NjgwN1x1N0I3RVx1OEZDN1x1NkVFNFx1NTY2OFx1MzAwMVx1ODlDNlx1NTZGRVx1NTIwN1x1NjM2Mlx1NjMwOVx1OTRBRVx1NTQ4Q1x1NUJCOVx1NTY2OFxyXG4gICAgICovXHJcbiAgICBhc3luYyBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRhaW5lckVsLmFkZENsYXNzKCdjYXJkLXZpZXctY29udGFpbmVyJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU1REU1XHU1MTc3XHU2ODBGXHJcbiAgICAgICAgY29uc3QgdG9vbGJhciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdignY2FyZC12aWV3LXRvb2xiYXInKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTVERTVcdTUxNzdcdTY4MEZcdTVERTZcdTRGQTdcdTUzM0FcdTU3REZcclxuICAgICAgICBjb25zdCBsZWZ0VG9vbHMgPSB0b29sYmFyLmNyZWF0ZURpdigndG9vbGJhci1sZWZ0Jyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2NUIwXHU1RUZBXHU3QjE0XHU4QkIwXHU2MzA5XHU5NEFFXHJcbiAgICAgICAgY29uc3QgbmV3Tm90ZUJ0biA9IGxlZnRUb29scy5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICAgICAgICBjbHM6ICduZXctbm90ZS1idXR0b24nLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjVCMFx1NUVGQVx1N0IxNFx1OEJCMFx1NjMwOVx1OTRBRVx1NzY4NFx1NTZGRVx1NjgwN1x1NTQ4Q1x1NjU4N1x1NjcyQ1xyXG4gICAgICAgIG5ld05vdGVCdG4uaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjE2XCIgaGVpZ2h0PVwiMTZcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgY2xhc3M9XCJsdWNpZGUgbHVjaWRlLXBsdXNcIj48bGluZSB4MT1cIjEyXCIgeTE9XCI1XCIgeDI9XCIxMlwiIHkyPVwiMTlcIj48L2xpbmU+PGxpbmUgeDE9XCI1XCIgeTE9XCIxMlwiIHgyPVwiMTlcIiB5Mj1cIjEyXCI+PC9saW5lPjwvc3ZnPlxyXG4gICAgICAgICAgICA8c3Bhbj5cdTY1QjBcdTVFRkFcdTdCMTRcdThCQjA8L3NwYW4+XHJcbiAgICAgICAgYDtcclxuICAgICAgICBuZXdOb3RlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jcmVhdGVOZXdOb3RlKCkpO1xyXG5cclxuICAgICAgICAvLyBcdTg5QzZcdTU2RkVcdTUyMDdcdTYzNjJcdTYzMDlcdTk0QUVcdTdFQzRcclxuICAgICAgICBjb25zdCB2aWV3U3dpdGNoZXIgPSBsZWZ0VG9vbHMuY3JlYXRlRGl2KCd2aWV3LXN3aXRjaGVyJyk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVWaWV3U3dpdGNoZXIodmlld1N3aXRjaGVyKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTVERTVcdTUxNzdcdTY4MEZcdTUzRjNcdTRGQTdcdTUzM0FcdTU3REZcdUZGMDhcdTY4MDdcdTdCN0VcdThGQzdcdTZFRTRcdTU2NjhcdUZGMDlcclxuICAgICAgICB0aGlzLnRhZ0NvbnRhaW5lciA9IHRvb2xiYXIuY3JlYXRlRGl2KCd0YWctZmlsdGVyJyk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkVGFncygpO1xyXG5cclxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTRFM0JcdTUxODVcdTVCQjlcdTUzM0FcdTU3REZcclxuICAgICAgICBjb25zdCBjb250ZW50QXJlYSA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdignY2FyZC12aWV3LWNvbnRlbnQnKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRlbnRBcmVhLmNyZWF0ZURpdignY2FyZC1jb250YWluZXInKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTk4ODRcdTg5QzhcdTUzM0FcdTU3REZcclxuICAgICAgICBjb25zdCBwcmV2aWV3V3JhcHBlciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigncHJldmlldy13cmFwcGVyJyk7XHJcbiAgICAgICAgdGhpcy5wcmV2aWV3Q29udGFpbmVyID0gcHJldmlld1dyYXBwZXIuY3JlYXRlRGl2KCdwcmV2aWV3LWNvbnRhaW5lcicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OTg4NFx1ODlDOFx1NjNBN1x1NTIzNlx1NjMwOVx1OTRBRVxyXG4gICAgICAgIGNvbnN0IHByZXZpZXdDb250cm9scyA9IHByZXZpZXdXcmFwcGVyLmNyZWF0ZURpdigncHJldmlldy1jb250cm9scycpO1xyXG4gICAgICAgIGNvbnN0IHRvZ2dsZUJ1dHRvbiA9IHByZXZpZXdDb250cm9scy5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICAgICAgICBjbHM6ICdwcmV2aWV3LXRvZ2dsZScsXHJcbiAgICAgICAgICAgIGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnXHU2Mjk4XHU1M0UwXHU5ODg0XHU4OUM4JyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdG9nZ2xlQnV0dG9uLmlubmVySFRNTCA9IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgY2xhc3M9XCJmZWF0aGVyIGZlYXRoZXItY2hldnJvbi1yaWdodFwiPjxwb2x5bGluZSBwb2ludHM9XCI5IDE4IDE1IDEyIDkgNlwiPjwvcG9seWxpbmU+PC9zdmc+YDtcclxuICAgICAgICBcclxuICAgICAgICB0b2dnbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnRvZ2dsZVByZXZpZXcoKSk7XHJcblxyXG4gICAgICAgIHRoaXMucHJldmlld1Jlc2l6ZXIgPSBwcmV2aWV3V3JhcHBlci5jcmVhdGVEaXYoJ3ByZXZpZXctcmVzaXplcicpO1xyXG4gICAgICAgIHRoaXMuc2V0dXBSZXNpemVyKCk7XHJcblxyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZE5vdGVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTUyQTBcdThGN0RcdTYyNDBcdTY3MDlcdTY4MDdcdTdCN0VcdTVFNzZcdTUyMUJcdTVFRkFcdTY4MDdcdTdCN0VcdThGQzdcdTZFRTRcdTU2NjhcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkVGFncygpIHtcclxuICAgICAgICBjb25zdCB0YWdzID0gdGhpcy5nZXRBbGxUYWdzKCk7XHJcbiAgICAgICAgdGFncy5mb3JFYWNoKHRhZyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhZ0VsID0gdGhpcy50YWdDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogdGFnIH0pO1xyXG4gICAgICAgICAgICB0YWdFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuZmlsdGVyQnlUYWcodGFnKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTgzQjdcdTUzRDZcdTYyNDBcdTY3MDlcdTdCMTRcdThCQjBcdTRFMkRcdTc2ODRcdTY4MDdcdTdCN0VcclxuICAgICAqIEByZXR1cm5zIFx1NTNCQlx1OTFDRFx1NTQwRVx1NzY4NFx1NjgwN1x1N0I3RVx1NjU3MFx1N0VDNFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldEFsbFRhZ3MoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIGNvbnN0IHRhZ3MgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuICAgICAgICB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZm9yRWFjaChmaWxlID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcclxuICAgICAgICAgICAgaWYgKGNhY2hlPy50YWdzKSB7XHJcbiAgICAgICAgICAgICAgICBjYWNoZS50YWdzLmZvckVhY2godGFnID0+IHRhZ3MuYWRkKHRhZy50YWcpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRhZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1MjFCXHU1RUZBXHU4OUM2XHU1NkZFXHU1MjA3XHU2MzYyXHU2MzA5XHU5NEFFXHJcbiAgICAgKiBAcGFyYW0gY29udGFpbmVyIC0gXHU2MzA5XHU5NEFFXHU1QkI5XHU1NjY4XHU1MTQzXHU3RDIwXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY3JlYXRlVmlld1N3aXRjaGVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCB2aWV3cyA9IFtcclxuICAgICAgICAgICAgeyBpZDogJ2NhcmQnLCBpY29uOiAnZ3JpZCcsIHRleHQ6ICdcdTUzNjFcdTcyNDdcdTg5QzZcdTU2RkUnIH0sXHJcbiAgICAgICAgICAgIHsgaWQ6ICdsaXN0JywgaWNvbjogJ2xpc3QnLCB0ZXh0OiAnXHU1MjE3XHU4ODY4XHU4OUM2XHU1NkZFJyB9LFxyXG4gICAgICAgICAgICB7IGlkOiAndGltZWxpbmUnLCBpY29uOiAnY2xvY2snLCB0ZXh0OiAnXHU2NUY2XHU5NUY0XHU4Rjc0XHU4OUM2XHU1NkZFJyB9XHJcbiAgICAgICAgXTtcclxuICAgICAgICBcclxuICAgICAgICB2aWV3cy5mb3JFYWNoKHZpZXcgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBidG4gPSBjb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuICAgICAgICAgICAgICAgIGNsczogYHZpZXctc3dpdGNoLWJ0biAke3ZpZXcuaWQgPT09IHRoaXMuY3VycmVudFZpZXcgPyAnYWN0aXZlJyA6ICcnfWAsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU3NkY0XHU2M0E1XHU0RjdGXHU3NTI4IFNWRyBcdTU2RkVcdTY4MDdcclxuICAgICAgICAgICAgY29uc3QgaWNvbkh0bWwgPSB7XHJcbiAgICAgICAgICAgICAgICAnZ3JpZCc6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjE4XCIgaGVpZ2h0PVwiMThcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+PHJlY3QgeD1cIjNcIiB5PVwiM1wiIHdpZHRoPVwiN1wiIGhlaWdodD1cIjdcIj48L3JlY3Q+PHJlY3QgeD1cIjE0XCIgeT1cIjNcIiB3aWR0aD1cIjdcIiBoZWlnaHQ9XCI3XCI+PC9yZWN0PjxyZWN0IHg9XCIxNFwiIHk9XCIxNFwiIHdpZHRoPVwiN1wiIGhlaWdodD1cIjdcIj48L3JlY3Q+PHJlY3QgeD1cIjNcIiB5PVwiMTRcIiB3aWR0aD1cIjdcIiBoZWlnaHQ9XCI3XCI+PC9yZWN0Pjwvc3ZnPicsXHJcbiAgICAgICAgICAgICAgICAnbGlzdCc6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjE4XCIgaGVpZ2h0PVwiMThcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+PGxpbmUgeDE9XCI4XCIgeTE9XCI2XCIgeDI9XCIyMVwiIHkyPVwiNlwiPjwvbGluZT48bGluZSB4MT1cIjhcIiB5MT1cIjEyXCIgeDI9XCIyMVwiIHkyPVwiMTJcIj48L2xpbmU+PGxpbmUgeDE9XCI4XCIgeTE9XCIxOFwiIHgyPVwiMjFcIiB5Mj1cIjE4XCI+PC9saW5lPjxsaW5lIHgxPVwiM1wiIHkxPVwiNlwiIHgyPVwiMy4wMVwiIHkyPVwiNlwiPjwvbGluZT48bGluZSB4MT1cIjNcIiB5MT1cIjEyXCIgeDI9XCIzLjAxXCIgeTI9XCIxMlwiPjwvbGluZT48bGluZSB4MT1cIjNcIiB5MT1cIjE4XCIgeDI9XCIzLjAxXCIgeTI9XCIxOFwiPjwvbGluZT48L3N2Zz4nLFxyXG4gICAgICAgICAgICAgICAgJ2Nsb2NrJzogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMThcIiBoZWlnaHQ9XCIxOFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIj48Y2lyY2xlIGN4PVwiMTJcIiBjeT1cIjEyXCIgcj1cIjEwXCI+PC9jaXJjbGU+PHBvbHlsaW5lIHBvaW50cz1cIjEyIDYgMTIgMTIgMTYgMTRcIj48L3BvbHlsaW5lPjwvc3ZnPidcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NTZGRVx1NjgwN1x1NUJCOVx1NTY2OFxyXG4gICAgICAgICAgICBjb25zdCBpY29uU3BhbiA9IGJ0bi5jcmVhdGVTcGFuKHsgY2xzOiAndmlldy1zd2l0Y2gtaWNvbicgfSk7XHJcbiAgICAgICAgICAgIGljb25TcGFuLmlubmVySFRNTCA9IGljb25IdG1sW3ZpZXcuaWNvbl07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTY1ODdcdTVCNTdcclxuICAgICAgICAgICAgYnRuLmNyZWF0ZVNwYW4oeyB0ZXh0OiB2aWV3LnRleHQsIGNsczogJ3ZpZXctc3dpdGNoLXRleHQnIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy52aWV3LXN3aXRjaC1idG4nKS5mb3JFYWNoKGIgPT4gYi5yZW1vdmVDbGFzcygnYWN0aXZlJykpO1xyXG4gICAgICAgICAgICAgICAgYnRuLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoVmlldyh2aWV3LmlkIGFzICdjYXJkJyB8ICdsaXN0JyB8ICd0aW1lbGluZScpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFx1NTJBMFx1OEY3RFx1NjI0MFx1NjcwOVx1N0IxNFx1OEJCMFx1NUU3Nlx1NTIxQlx1NUVGQVx1NTM2MVx1NzI0N1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIGxvYWROb3RlcygpIHtcclxuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5lbXB0eSgpO1xyXG5cclxuICAgICAgICBmaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjYXJkID0gdGhpcy5jcmVhdGVOb3RlQ2FyZChmaWxlKTtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoY2FyZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcdTUyMUJcdTVFRkFcdTUzNTVcdTRFMkFcdTdCMTRcdThCQjBcdTUzNjFcdTcyNDdcclxuICAgICAqIEBwYXJhbSBmaWxlIC0gXHU3QjE0XHU4QkIwXHU2NTg3XHU0RUY2XHJcbiAgICAgKiBAcmV0dXJucyBcdTUzNjFcdTcyNDdIVE1MXHU1MTQzXHU3RDIwXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY3JlYXRlTm90ZUNhcmQoZmlsZTogVEZpbGUpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGNhcmQuYWRkQ2xhc3MoJ25vdGUtY2FyZCcpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHRpdGxlID0gY2FyZC5jcmVhdGVEaXYoJ25vdGUtdGl0bGUnKTtcclxuICAgICAgICB0aXRsZS5zZXRUZXh0KGZpbGUuYmFzZW5hbWUpO1xyXG5cclxuICAgICAgICBjb25zdCBsYXN0TW9kaWZpZWQgPSBjYXJkLmNyZWF0ZURpdignbm90ZS1kYXRlJyk7XHJcbiAgICAgICAgbGFzdE1vZGlmaWVkLnNldFRleHQobmV3IERhdGUoZmlsZS5zdGF0Lm10aW1lKS50b0xvY2FsZURhdGVTdHJpbmcoKSk7XHJcblxyXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjU4N1x1NEVGNlx1NTkzOVx1OERFRlx1NUY4NFx1RkYwOFx1NkRGQlx1NTJBMFx1N0E3QVx1NTAzQ1x1NjhDMFx1NjdFNVx1RkYwOVxyXG4gICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSBjYXJkLmNyZWF0ZURpdignbm90ZS1mb2xkZXInKTtcclxuICAgICAgICBjb25zdCBmb2xkZXIgPSBmaWxlLnBhcmVudCA/IChmaWxlLnBhcmVudC5wYXRoID09PSAnLycgPyAnXHU2ODM5XHU3NkVFXHU1RjU1JyA6IGZpbGUucGFyZW50LnBhdGgpIDogJ1x1NjgzOVx1NzZFRVx1NUY1NSc7XHJcbiAgICAgICAgZm9sZGVyUGF0aC5zZXRUZXh0KGZvbGRlcik7XHJcbiAgICAgICAgZm9sZGVyUGF0aC5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgZm9sZGVyKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTcwQjlcdTUxRkJcdTY1ODdcdTRFRjZcdTU5MzlcdThERUZcdTVGODRcdTlBRDhcdTRFQUVcdTc2RjhcdTU0MENcdTY1ODdcdTRFRjZcdTU5MzlcdTc2ODRcdTdCMTRcdThCQjBcclxuICAgICAgICBmb2xkZXJQYXRoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRGb2xkZXIoZm9sZGVyKTtcclxuICAgICAgICAgICAgdGhpcy5yZXZlYWxGb2xkZXJJbkV4cGxvcmVyKGZvbGRlcik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XHJcbiAgICAgICAgaWYgKGNhY2hlPy50YWdzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhZ0NvbnRhaW5lciA9IGNhcmQuY3JlYXRlRGl2KCdub3RlLXRhZ3MnKTtcclxuICAgICAgICAgICAgY2FjaGUudGFncy5mb3JFYWNoKHRhZyA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YWdFbCA9IHRhZ0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0YWcudGFnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ25vdGUtdGFnJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHU0RkVFXHU2NTM5XHU1MzYxXHU3MjQ3XHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XHJcbiAgICAgICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd0YWInKTtcclxuICAgICAgICAgICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHU5ODg0XHU4OUM4XHU1MjlGXHU4MEZEXHU0RkREXHU2MzAxXHU0RTBEXHU1M0Q4XHJcbiAgICAgICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2aWV3Q29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IE1hcmtkb3duUmVuZGVyZXIucmVuZGVyTWFya2Rvd24oXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZpZXdDb250YWluZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZS5wYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTk4ODRcdTg5QzhcdTUyQTBcdThGN0RcdTU5MzFcdThEMjU6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2aWV3Q29udGFpbmVyLnNldFRleHQoJ1x1OTg4NFx1ODlDOFx1NTJBMFx1OEY3RFx1NTkzMVx1OEQyNScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBjYXJkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU1MjA3XHU2MzYyXHU4OUM2XHU1NkZFXHU2QTIxXHU1RjBGXHJcbiAgICAgKiBAcGFyYW0gdmlldyAtIFx1NzZFRVx1NjgwN1x1ODlDNlx1NTZGRVx1NkEyMVx1NUYwRlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN3aXRjaFZpZXcodmlldzogJ2NhcmQnIHwgJ2xpc3QnIHwgJ3RpbWVsaW5lJykge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFZpZXcgPSB2aWV3O1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS12aWV3Jywgdmlldyk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuZW1wdHkoKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodmlldyA9PT0gJ3RpbWVsaW5lJykge1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVRpbWVsaW5lVmlldygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZE5vdGVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHU2ODM5XHU2MzZFXHU2ODA3XHU3QjdFXHU4RkM3XHU2RUU0XHU3QjE0XHU4QkIwXHJcbiAgICAgKiBAcGFyYW0gdGFnIC0gXHU2ODA3XHU3QjdFXHU1NDBEXHU3OUYwXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZmlsdGVyQnlUYWcodGFnOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5lbXB0eSgpO1xyXG5cclxuICAgICAgICBmaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xyXG4gICAgICAgICAgICBpZiAoY2FjaGU/LnRhZ3MgJiYgY2FjaGUudGFncy5zb21lKHQgPT4gdC50YWcgPT09IHRhZykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhcmQgPSB0aGlzLmNyZWF0ZU5vdGVDYXJkKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoY2FyZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHU5QUQ4XHU0RUFFXHU5MDA5XHU0RTJEXHU3Njg0XHU2ODA3XHU3QjdFXHJcbiAgICAgICAgdGhpcy50YWdDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJykuZm9yRWFjaChidG4gPT4ge1xyXG4gICAgICAgICAgICBpZiAoYnRuLnRleHRDb250ZW50ID09PSB0YWcpIHtcclxuICAgICAgICAgICAgICAgIGJ0bi5hZGRDbGFzcygnYWN0aXZlLXRhZycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYnRuLnJlbW92ZUNsYXNzKCdhY3RpdmUtdGFnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRvZ2dsZVByZXZpZXcoKSB7XHJcbiAgICAgICAgdGhpcy5pc1ByZXZpZXdDb2xsYXBzZWQgPSAhdGhpcy5pc1ByZXZpZXdDb2xsYXBzZWQ7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNQcmV2aWV3Q29sbGFwc2VkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJldmlld0NvbnRhaW5lci5hZGRDbGFzcygnY29sbGFwc2VkJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2aWV3Q29udGFpbmVyLnJlbW92ZUNsYXNzKCdjb2xsYXBzZWQnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXR1cFJlc2l6ZXIoKSB7XHJcbiAgICAgICAgbGV0IHN0YXJ0WDogbnVtYmVyO1xyXG4gICAgICAgIGxldCBzdGFydFdpZHRoOiBudW1iZXI7XHJcblxyXG4gICAgICAgIGNvbnN0IHN0YXJ0UmVzaXplID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBzdGFydFggPSBlLnBhZ2VYO1xyXG4gICAgICAgICAgICBzdGFydFdpZHRoID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnByZXZpZXdDb250YWluZXIpLndpZHRoLCAxMCk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHJlc2l6ZSk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBzdG9wUmVzaXplKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCByZXNpemUgPSAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IHN0YXJ0V2lkdGggLSAoZS5wYWdlWCAtIHN0YXJ0WCk7XHJcbiAgICAgICAgICAgIGlmICh3aWR0aCA+PSA1MCAmJiB3aWR0aCA8PSA4MDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucHJldmlld0NvbnRhaW5lci5zdHlsZS53aWR0aCA9IGAke3dpZHRofXB4YDtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUHJldmlld0NvbGxhcHNlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQcmV2aWV3Q29sbGFwc2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2aWV3Q29udGFpbmVyLnJlbW92ZUNsYXNzKCdjb2xsYXBzZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHN0b3BSZXNpemUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHJlc2l6ZSk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBzdG9wUmVzaXplKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnByZXZpZXdSZXNpemVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHN0YXJ0UmVzaXplKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhpZ2hsaWdodEZvbGRlcihmb2xkZXI6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuY3VycmVudEZvbGRlciA9IHRoaXMuY3VycmVudEZvbGRlciA9PT0gZm9sZGVyID8gbnVsbCA6IGZvbGRlcjtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcubm90ZS1jYXJkJykuZm9yRWFjaChjYXJkID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZm9sZGVyRWxlbWVudCA9IGNhcmQucXVlcnlTZWxlY3RvcignLm5vdGUtZm9sZGVyJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhcmRGb2xkZXIgPSBmb2xkZXJFbGVtZW50ID8gZm9sZGVyRWxlbWVudC50ZXh0Q29udGVudCA6IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChjYXJkRm9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBjYXJkLnRvZ2dsZUNsYXNzKCdmb2xkZXItaGlnaGxpZ2h0JywgY2FyZEZvbGRlciA9PT0gZm9sZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgcmV2ZWFsRm9sZGVySW5FeHBsb3Jlcihmb2xkZXI6IHN0cmluZykge1xyXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NjU4N1x1NEVGNlx1NkQ0Rlx1ODlDOFx1NTY2OFx1ODlDNlx1NTZGRVxyXG4gICAgICAgIGNvbnN0IGZpbGVFeHBsb3JlciA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2ZpbGUtZXhwbG9yZXInKVswXTtcclxuICAgICAgICBpZiAoZmlsZUV4cGxvcmVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVFeHBsb3JlclZpZXcgPSBmaWxlRXhwbG9yZXIudmlldyBhcyBhbnk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTY4MzlcdTc2RUVcdTVGNTVcdUZGMENcdTc2RjRcdTYzQTVcdTVDNTVcdTVGMDBcdTY4MzlcdTc2RUVcdTVGNTVcclxuICAgICAgICAgICAgaWYgKGZvbGRlciA9PT0gJ1x1NjgzOVx1NzZFRVx1NUY1NScpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmaWxlRXhwbG9yZXJWaWV3LmV4cGFuZEZvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGZpbGVFeHBsb3JlclZpZXcuZXhwYW5kRm9sZGVyKCcvJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1NUM1NVx1NUYwMFx1NUU3Nlx1OTAwOVx1NEUyRFx1NjU4N1x1NEVGNlx1NTkzOVxyXG4gICAgICAgICAgICBpZiAoZmlsZUV4cGxvcmVyVmlldy5leHBhbmRGb2xkZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NUM1NVx1NUYwMFx1NzIzNlx1NjU4N1x1NEVGNlx1NTkzOVx1OERFRlxyXG4gICAgICAgICAgICAgICAgY29uc3QgZm9sZGVyUGFydHMgPSBmb2xkZXIuc3BsaXQoJy8nKTtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50UGF0aCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTkwMTBcdTdFQTdcdTVDNTVcdTVGMDBcdTY1ODdcdTRFRjZcdTU5MzlcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBmb2xkZXJQYXJ0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoICs9IChjdXJyZW50UGF0aCA/ICcvJyA6ICcnKSArIHBhcnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmlsZUV4cGxvcmVyVmlldy5leHBhbmRGb2xkZXIoY3VycmVudFBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1OTAwOVx1NEUyRFx1NzZFRVx1NjgwN1x1NjU4N1x1NEVGNlx1NTkzOVxyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGVFeHBsb3JlclZpZXcuc2V0U2VsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmlsZUV4cGxvcmVyVmlldy5zZXRTZWxlY3Rpb24oZm9sZGVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGNyZWF0ZU5ld05vdGUoKSB7XHJcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU2NUU1XHU2NzFGXHU0RjVDXHU0RTNBXHU5RUQ4XHU4QkE0XHU2NTg3XHU0RUY2XHU1NDBEXHJcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgXHU2NzJBXHU1NDdEXHU1NDBEXHU3QjE0XHU4QkIwICR7ZGF0ZS50b0xvY2FsZVN0cmluZygpLnJlcGxhY2UoL1svOl0vZywgJy0nKX1gO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjVCMFx1N0IxNFx1OEJCMFxyXG4gICAgICAgICAgICBjb25zdCBmaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKFxyXG4gICAgICAgICAgICAgICAgYCR7ZmlsZU5hbWV9Lm1kYCxcclxuICAgICAgICAgICAgICAgICcjICcgKyBmaWxlTmFtZSArICdcXG5cXG4nXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTU3MjhcdTY1QjBcdTY4MDdcdTdCN0VcdTk4NzVcdTRFMkRcdTYyNTNcdTVGMDBcdTdCMTRcdThCQjBcclxuICAgICAgICAgICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd0YWInKTtcclxuICAgICAgICAgICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTIzN1x1NjVCMFx1NTM2MVx1NzI0N1x1ODlDNlx1NTZGRVxyXG4gICAgICAgICAgICB0aGlzLmxvYWROb3RlcygpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NTIxQlx1NUVGQVx1N0IxNFx1OEJCMFx1NTkzMVx1OEQyNTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlVGltZWxpbmVWaWV3KCkge1xyXG4gICAgICAgIGNvbnN0IHRpbWVsaW5lQ29udGFpbmVyID0gdGhpcy5jb250YWluZXIuY3JlYXRlRGl2KCd0aW1lbGluZS1jb250YWluZXInKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTYyNDBcdTY3MDlcdTdCMTRcdThCQjBcdTVFNzZcdTYzMDlcdTY1RTVcdTY3MUZcdTUyMDZcdTdFQzRcclxuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuICAgICAgICBjb25zdCBub3Rlc0J5RGF0ZSA9IG5ldyBNYXA8c3RyaW5nLCBURmlsZVtdPigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZpbGVzLmZvckVhY2goZmlsZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShmaWxlLnN0YXQubXRpbWUpLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG4gICAgICAgICAgICBpZiAoIW5vdGVzQnlEYXRlLmhhcyhkYXRlKSkge1xyXG4gICAgICAgICAgICAgICAgbm90ZXNCeURhdGUuc2V0KGRhdGUsIFtdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBub3RlcyA9IG5vdGVzQnlEYXRlLmdldChkYXRlKTtcclxuICAgICAgICAgICAgaWYgKG5vdGVzKSB7XHJcbiAgICAgICAgICAgICAgICBub3Rlcy5wdXNoKGZpbGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1NjMwOVx1NjVFNVx1NjcxRlx1NjM5Mlx1NUU4RlxyXG4gICAgICAgIGNvbnN0IHNvcnRlZERhdGVzID0gQXJyYXkuZnJvbShub3Rlc0J5RGF0ZS5rZXlzKCkpLnNvcnQoKGEsIGIpID0+IFxyXG4gICAgICAgICAgICBuZXcgRGF0ZShiKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhKS5nZXRUaW1lKClcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTY1RjZcdTk1RjRcdThGNzRcclxuICAgICAgICBzb3J0ZWREYXRlcy5mb3JFYWNoKGRhdGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRlR3JvdXAgPSB0aW1lbGluZUNvbnRhaW5lci5jcmVhdGVEaXYoJ3RpbWVsaW5lLWRhdGUtZ3JvdXAnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjVFNVx1NjcxRlx1ODI4Mlx1NzBCOVxyXG4gICAgICAgICAgICBjb25zdCBkYXRlTm9kZSA9IGRhdGVHcm91cC5jcmVhdGVEaXYoJ3RpbWVsaW5lLWRhdGUtbm9kZScpO1xyXG4gICAgICAgICAgICBkYXRlTm9kZS5jcmVhdGVEaXYoJ3RpbWVsaW5lLW5vZGUtY2lyY2xlJyk7XHJcbiAgICAgICAgICAgIGRhdGVOb2RlLmNyZWF0ZURpdigndGltZWxpbmUtZGF0ZS1sYWJlbCcpLnNldFRleHQoZGF0ZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTdCMTRcdThCQjBcdTUyMTdcdTg4NjhcclxuICAgICAgICAgICAgY29uc3Qgbm90ZXNMaXN0ID0gZGF0ZUdyb3VwLmNyZWF0ZURpdigndGltZWxpbmUtbm90ZXMtbGlzdCcpO1xyXG4gICAgICAgICAgICBjb25zdCBub3RlcyA9IG5vdGVzQnlEYXRlLmdldChkYXRlKTtcclxuICAgICAgICAgICAgaWYgKG5vdGVzKSB7XHJcbiAgICAgICAgICAgICAgICBub3Rlcy5mb3JFYWNoKGZpbGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGVJdGVtID0gbm90ZXNMaXN0LmNyZWF0ZURpdigndGltZWxpbmUtbm90ZS1pdGVtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2ODA3XHU4QkIwXHU3RUJGXHJcbiAgICAgICAgICAgICAgICAgICAgbm90ZUl0ZW0uY3JlYXRlRGl2KCd0aW1lbGluZS1ub3RlLW1hcmtlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1N0IxNFx1OEJCMFx1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGVDb250ZW50ID0gbm90ZUl0ZW0uY3JlYXRlRGl2KCd0aW1lbGluZS1ub3RlLWNvbnRlbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICBub3RlQ29udGVudC5jcmVhdGVEaXYoJ3RpbWVsaW5lLW5vdGUtdGl0bGUnKS5zZXRUZXh0KGZpbGUuYmFzZW5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlxyXG4gICAgICAgICAgICAgICAgICAgIG5vdGVJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3RhYicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTk4ODRcdTg5QzhcdTUyOUZcdTgwRkRcclxuICAgICAgICAgICAgICAgICAgICBub3RlSXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2aWV3Q29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IE1hcmtkb3duUmVuZGVyZXIucmVuZGVyTWFya2Rvd24oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZpZXdDb250YWluZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5wYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTk4ODRcdTg5QzhcdTUyQTBcdThGN0RcdTU5MzFcdThEMjU6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59ICJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBLHVCQUE2RTs7O0FDQTdFLHNCQUFpRTtBQUcxRCxJQUFNLGlCQUFpQjtBQUV2Qiw2QkFBdUIseUJBQVM7QUFBQSxFQWdCbkMsWUFBWSxNQUFxQixRQUF3QjtBQUNyRCxVQUFNO0FBVEYsOEJBQThCO0FBQzlCLHlCQUErQjtBQVNuQyxTQUFLLFNBQVM7QUFDZCxTQUFLLGNBQWMsT0FBTyxTQUFTO0FBQUE7QUFBQSxFQU92QyxjQUFzQjtBQUNsQixXQUFPO0FBQUE7QUFBQSxFQU9YLGlCQUF5QjtBQUNyQixXQUFPO0FBQUE7QUFBQSxRQU9MLFNBQVM7QUFDWCxVQUFNLEVBQUUsZ0JBQWdCO0FBQ3hCLGdCQUFZO0FBQ1osZ0JBQVksU0FBUztBQUdyQixVQUFNLFVBQVUsWUFBWSxVQUFVO0FBR3RDLFVBQU0sWUFBWSxRQUFRLFVBQVU7QUFHcEMsVUFBTSxhQUFhLFVBQVUsU0FBUyxVQUFVO0FBQUEsTUFDNUMsS0FBSztBQUFBO0FBR1QsZUFBVyxZQUFZO0FBQUE7QUFBQTtBQUFBO0FBSXZCLGVBQVcsaUJBQWlCLFNBQVMsTUFBTSxLQUFLO0FB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

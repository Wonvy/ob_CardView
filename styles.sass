// 主容器布局   	
.card-view-container 
  display: flex
  flex-direction: column
  height: 100%
  overflow: hidden

  // 添加主容器的模糊效果
  &.blur-background
    .card-view-toolbar,
    .filter-toolbar,
    .card-view-content,
    .preview-wrapper
      filter: blur(2px)
      transition: filter 0.3s ease
      pointer-events: none  // 防止模糊元素响应点击


// 工具栏样式   	
.card-view-toolbar
  display: flex
  align-items: center
  justify-content: space-between
  gap: 1rem
  padding: 0.8rem 1rem
  border-bottom: 1px solid var(--background-modifier-border)
  background-color: var(--background-secondary)
  width: 100%
  flex-shrink: 0
  height: auto
  min-height: 48px

  // 工具栏左侧区域   	
  .toolbar-left
    display: flex
    align-items: center
    gap: 7px

    // 新建笔记
    .new-note-button 
      display: flex
      align-items: center
      gap: 0.5rem
      background-color: var(--interactive-accent)
      color: var(--text-on-accent)
      padding: 6px 12px
      border-radius: 4px
      border: none
      cursor: pointer
      font-weight: 500
      transition: all 0.15s ease
      &:hover 
        opacity: 0.9
        transform: translateY(-1px)
      svg 
        width: 16px
        height: 16px

    // 日历按钮	
    .calendar-toggle-button 
      display: none

    // 视图切换器样式 	
    .view-switcher
      display: flex
      gap: 0.5rem
      padding: 0
      border-left: 1px solid var(--background-modifier-border)
      margin-left: 1rem
      padding-left: 1rem

      .view-switch-btn 
        background-color: transparent
        color: var(--text-muted)
        border: none
        column-gap: 5px
        border-radius: 4px
        padding: 6px
        cursor: pointer
        display: flex
        align-items: center
        justify-content: center
        transition: all 0.2s ease
        &:hover 
          background-color: var(--background-modifier-hover)
          color: var(--text-normal)
        &.active 
          background-color: var(--interactive-accent)
          color: var(--text-on-accent)
        svg 
          width: 18px
          height: 18px

        .view-switch-icon 
            display: flex
            align-items: center
            justify-content: center

        .view-switch-text 
          font-size: 0.9em

    // 修改日历下拉菜单样式
    .calendar-dropdown-container
        position: relative
        margin-right: 12px  // 添加右边距，与标签下拉列表保持间距
        
        .calendar-toggle-button
            display: flex
            align-items: center
            gap: 6px
            background: transparent
            border: 1px solid var(--background-modifier-border)
            color: var(--text-muted)
            padding: 6px 12px
            cursor: pointer
            border-radius: 4px
            font-size: 14px
            transition: all 0.2s ease
            
            &:hover
                color: var(--text-normal)
                background-color: var(--background-modifier-hover)
                border-color: var(--interactive-accent)
            
            svg
                width: 16px
                height: 16px
        
        .calendar-container
            position: absolute
            top: 100%
            left: 0
            margin-top: 4px
            background: var(--background-primary)
            border: 1px solid var(--background-modifier-border)
            border-radius: 8px
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1)
            z-index: 1000
            width: 280px
            padding: 16px
            
            // 日历内容样式保持不变
            .calendar-header
                display: flex
                justify-content: space-between
                align-items: center
                margin-bottom: 16px
                // ... 其他日历样式保持不变 ...


  // 搜索容器
  .search-container
    display: flex
    flex-direction: row
    gap: 4px

    // 修改命令按钮和菜单样式
    .command-container 
        position: relative
        display: flex
        align-items: center

        .command-button 
            background: transparent
            border: none
            padding: 6px
            cursor: pointer
            color: var(--text-muted)
            display: flex
            align-items: center
            justify-content: center
            border-radius: 4px
            margin-right: 8px
            
            &:hover 
                background-color: var(--background-modifier-hover)
                color: var(--text-normal)

        .command-menu 
            position: absolute
            top: 100%
            left: 0
            background-color: var(--background-primary)
            border: 1px solid var(--background-modifier-border)
            border-radius: 4px
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1)
            z-index: 1000
            min-width: 200px
            margin-top: 4px

            .command-menu-item 
                padding: 8px 12px
                cursor: pointer
                color: var(--text-normal)
                font-size: 14px
                transition: background-color 0.2s ease
                
                &:hover 
                    background-color: var(--background-modifier-hover)
                
                &:first-child 
                    border-top-left-radius: 4px
                    border-top-right-radius: 4px
                
                &:last-child 
                    border-bottom-left-radius: 4px
                    border-bottom-right-radius: 4px

    .search-input 
      flex: 1


// 过滤工具栏样式优化   
.filter-toolbar
    display: flex
    padding: 12px 16px
    border-bottom: 1px solid var(--background-modifier-border)
    background-color: var(--background-primary)
    justify-content: space-between
    align-items: center

    // 添加左侧区域样式
    .filter-toolbar-left
        display: flex
        gap: 12px
        align-items: center
        flex: 1  // 让左侧区域占据剩余空间

    // 添加右侧区域样式
    .filter-toolbar-right
        display: flex
        align-items: center
        gap: 12px
        margin-left: 16px  // 与左侧保持一定距离

    // 修改卡片设置容器样式
    .card-settings-container
        position: relative
        
        .card-settings-button
            display: flex
            align-items: center
            gap: 6px
            padding: 6px 12px
            background: transparent
            border: 1px solid var(--background-modifier-border)
            border-radius: 4px
            color: var(--text-muted)
            cursor: pointer
            font-size: 13px
            transition: all 0.2s ease
            
            &:hover
                background: var(--background-modifier-hover)
                color: var(--text-normal)
                border-color: var(--interactive-accent)
            
            svg
                width: 14px
                height: 14px
                opacity: 0.8
            
            span
                font-size: 13px

        // 设置面板样式调整
        .card-settings-panel
            top: calc(100% + 8px)  // 调整面板位置
            right: 0
            // ... 其他面板样式保持不变 ...

    // ... 其他现有样式保持不变 ...

.selected-tag
  display: inline-flex
  align-items: center
  gap: 6px
  padding: 3px 10px
  background: var(--interactive-accent)
  color: var(--text-on-accent)
  border-radius: 12px
  font-size: 12px
  border: 1px solid var(--background-modifier-border)
  transition: all 0.2s ease
  white-space: nowrap  // 确保标签文本不换行
  height: 24px  // 固定高度
  
  &:hover
      background-color: var(--background-modifier-hover-plus)
      border-color: var(--text-muted)
  
  .tag-text
      max-width: 150px  // 限制标签文本最大宽度
      overflow: hidden
      text-overflow: ellipsis
  
  .remove-tag
            cursor: pointer
            font-size: 14px
            width: 14px
            height: 14px
            display: flex
            align-items: center
            justify-content: center
            border-radius: 50%
            color: var(--text-muted)
            transition: all 0.2s ease
            padding-bottom: 2px  // 微调 × 的位置
            
            &:hover
                color: var(--text-normal)
                background-color: var(--background-modifier-border)

// 内容区域样式   
.card-view-content 
  flex: 1
  overflow-y: auto
  padding: 1rem
  position: relative
  margin-top: 8px

  // 调整卡片容器布局   
  .card-container 
    display: grid
    gap: 1rem
    padding: 1rem
    transition: all 0.2s ease
    justify-content: center
    

    // 卡片布局优化   
    .note-card 
      position: relative
      min-width: 240px
      min-height: 100px
      height: 200px
      background-color: var(--background-secondary)
      border-radius: 8px
      border: 1px solid var(--background-modifier-border)
      cursor: pointer
      transition: all 0.3s ease-in-out
      opacity: 1
      transform: scale(1)
      overflow: hidden
      
      // 删除时的动画
      &.removing
        opacity: 0
        transform: scale(0.8)
      
      &:hover 
        transform: translateY(-2px)
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1)
      
      &.selected 
        border: 2px solid var(--interactive-accent)
        box-shadow: 0 0 8px rgba(var(--interactive-accent-rgb), 0.3)
        transform: translateY(-2px)
        &:hover 
          border: 2px solid var(--interactive-accent)



      // 卡片头部样式   
      .note-card-header
        height: 2.2em
        padding: 0.5rem 1rem
        display: flex
        justify-content: space-between
        align-items: center
        z-index: 3
        transition: opacity 0.2s ease

        .note-date
          font-size: 0.8em
          color: var(--text-muted)

        .note-folder 
          font-size: 0.8em
          color: var(--text-muted)
          cursor: pointer
          padding: 2px 4px
          border-radius: 4px
          transition: all 0.2s ease
          max-width: 150px
          overflow: hidden
          text-overflow: ellipsis
          white-space: nowrap


        // 打开按钮样式修改   
        .note-open-button 
          position: absolute
          z-index: 99
          bottom: 0.8rem  // 改为底部定位   
          right: 0.8rem   // 调整右边距   
          width: 32px   // 增大按钮尺寸   
          height: 32px  // 增大按钮尺寸   
          display: flex
          align-items: center
          justify-content: center
          background-color: var(--background-secondary)
          border: 1px solid var(--background-modifier-border)
          border-radius: 6px
          cursor: pointer
          transition: all 0.2s ease
          &:hover 
            color: var(--text-on-accent)
            transform: translateY(-2px)
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1)
            svg 
              color: var(--interactive-accent)
              transform: scale(1.1) 
          svg
            opacity: 1
            width: 20px   // 增大图标尺寸   
            height: 20px  // 增大图标尺寸   
            transition: all 0.2s ease


      // 卡片内容容器   
      .note-card-content 
        position: relative
        border-top: 1px solid var(--background-modifier-border)
        height: calc(100% - 2rem)
        display: flex
        flex-direction: column
        gap: 0.5rem
        &:hover 
          padding: 0

        // 标题  
        .note-title 
          padding: 0.5em 1em 0.5em 1em
          font-size: 1.4em
          font-weight: bold
          color: var(--text-normal)

        // 笔记内容样式   
        .note-content
          padding: 0 1rem
          background-color: var(--background-secondary)
          overflow-y: auto
          z-index: 1
          opacity: 0.4
          transition: all 0.2s ease
          &:hover
            opacity: 1

          img 
            max-width: 100%
            height: auto
            display: block
            margin: 0.5em 0

          h1
            font-size: 12px !important
            line-height: 1.5
            margin: 0.5em 0




// 日历容器样式   
.calendar-container 
  position: absolute
  width: 280px
  background-color: var(--background-primary)
  border-right: 1px solid var(--background-modifier-border)
  padding: 16px
  z-index: 1000
  box-shadow: 2px 0 4px rgba(0, 0, 0, 0.1)

  // 日历头部样式   
  .calendar-header 
    display: flex
    justify-content: space-between
    align-items: center
    margin-bottom: 16px
    padding: 8px 0

    // 导航按钮样式   
    .calendar-nav-btn 
      background: transparent
      border: 1px solid var(--background-modifier-border)
      border-radius: 4px
      padding: 4px 8px
      color: var(--text-muted)
      cursor: pointer
      transition: all 0.2s ease
      &:hover 
        background-color: var(--background-modifier-hover)
        color: var(--text-normal)
        border-color: var(--interactive-accent)


    .calendar-title 
      font-size: 1.1em
      font-weight: bold
      color: var(--text-normal)

  // 日历网格样式   
  .calendar-weekdays 
    display: grid
    grid-template-columns: repeat(7, 1fr)
    gap: 4px
    margin-bottom: 8px
    height: calc(100% / 6)
    padding: 8px 0
    border-bottom: 1px solid var(--background-modifier-border)

    .weekday 
      text-align: center
      font-size: 0.9em
      color: var(--text-muted)
      font-weight: 500

  .calendar-grid 
    display: grid
    grid-template-columns: repeat(7, 1fr)
    gap: 4px

    .calendar-day 
      position: relative
      aspect-ratio: 1
      display: flex
      align-items: center
      justify-content: center
      border-radius: 4px
      cursor: pointer
      background-color: var(--background-secondary)
      font-size: 0.9em
      transition: all 0.2s ease
      &.empty 
        background-color: transparent
        cursor: default
      &.selected 
        background-color: var(--interactive-accent)
        color: var(--text-on-accent)
        transform: translateY(-1px)
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1)
        .note-count 
          background-color: var(--text-on-accent)
          color: var(--interactive-accent)
      &:hover 
        background-color: var(--background-modifier-hover)
        transform: translateY(-1px)

      // 笔记数量样式   
      .note-count 
        position: absolute
        bottom: 2px
        right: 2px
        font-size: 0.7em
        background-color: var(--interactive-accent)
        color: var(--text-on-accent)
        padding: 1px 4px
        border-radius: 8px
        min-width: 16px
        text-align: center



// 文件选择模态框
.folder-list 
  max-height: 300px
  overflow-y: auto
  margin: 1rem 0
  border: 1px solid var(--background-modifier-border)
  border-radius: 4px  

  .folder-item 
    display: flex
    align-items: center
    gap: 0.5rem
    padding: 0.5rem
    cursor: pointer
    transition: all 0.2s ease  
    &:hover 
      background-color: var(--background-modifier-hover)  
    &.selected 
      background-color: var(--interactive-accent)
      color: var(--text-on-accent)  

    .folder-icon 
      display: flex
      align-items: center
      color: var(--text-muted)  

    .folder-name 
      flex: 1 




// 添容器相关样式   
.preview-wrapper 
  position: relative
  display: flex
  height: 100%
  transition: all 0.2s ease
  width: 300px
  
  &.collapsed
    width: 0
    
    .preview-resizer
      opacity: 0
      pointer-events: none
    
    .preview-controls
      opacity: 1
      pointer-events: auto
      
      .preview-toggle svg
        transform: rotate(0deg)  // 折叠时箭头朝右
  
  .preview-controls 
    position: absolute
    left: -26px
    top: 50%
    transform: translateY(-50%)
    z-index: 11
    transition: all 0.2s ease

    .preview-toggle 
      background: var(--background-secondary)
      border-radius: 5px 0 0 5px
      border: 1px solid var(--background-modifier-border)
      border-right: none
      width: 30px
      height: 30px
      box-sizing: border-box
      padding: 4px
      cursor: pointer
      transition: all 0.2s ease
      
      &:hover 
        background: var(--background-modifier-hover)
      
      svg
        transition: transform 0.2s ease
        transform: rotate(180deg)  // 默认箭头朝左
  
  .preview-resizer 
    width: 4px
    background-color: transparent
    cursor: col-resize
    position: relative
    z-index: 10
    transition: all 0.2s ease
    
    &:hover,
    &.resizing 
        background-color: var(--interactive-accent)
  
  .preview-container 
    width: 100%
    height: 100%
    background-color: var(--background-primary)
    border-left: 1px solid var(--background-modifier-border)
    padding: 1rem
    overflow-y: auto
    transition: all 0.2s ease
    
    &.collapsed 
        width: 0 !important
        padding: 0
        border-left: none
        margin-left: 0
        opacity: 0
        visibility: hidden



// 主布局容器样式   
.main-layout 
  display: flex
  width: 100%
  height: 100%
  position: relative 


// 内区域样式   
.content-section 
  flex: 1
  min-width: 0
  transition: margin-left 0.2s ease
  display: flex
  flex-direction: column

// 当显示日历时的布局调整   
.main-layout.with-calendar .calendar-container 
  display: block


// 日历显示时调整内容区域的边距   
.main-layout.with-calendar .content-section 
  margin-left: 0




// 时间轴视图
.view-timeline
  .card-container  
    display: flex 
    .timeline-container 
      padding: 0rem 0rem 0rem 150px
      position: relative
      &::before 
        content: ''
        position: absolute
        left: 127px  // 调整时间轴位置   
        top: 0
        bottom: 0
        width: 2px
        background-color: var(--background-modifier-border)  

      .timeline-date-group 
        position: relative
        margin-bottom: 2rem

        .timeline-date-node 
          display: flex
          position: absolute
          left: -118px
          width: 100px
          text-align: right
          display: flex
          align-items: center
          justify-content: flex-end
          gap: 1rem
          flex-direction: row-reverse
          .timeline-node-circle 
            width: 12px
            height: 12px
            border: 2px solid var(--interactive-accent)
            border-radius: 50%
            background-color: var(--background-primary)
            margin-right: -6px  // 调  

          .timeline-date-label 
            font-weight: bold
            color: var(--text-muted)  
        
        .timeline-notes-list 
          margin-left: 20px  //
          margin-top: 2rem
          display: grid  // 改为网格布局
          grid-template-columns: repeat(auto-fill, minmax(280px, 1fr))  // 自适应列宽
          gap: 1rem  // 添加间距
          
          // 移除旧的时间轴笔记样式
          .timeline-note-item,
          .timeline-note-marker,
          .timeline-note-content
            display: none





// 元素-卡片标签
.note-tag 
  color: var(--text-muted)
  border: 1px solid var(--background-modifier-border)
  background-color: transparent
  padding: 2px 6px
  border-radius: 4px
  font-size: 0.8em 
	


// 元素-标签按钮
.tag-btn 
  background-color: transparent
  color: var(--text-muted)
  border: 1px solid var(--background-modifier-border)
  border-radius: 4px
  padding: 2px 8px
  font-size: 0.85em
  cursor: pointer
  transition: all 0.2s ease
  height: 24px
  line-height: 20px
  display: inline-flex
  align-items: center
  gap: 4px
  
  &:hover 
    background-color: var(--background-modifier-hover)
    color: var(--text-normal)
    .tag-count
      color: var(--interactive-accent)
  
  &.active 
    background-color: var(--interactive-accent)
    color: var(--text-on-accent)
    border-color: var(--interactive-accent)
    .tag-count
      color: var(--text-on-accent)
  
  // 标签数量样式
  .tag-count
    color: var(--interactive-accent)
    font-weight: 600
    font-size: 0.9em
    transition: color 0.2s ease

  // 添加高亮样式
  &.highlighted 
    background-color: var(--interactive-accent)
    color: var(--text-on-accent)
    border-color: var(--interactive-accent)
    animation: tag-highlight 0.3s ease
    
    .tag-count
      color: var(--text-on-accent)

// 添加高亮动画
@keyframes tag-highlight 
  0% 
    transform: scale(1)
  50% 
    transform: scale(1.1)
  100% 
    transform: scale(1)

// 修改标签输入框样式
.tag-input 
  border: none
  background: transparent
  padding: 2px 8px
  font-size: 13px
  color: var(--text-normal)
  min-width: 80px
  
  &:focus 
    outline: none
    border-bottom: 1px solid var(--interactive-accent)
  
  &::placeholder 
    color: var(--text-muted)

/* 隐藏卡片内容中的标题 */
.note-content 
  h1:first-child,
  h2:first-child,
  h3:first-child,
  h4:first-child,
  h5:first-child,
  h6:first-child 
    display: none

/* 统一卡内所有文本样式 */
.note-content
  h1
    color:#f00


/* 统一卡片内所有文本样式 */
.note-content
  p, li, blockquote, h1, h2, h3, h4, h5, h6,tr,td,code,pre,span
    font-size: 12px !important
    line-height: 1.5
    margin: 0.5em 0


/* 预览栏内保留标题 */
.preview-container
  h1, h2, h3, h4, h5, h6
    margin: 1em 0 0.5em
    line-height: 1.3


// 添搜高亮样式
.search-highlight 
    background-color: var(--text-highlight-bg)
    color: var(--text-normal)
    padding: 0 2px
    border-radius: 2px
    font-weight: bold

// 修改卡片内容样式，
.note-card 
    .note-content 
        p, li, h1, h2, h3, h4, h5, h6 
            .search-highlight 
                background-color: var(--text-highlight-bg)
                color: var(--text-normal)
                padding: 0 2px
                border-radius: 2px
                font-weight: bold
                display: inline-block
                line-height: 1.2




.main-layout .content-section.view-month
  .card-view-content
    padding: 0  
    height: 100%
    overflow: hidden
    
    .card-container
      display: flex
      padding: 0
      flex-direction: column
      height: 100%
      overflow: hidden
      justify-content: flex-start

.month-view 
    display: flex
    flex-direction: column
    width: 100%
    height: 80%
    padding: 20px
    box-sizing: border-box
    background-color: var(--background-primary)

    // 月视图头部
    .month-header 
        display: flex
        justify-content: space-between
        align-items: center
        padding: 16px 24px
        // background: var(--background-secondary)
        // border-bottom: 1px solid var(--background-modifier-border)
        // box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05)

        // 年份组
        .year-group
            display: flex
            align-items: center
            gap: 12px
            padding: 4px
            background: var(--background-primary)
            border-radius: 6px
            border: 1px solid var(--background-modifier-border)
            
            .year-nav-btn
                display: flex
                align-items: center
                justify-content: center
                width: 28px
                height: 28px
                border: none
                background: transparent
                color: var(--text-muted)
                cursor: pointer
                border-radius: 4px
                transition: all 0.2s ease
                
                &:hover
                    background: var(--background-modifier-hover)
                    color: var(--text-normal)
            
            .year-display
                font-size: 1.1em
                font-weight: 500
                color: var(--text-normal)
                padding: 0 8px
                min-width: 80px
                text-align: center

        // 月份择器
        .month-selector
            display: flex
            gap: 4px
            padding: 4px
            background: var(--background-primary)
            border-radius: 6px
            border: 1px solid var(--background-modifier-border)
            
            .month-btn
                width: 32px
                height: 28px
                display: flex
                align-items: center
                justify-content: center
                border-radius: 4px
                cursor: pointer
                font-size: 0.9em
                color: var(--text-muted)
                transition: all 0.2s ease
                
                &:hover
                    background: var(--background-modifier-hover)
                    color: var(--text-normal)
                
                &.active
                    background: var(--interactive-accent)
                    color: var(--text-on-accent)

        // 今天按钮
        .today-btn
            background: var(--interactive-accent)
            color: var(--text-on-accent)
            border: none
            border-radius: 4px
            padding: 6px 16px
            cursor: pointer
            font-size: 0.9em
            font-weight: 500
            transition: all 0.2s ease
            display: flex
            align-items: center
            gap: 6px
            
            &:hover
                opacity: 0.9
                transform: translateY(-1px)
            
            svg
                width: 16px
                height: 16px

    // 星期头部
    .month-weekdays 
        display: grid
        grid-template-columns: repeat(7, 1fr)
        // border-bottom: 1px solid var(--background-modifier-border)
        // margin-bottom: 1px

        .weekday 
            padding: 8px
            text-align: center
            font-size: 0.9em
            color: var(--text-muted)
            font-weight: 500

    // 日历网格
    .month-grid 
        display: grid
        height: 100%
        grid-template-columns: repeat(7, 1fr)
        gap: 1px
        flex: 1
        background-color: var(--background-modifier-border)
        border: 1px solid var(--background-modifier-border)

        // 日期格子
        .month-day 
            background-color: var(--background-primary)
            padding: 8px
            overflow: auto
            display: flex
            flex-direction: column

            &.empty 
                // background-color: var(--background-primary-alt)

            &.today 
                background-color: var(--background-modifier-hover)
                
                .day-number 
                    color: var(--interactive-accent)
                    font-weight: bold

            // 日期数字
            .day-number 
                font-size: 0.9em
                color: var(--text-muted)
                margin-bottom: 4px

            // 笔列表
            .day-notes 
                flex: 1
                overflow-y: auto
                
                &::-webkit-scrollbar 
                    width: 4px
                
                &::-webkit-scrollbar-thumb 
                    background-color: var(--background-modifier-border)
                    border-radius: 2px

                // 笔记项
                .day-note-item 
                    padding: 2px 4px
                    margin-bottom: 2px
                    font-size: 0.85em
                    color: var(--text-muted)
                    cursor: pointer
                    white-space: nowrap
                    overflow: hidden
                    text-overflow: ellipsis
                    border-radius: 2px
                    
                    &:hover 
                        background-color: var(--background-modifier-hover)
                        color: var(--text-normal)



// 添加提示框样式
.note-tooltip 
    position: fixed
    z-index: 9999
    background-color: var(--background-primary)
    border: 1px solid var(--background-modifier-border)
    border-radius: 4px
    padding: 8px 12px
    font-size: 14px
    color: var(--text-normal)
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15)
    pointer-events: none
    max-width: 300px
    word-wrap: break-word
    animation: tooltip-fade-in 0.2s ease

    .tooltip-note-item 
        padding: 4px 0
        &:not(:last-child)
            border-bottom: 1px solid var(--background-modifier-border)

@keyframes tooltip-fade-in 
    from 
        opacity: 0
        transform: translateY(5px)
    to 
        opacity: 1
        transform: translateY(0)



// 列表视图样式
.main-layout .content-section.view-list
  .card-view-content
    padding: 20px
    height: 100%
    overflow: auto
    background-color: var(--background-primary)
    
    .card-container
      display: grid
      grid-template-columns: repeat(auto-fill, minmax(400px, 1fr))
      gap: 24px
      
      // 文件夹组
      .folder-group
        display: flex
        flex-direction: column
        // background: var(--background-secondary)
        border-radius: 7px
        align-items: center
        border: 1px solid var(--background-modifier-border)
        overflow: hidden
        height: 400px
        transition: all 0.3s ease
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05)
        
        &:hover
          transform: translateY(-2px)
          box-shadow: 4 4px 10px rgba(0, 0, 0, 0.3)
        
        // 文件夹标题
        .folder-header
          width: 100%
          display: flex
          align-items: center
          gap: 8px
          padding: 10px
          border-bottom: 1px solid var(--background-modifier-border)
          justify-content: center
          
          .folder-icon
            color: var(--text-muted)
            display: flex
            align-items: center
            transition: color 0.2s ease
            
          .folder-name
            font-size: 1.1em
            font-weight: 600
            color: var(--text-normal)
            transition: color 0.2s ease
        
        // 内容区域
        .folder-content-area
          display: flex
          width: 100%
          flex: 1
          overflow: hidden
          
          // 修改左侧子文件夹导航宽度
          .folder-sidebar
            width: 120px 
            border-right: 1px solid var(--background-modifier-border)

            .folder-title
              text-align: center
              padding: 6px 8px 6px 4px
              font-size: 0.9em
              cursor: pointer
              border-bottom: 1px solid var(--background-modifier-border)
              &:hover
                background: var(--background-modifier-hover)
              &.active
                background: var(--background-modifier-hover)
              &.root
                font-weight: 500
                border-bottom: 1px solid var(--background-modifier-border)
                margin-bottom: 6px  // 减小间距
                color: var(--text-accent)
              
              &.sub
                font-size: 1em
          
          // 修改右侧笔记区域
          .folder-content
            flex: 1
            padding: 12px
            overflow-y: auto
            background: var(--background-primary)
            
            .notes-list
              display: flex
              flex-direction: column
              gap: 4px  // 减小笔记间距
              
              .note-item
                padding: 8px 12px  // 减小内边距
                border-radius: 4px
                // background: var(--background-secondary)
                cursor: pointer
                transition: all 0.2s ease
                border: 1px solid transparent
                display: flex
                flex-direction: row  // 改为横向局
                align-items: center  // 垂直居中
                justify-content: space-between  // 两端对齐
                gap: 8px
                height: 32px  // 固定高度
                
                &:hover
                  background: var(--background-modifier-hover)
                  transform: translateX(4px)
                  border-color: var(--background-modifier-border)
                
                &.selected
                  background: var(--background-modifier-hover)
                  border-color: var(--interactive-accent)
                  
                .note-title
                  font-size: 0.9em
                  color: var(--text-normal)
                  font-weight: 500
                  white-space: nowrap
                  overflow: hidden
                  text-overflow: ellipsis
                  flex: 1  // 占余空间
                
                .note-date
                  font-size: 0.8em
                  color: var(--text-muted)
                  white-space: nowrap  // 防止日期换行
                  display: none
                  
                  &::before
                    content: ""
                    display: inline-block
                    width: 3px
                    height: 3px
                    background-color: var(--text-muted)
                    border-radius: 50%
                    margin-right: 6px
                    margin-bottom: 2px

            // 添加滚动条样式
            &::-webkit-scrollbar
              width: 6px
              height: 6px
            
            &::-webkit-scrollbar-track
              background: transparent
            
            &::-webkit-scrollbar-thumb
              background-color: var(--background-modifier-border)
              border-radius: 3px
              
              &:hover
                background-color: var(--text-muted)

.note-folder
  display: flex
  align-items: center
  flex-wrap: wrap
  gap: 2px


.folder-part
  position: relative
  cursor: pointer
  padding: 2px 0


.folder-separator
  opacity: 0.5
  margin: 0 2px


.folder-underline
  position: absolute
  bottom: 0
  left: 0
  width: 100%
  height: 1px
  background-color: var(--text-normal)
  transform: scaleX(0)
  transition: transform 0.2s ease


.folder-part:hover .folder-underline,
.folder-underline.active
    transform: scaleX(1)


// 快速创建笔记栏
.quick-note-bar
  position: absolute
  z-index: 1000
  background: var(--background-primary)
  padding: 16px 20px
  min-height: 36px
  max-height: 800px
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1)
  opacity: 0.98
  border-radius: 12px
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08)
  will-change: transform, width, height
  touch-action: none
  -webkit-user-select: none
  user-select: none
  cursor: grab

  // 最小化状态样式
  &.minimized
    width: 40px !important
    height: 40px !important
    padding: 0
    border-radius: 20px
    background: var(--interactive-accent)
    opacity: 0.9
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1)
    cursor: pointer
    
    // 悬停效
    &:hover
      opacity: 1
      transform: translateY(-2px)

    // 隐藏其他元素
    .quick-note-input-container,
    .quick-note-toolbar,
    .quick-note-send,
    .quick-note-controls,
    .tags-container
      display: none !important
    
    // 只显示最小化图标
    .minimize-icon
      display: flex !important
      align-items: center
      justify-content: center
      width: 100%
      height: 100%
      color: var(--text-on-accent)
      
      svg
        width: 18px
        height: 18px

  // 拖动时的样式
  &.dragging
    transition: none !important
    opacity: 0.95
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15)

  // 输入
  .quick-note-input-container
    display: flex
    flex-direction: column
    gap: 12px
    
    // 标题输入框
    .quick-note-title
      width: 100%
      padding: 8px
      border: none
      background: transparent
      font-size: 16px
      font-weight: 500
      color: var(--text-normal)
      // border-bottom: 1px solid var(--background-modifier-border)
      
      &::placeholder
        color: var(--text-muted)
        font-weight: normal
      
      &:focus
        outline: none
        // border-bottom-color: var(--interactive-accent)

    // 标签容器
    .tags-container
      display: flex
      flex-wrap: wrap
      gap: 6px
      min-height: 32px
      padding: 4px 0
      
      .tag-item
        display: inline-flex
        align-items: center
        gap: 4px
        padding: 2px 8px
        border-radius: 12px
        font-size: 12px
        transition: all 0.2s ease
        cursor: pointer
        
        // 未选中状态（灰色）
        &.inactive
          background: var(--background-modifier-hover)
          color: var(--text-muted)
        
        // 选中状态（高亮色）
        &.active
          background: var(--interactive-accent)
          color: var(--text-on-accent)
        
        .remove-tag
          cursor: pointer
          opacity: 0.6
          transition: opacity 0.2s ease
          
          &:hover
            opacity: 1
      
      .tag-input
        border: none
        background: transparent
        padding: 2px 0
        font-size: 13px
        color: var(--text-normal)
        min-width: 80px
        
        &:focus
          outline: none
          
        &::placeholder
          color: var(--text-muted)

  // 工具栏
  .quick-note-toolbar
    display: flex
    gap: 8px
    padding: 8px 0
    margin-top: 8px
    
    .quick-note-btn
      display: flex
      align-items: center
      gap: 6px
      padding: 6px 12px
      border-radius: 6px
      background: transparent
      color: var(--text-muted)
      border: none
      cursor: pointer
      transition: all 0.2s ease
      
      &:hover
        background: var(--background-modifier-hover)
        color: var(--text-normal)
      
      &.active
        background: var(--background-modifier-hover)
        color: var(--interactive-accent)
      
      svg
        width: 16px
        height: 16px

  // 发送按钮
  .quick-note-send
    position: absolute
    right: 20px
    bottom: 20px
    display: flex
    align-items: center
    gap: 8px
    background: var(--interactive-accent)
    color: var(--text-on-accent)
    padding: 8px 16px
    border-radius: 8px
    border: none
    cursor: pointer
    font-weight: 500
    transition: all 0.2s ease
    
    &:hover
      transform: translateY(-2px)
      box-shadow: 0 4px 12px rgba(var(--interactive-accent-rgb), 0.2)
    
    svg
      width: 16px
      height: 16px
    
    span
      font-size: 14px

  // 控制按钮
  .quick-note-controls
    position: absolute
    top: 16px
    right: 16px
    display: flex
    gap: 4px
    opacity: 0
    transition: opacity 0.2s ease
    
    .control-button
      padding: 6px
      border-radius: 6px
      color: var(--text-muted)
      
      &:hover
        background: var(--background-modifier-hover)
        color: var(--text-normal)

  &:hover .quick-note-controls
    opacity: 1

// 标签建议
.tag-suggestions
  position: absolute
  top: 100%
  left: 0
  width: 100%
  background: var(--background-primary)
  border-radius: 8px
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1)
  z-index: 1000
  
  .suggestion-item
    padding: 8px 16px
    cursor: pointer
    transition: all 0.2s ease
    
    &:hover
      background: var(--background-modifier-hover)
    
    &.selected
      background: var(--background-modifier-hover)
      color: var(--interactive-accent)

// 添加背景模糊遮罩
.quick-note-backdrop
  position: fixed
  top: 0
  left: 0
  right: 0
  bottom: 0
  background: rgba(0, 0, 0, 0.2)
  -webkit-backdrop-filter: blur(4px)
  backdrop-filter: blur(4px)
  z-index: 999
  opacity: 0
  transition: opacity 0.3s ease
  pointer-events: none
  
  &.active
    opacity: 1
    pointer-events: auto

.content-placeholder
  display: flex
  align-items: center
  justify-content: center
  height: 100%
  color: var(--text-muted)
  font-size: 0.9em



.loading-indicator
  display: flex
  flex-direction: column
  align-items: center
  justify-content: center
  padding: 20px
  width: 100%
  gap: 10px

.loading-spinner
  width: 30px
  height: 30px
  border: 3px solid var(--background-modifier-border)
  border-top-color: var(--text-accent)
  border-radius: 50%
  // animation: spin 1s linear infinite


.loading-text
  color: var(--text-muted)
  font-size: 14px


@keyframes spin
  to
    transform: rotate(360deg)


.card-container
  overflow-y: auto
  max-height: 100%
  padding: 16px
  box-sizing: border-box
  // scrollbar-width: thin
  // scrollbar-color: var(--scrollbar-thumb-bg) var(--scrollbar-bg)
  &::-webkit-scrollbar
    width: 8px

  &::-webkit-scrollbar-track
    background: var(--scrollbar-bg)

  &::-webkit-scrollbar-thumb
    background-color: var(--scrollbar-thumb-bg)
    border-radius: 4px



// 添加状态栏样式
.status-bar 
  position: relative
  display: flex
  align-items: center
  justify-content: space-between
  padding: 4px 16px
  background-color: var(--background-primary)  // 改用主背景色
  border-top: 1px solid var(--background-modifier-border)
  color: var(--text-muted)
  font-size: 12px
  height: 28px  // 稍微增加高度
  flex-shrink: 0
  margin-top: auto  // 将状栏推到底部
  box-shadow: 0 -1px 2px rgba(0, 0, 0, 0.05)  // 添加微妙的阴影

  // 左侧状态区域
  .status-left 
    display: flex
    align-items: center
    gap: 16px  // 增加间距
    
    .status-item
      display: flex
      align-items: center
      gap: 6px
      padding: 2px 8px
      border-radius: 4px
      transition: all 0.2s ease
      
      &:hover
        background-color: var(--background-modifier-hover)
        color: var(--text-normal)
      
      svg
        width: 14px
        height: 14px
        opacity: 0.8
        transition: all 0.2s ease
      
      &:hover svg
        opacity: 1
        transform: scale(1.1)

  // 右侧状态区域
  .status-right
    display: flex
    align-items: center
    gap: 16px
    
    .status-item
      display: flex
      align-items: center
      gap: 6px
      padding: 2px 8px
      border-radius: 4px
      transition: all 0.2s ease
      
      &:hover
        background-color: var(--background-modifier-hover)
        color: var(--text-normal)
      
      svg
        width: 14px
        height: 14px
        opacity: 0.8
        transition: all 0.2s ease
      
      &:hover svg
        opacity: 1
        transform: scale(1.1)

  // 加载指示器样式优化
  .loading-indicator
    display: inline-flex
    padding: 0
    margin: 0
    align-items: center
    flex-direction: row
    gap: 8px
  
    .loading-spinner
      width: 12px
      height: 12px
      border-width: 2px
      border-color: var(--background-modifier-border)
      border-top-color: var(--interactive-accent)
      animation: spin 0.8s linear infinite
      display: none
    
    svg
      width: 14px
      height: 14px
      opacity: 0.8
      color: var(--interactive-accent)
    
    span
      font-size: 12px
      color: var(--text-muted)
      transition: color 0.2s ease

    // 添加加载状态的样式
    &.loading
      .loading-spinner
        display: block
      
      svg
        display: none

  // 滚动状态样式优化
  .scroll-status
    display: flex
    align-items: center
    gap: 4px
    padding: 2px 8px
    border-radius: 4px
    transition: all 0.2s ease
    
    svg
      transition: transform 0.2s ease
      opacity: 0.8
    
    &:hover
      background-color: var(--background-modifier-hover)
      color: var(--text-normal)
      
      svg
        opacity: 1
        transform: translateY(-1px)
    
    span
      font-size: 12px

  // 分隔线样式
  .status-separator
    width: 1px
    height: 14px
    background-color: var(--background-modifier-border)
    margin: 0 8px
    opacity: 0.6

// 加载动画
@keyframes spin
  to
    transform: rotate(360deg)



.note-card
  .note-date
    &.show
      display: block

    &.hide
      display: none


// 改笔记内容样式
.note-card-content 
    .note-content
        // 默认隐藏
        display: none
        
        // 当设置为显示内容时，始终显示
        &.show
            display: block

        &.hide
            display: none
            
        // 当鼠标悬停时显示
        &.hover-show
            display: block
            animation: fadeIn 0.2s ease

// 添加淡入动画
@keyframes fadeIn
    from
        opacity: 0
    to
        opacity: 1

// 添加卡片设置面板样式
.card-settings-panel
    position: absolute
    top: 100%
    right: 0
    background: var(--background-primary)
    border: 1px solid var(--background-modifier-border)
    border-radius: 8px
    padding: 16px
    min-width: 300px
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1)
    z-index: 1000

    .settings-section
        margin-bottom: 16px

        h3
            font-size: 14px
            font-weight: 600
            margin-bottom: 12px
            color: var(--text-normal)

    .setting-item
        display: flex
        align-items: center
        gap: 12px
        margin-bottom: 12px

        label
            flex: 1
            font-size: 13px
            color: var(--text-muted)

        .setting-control-group
            display: flex
            align-items: center
            gap: 8px

            // 控制按钮样式
            .setting-control-btn
                width: 24px
                height: 24px
                padding: 0
                display: flex
                align-items: center
                justify-content: center
                background: var(--background-primary)
                border: 1px solid var(--background-modifier-border)
                border-radius: 4px
                color: var(--text-muted)
                cursor: pointer
                font-size: 16px
                font-weight: bold
                transition: all 0.2s ease
                
                &:hover
                    background: var(--background-modifier-hover)
                    color: var(--text-normal)
                    border-color: var(--interactive-accent)
                
                &:active
                    transform: scale(0.95)
                
                &.decrease
                    padding-bottom: 2px
                
                &.increase
                    padding-bottom: 2px

            // 数字输入框样式
            input[type="number"]
                text-align: center
                width: 50px
                padding: 4px 8px
                border: 1px solid var(--background-modifier-border)
                border-radius: 4px
                font-size: 12px
                color: var(--text-normal)
                background: var(--background-primary)
                margin: 0 4px
                
                &:focus
                    border-color: var(--interactive-accent)
                    outline: none
                
                // 隐藏上下箭头
                &::-webkit-inner-spin-button,
                &::-webkit-outer-spin-button
                    -webkit-appearance: none
                    margin: 0

        input[type="checkbox"]
            width: 16px
            height: 16px
            border: 1px solid var(--background-modifier-border)
            border-radius: 4px
            cursor: pointer

            &:checked
                background-color: var(--interactive-accent)
                border-color: var(--interactive-accent)

        // 添加每行卡片数量控制按钮样式
        .cards-per-row-btn
            width: 24px
            height: 24px
            padding: 0
            display: flex
            align-items: center
            justify-content: center
            background: var(--background-primary)
            border: 1px solid var(--background-modifier-border)
            border-radius: 4px
            color: var(--text-muted)
            cursor: pointer
            font-size: 16px
            font-weight: bold
            transition: all 0.2s ease
            
            &:hover
                background: var(--background-modifier-hover)
                color: var(--text-normal)
                border-color: var(--interactive-accent)
            
            &:active
                transform: scale(0.95)
            
            &.decrease
                padding-bottom: 2px
            
            &.increase
                padding-bottom: 2px

.card-settings-container
  position: relative

// 修改下拉面板样式
.filter-toolbar
    // ... 其他样式保持不变 ...

    // 下拉列表容器样式优化
    .tag-dropdown-container
        position: relative
        min-width: 120px  // 设置最小宽度

        .tag-dropdown
            width: 100%
            padding: 6px 18px
            border: 1px solid var(--background-modifier-border)
            border-radius: 4px
            z-index: 1001
            color: var(--text-muted)
            font-size: 13px
            cursor: pointer
            transition: all 0.2s ease
            display: flex
            align-items: center
            gap: 6px
            
            &::before
                content: ''
                display: inline-block
                width: 16px
                height: 16px
                background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>')
                background-repeat: no-repeat
                background-position: center
                opacity: 0.5

        // 修改下拉面板样式
        .dropdown-panel
            position: absolute
            top: calc(100% + 4px)
            left: 0
            background: var(--background-primary)
            border: 1px solid var(--background-modifier-border)
            border-radius: 4px
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1)
            z-index: 1000
            width: 480px  // 固定宽度
            padding: 8px
            display: none  // 默认隐藏
            
            // 使用网格布局，固定为3列
            display: grid
            grid-template-columns: repeat(3, 1fr)  // 三列等宽
            gap: 4px  // 设置间距
            max-height: 300px
            overflow-y: auto
            
            // 选项样式
            .dropdown-option
                padding: 6px 8px
                cursor: pointer
                color: var(--text-muted)
                font-size: 13px
                border-radius: 4px
                display: flex
                align-items: center
                justify-content: space-between
                transition: all 0.2s ease
                
                &::before
                    content: ''
                    display: inline-block
                    width: 16px
                    height: 16px
                    margin-right: 6px
                    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>')
                    background-repeat: no-repeat
                    background-position: center
                    opacity: 0.5
                    transition: opacity 0.2s ease

                &:hover
                    background-color: var(--background-modifier-hover)
                    color: var(--text-normal)
                    
                    &::before
                        opacity: 1

                // 标签计数样式
                .tag-count
                    background: var(--background-modifier-border)
                    color: var(--text-muted)
                    padding: 2px 6px
                    border-radius: 10px
                    font-size: 12px
                    min-width: 24px
                    text-align: center

        // 悬停时显示面板
        &:hover
            .tag-dropdown
                border-bottom-left-radius: 0
                border-bottom-right-radius: 0
                border-bottom-color: transparent
                background: var(--background-primary)
                color: var(--text-normal)

            .dropdown-panel
                display: grid  // 显示网格布局
                border-top-left-radius: 0
                border-top-right-radius: 0
                margin-top: -1px  // 与下框对齐

// 周视图样式优化
.week-view
    display: flex
    flex-direction: column
    height: 100%
    background: var(--background-primary)
    overflow: hidden  // 防止整体出现滚动条
    
    // 头部样式优化 - 固定头部
    .week-header
        display: flex
        justify-content: space-between
        align-items: center
        padding: 16px 24px
        border-bottom: 1px solid var(--background-modifier-border)
        background: var(--background-primary)  // 确保背景色
        position: sticky  // 固定定位
        top: 0
        z-index: 10
        flex-shrink: 0  // 防止头部被压缩
        
        .week-nav-group
            display: flex
            align-items: center
            gap: 16px
            
            .week-nav-btn
                background: transparent
                border: 1px solid var(--background-modifier-border)
                border-radius: 4px
                padding: 6px
                color: var(--text-muted)
                cursor: pointer
                transition: all 0.2s ease
                
                &:hover
                    background: var(--background-modifier-hover)
                    color: var(--text-normal)
                    border-color: var(--interactive-accent)
            
            .week-info
                font-size: 1.1em
                font-weight: 500
                color: var(--text-normal)
                min-width: 150px
                text-align: center
    
    // 内容区域样式优化
    .week-content
        flex: 1
        display: flex
        flex-direction: column
        height: 100%  // 确保占满高度
        overflow: hidden  // 防止自身滚动
        
        // 日期头部优化 - 固定在内容区顶部
        .week-days-header
            display: flex
            padding: 0
            border-bottom: 1px solid var(--background-modifier-border)
            background: var(--background-primary)
            flex-shrink: 0  // 防止头部压缩
            
            .week-day-header
                flex: 1
                text-align: center
                padding: 12px 8px
                min-width: 200px
                border-right: 1px solid var(--background-modifier-border)
                
                &:last-child
                    border-right: none
                
                .weekday-name
                    color: var(--text-muted)
                    font-size: 0.9em
                    margin-bottom: 4px
                
                .date-number
                    font-size: 1.2em
                    font-weight: 500
                    color: var(--text-normal)
        
        // 笔记容器优化
        .week-notes-container
            display: flex
            flex: 1  // 占满剩余空间
            overflow-y: auto  // 只在容器级别添加垂直滚动
            overflow-x: hidden  // 防止水平滚动
            
            // 日列优化
            .day-notes-column
                flex: 1
                min-width: 200px  // 与头部对齐
                padding: 8px
                display: flex
                flex-direction: column
                gap: 8px
                border-right: 1px solid var(--background-modifier-border)
                overflow: visible  // 移除单独的滚动条
                
                &:last-child
                    border-right: none
                
                // 笔记卡片样式优化
                .week-note-card
                    background: var(--background-secondary)
                    border: 1px solid var(--background-modifier-border)
                    border-radius: 6px
                    padding: 12px
                    cursor: pointer
                    transition: all 0.2s ease
                    flex-shrink: 0  // 防止卡片被
                    
                    &:hover
                        transform: translateY(-2px)
                        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1)
                        border-color: var(--interactive-accent)
                    
                    .week-note-title
                        font-size: 0.9em
                        color: var(--text-normal)
                        white-space: nowrap
                        overflow: hidden
                        text-overflow: ellipsis

            // 优化滚动条样式
            &::-webkit-scrollbar
                width: 8px
                height: 8px
            
            &::-webkit-scrollbar-track
                background: var(--background-secondary)
                border-radius: 4px
            
            &::-webkit-scrollbar-thumb
                background: var(--background-modifier-border)
                border-radius: 4px
                
                &:hover
                    background: var(--text-muted)

// 适配周视图的容器样式
.main-layout .content-section.view-week
    .card-view-content
        padding: 0
        height: 100%
        overflow: hidden
        
        .card-container
            display: block  // 覆盖原有的 grid 布局
            height: 100%
            padding: 0
            margin: 0
            gap: 0
            grid-template-columns: none  // 移除网格列设置
            justify-content: initial  // 移除原有的居中对齐
            
            // 移除原有的卡片间距和对齐方式
            &.grid-view
                display: block
                gap: 0
                grid-template-columns: none

// 主页视图下的容器样式覆盖
.main-layout .content-section.view-home
    .card-view-content
        padding: 0
        height: 100%
        overflow: hidden
        
        .card-container
            display: block  // 覆盖原有的 grid 布局
            height: 100%
            padding: 0
            margin: 0
            gap: 0
            grid-template-columns: none  // 移除网格列设置
            justify-content: initial  // 移除原有的居中对齐
            
            // 移除原有的卡片间距和对齐方式
            &.grid-view
                display: block
                gap: 0
                grid-template-columns: none

// 主页视图样式优化
.home-container
    padding: 20px
    height: 100%
    overflow-y: auto
    background: var(--background-primary)  // 添加背景色
    
    .module-manager
        display: flex
        gap: 8px
        justify-content: flex-end
        margin-bottom: 16px
        
        .module-manage-btn,
        .module-edit-btn
            background: var(--interactive-accent)
            color: var(--text-on-accent)
            padding: 8px 16px
            border-radius: 4px
            cursor: pointer
            transition: all 0.2s ease
            display: flex
            align-items: center
            gap: 6px
            
            &:hover
                opacity: 0.9
                transform: translateY(-1px)
            
            svg
                width: 16px
                height: 16px
    
    // 编辑模式样式
    &.edit-mode
        .module-container
            cursor: move
            border: 2px dashed var(--interactive-accent)
            
            // 调整大小的手柄
            .resize-handle
                position: absolute
                background: var(--interactive-accent)
                opacity: 0.5
                transition: opacity 0.2s ease
                
                &:hover
                    opacity: 1
                
                &.top, &.bottom
                    left: 50%
                    transform: translateX(-50%)
                    width: 40px
                    height: 4px
                    cursor: ns-resize
                
                &.left, &.right
                    top: 50%
                    transform: translateY(-50%)
                    width: 4px
                    height: 40px
                    cursor: ew-resize
                
                &.top
                    top: -2px
                
                &.bottom
                    bottom: -2px
                
                &.left
                    left: -2px
                
                &.right
                    right: -2px
                
                &.top-left, &.top-right,
                &.bottom-left, &.bottom-right
                    width: 10px
                    height: 10px
                    background: var(--interactive-accent)
                    border-radius: 50%
                
                &.top-left
                    top: -5px
                    left: -5px
                    cursor: nw-resize
                
                &.top-right
                    top: -5px
                    right: -5px
                    cursor: ne-resize
                
                &.bottom-left
                    bottom: -5px
                    left: -5px
                    cursor: sw-resize
                
                &.bottom-right
                    bottom: -5px
                    right: -5px
                    cursor: se-resize
            
            // 网格吸附指示器
            .grid-snap-indicator
                position: absolute
                background: rgba(var(--interactive-accent-rgb), 0.2)
                pointer-events: none
                z-index: 1000
    
    .module-grid
        display: grid
        grid-template-columns: repeat(12, 1fr) // 使用12列网格系统
        gap: 20px
        
        .module-container
            background: var(--background-secondary)
            border-radius: 8px
            border: 1px solid var(--background-modifier-border)
            overflow: hidden
            transition: all 0.3s ease
            grid-column: span 4 // 默认占4列
            position: relative
            
            &:hover
                transform: translateY(-2px)
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1)
            
            // 添加模块大小控制按钮
            .module-resize
                position: absolute
                top: 8px
                right: 8px
                display: flex
                gap: 4px
                opacity: 0
                transition: opacity 0.2s ease
                
                button
                    background: var(--background-primary)
                    border: 1px solid var(--background-modifier-border)
                    border-radius: 4px
                    width: 24px
                    height: 24px
                    display: flex
                    align-items: center
                    justify-content: center
                    cursor: pointer
                    transition: all 0.2s ease
                    
                    &:hover
                        background: var(--background-modifier-hover)
                        border-color: var(--interactive-accent)
                    
                    svg
                        width: 14px
                        height: 14px
                        color: var(--text-muted)
            
            &:hover .module-resize
                opacity: 1
            
            .module-header
                padding: 12px 16px
                border-bottom: 1px solid var(--background-modifier-border)
                display: flex
                justify-content: space-between
                align-items: center
                
                h3
                    margin: 0
                    font-size: 1.1em
                    color: var(--text-normal)
            
            .module-content
                padding: 16px
                
                // 热力图模块样式
                &.heatmap-module
                    height: 200px
                
                // 笔记列表模块样式
                .note-item
                    display: flex
                    justify-content: space-between
                    padding: 8px 0
                    border-bottom: 1px solid var(--background-modifier-border)
                    cursor: pointer
                    
                    &:hover
                        background: var(--background-modifier-hover)
                
                // 统计卡片样式
                .stat-card
                    text-align: center
                    padding: 16px
                    
                    .stat-value
                        font-size: 2em
                        font-weight: bold
                        color: var(--text-accent)
                    
                    .stat-label
                        color: var(--text-muted)
                        font-size: 0.9em

// 模块管理器模态框样式优化
.module-manager-modal
    .module-list
        display: grid
        grid-template-columns: repeat(2, 1fr)
        gap: 16px
        margin: 16px 0
        
        .module-item
            display: flex
            align-items: center
            gap: 12px
            padding: 12px
            border: 1px solid var(--background-modifier-border)
            background: var(--background-primary)
            border-radius: 6px
            transition: all 0.2s ease
            
            &:hover
                transform: translateY(-2px)
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1)
            
            .drag-handle
                cursor: move
                color: var(--text-muted)
                padding: 4px
            
            .module-preview
                flex: 1
                min-height: 100px
                border: 1px solid var(--background-modifier-border)
                border-radius: 4px
                overflow: hidden
                
            .module-controls
                display: flex
                flex-direction: column
                gap: 8px
                
                button
                    padding: 4px 8px
                    background: var(--background-modifier-hover)
                    border: none
                    border-radius: 4px
                    cursor: pointer
                    
                    &:hover
                        background: var(--background-modifier-hover-plus)

// 热力图样式
.heatmap-container
    padding: 16px
    
    .heatmap-grid
        display: flex
        flex-direction: column
        gap: 4px
        
        .month-labels
            display: flex
            padding-left: 20px
            margin-bottom: 4px
            
            .month-label
                flex: 1
                text-align: center
                color: var(--text-muted)
                font-size: 0.8em
        
        .week-labels
            position: absolute
            display: flex
            flex-direction: column
            gap: 12px
            padding-top: 4px
            
            .week-label
                height: 10px
                color: var(--text-muted)
                font-size: 0.8em
        
        .days-container
            padding-left: 20px
            display: grid
            grid-template-columns: repeat(53, 1fr)
            gap: 2px
            
            .day-cell
                width: 10px
                height: 10px
                border-radius: 2px
                transition: all 0.2s ease
                cursor: pointer
                
                &:hover
                    transform: scale(1.2)
                
                &.level-0
                    background-color: var(--background-modifier-border)
                
                &.level-1
                    background-color: #9be9a8
                
                &.level-2
                    background-color: #40c463
                
                &.level-3
                    background-color: #30a14e
                
                &.level-4
                    background-color: #216e39

// 日历模块样式
.calendar-module
    display: flex
    height: 100%
    gap: 16px
    
    // 日历部分
    .calendar-section
        flex: 1
        min-width: 280px
        
        .calendar-container
            background: var(--background-primary)
            border: 1px solid var(--background-modifier-border)
            border-radius: 8px
            padding: 16px
            
            .calendar-header
                display: flex
                justify-content: space-between
                align-items: center
                margin-bottom: 16px
                
                .calendar-nav-btn
                    background: transparent
                    border: 1px solid var(--background-modifier-border)
                    border-radius: 4px
                    padding: 4px 8px
                    color: var(--text-muted)
                    cursor: pointer
                    transition: all 0.2s ease
                    
                    &:hover
                        background: var(--background-modifier-hover)
                        color: var(--text-normal)
                
                .calendar-title
                    font-weight: 500
                    color: var(--text-normal)
                    cursor: ns-resize  // 添加滚动指示光标
                    padding: 4px 8px   // 添加内边距使区域更大
                    border-radius: 4px
                    transition: all 0.2s ease
                    
                    &:hover
                        background: var(--background-modifier-hover)
                    
                    &.scrollable
                        position: relative
                        
                        &::after
                            content: ''
                            position: absolute
                            bottom: 2px
                            left: 50%
                            transform: translateX(-50%)
                            width: 10px
                            height: 2px
                            background: var(--text-muted)
                            border-radius: 1px
                            opacity: 0
                            transition: opacity 0.2s ease
                        
                        &:hover::after
                            opacity: 0.5
            
            .calendar-weekdays
                display: grid
                grid-template-columns: repeat(7, 1fr)
                gap: 4px
                margin-bottom: 8px
                
                .weekday
                    text-align: center
                    color: var(--text-muted)
                    font-size: 0.9em
            
            .calendar-grid
                display: grid
                grid-template-columns: repeat(7, 1fr)
                gap: 4px
                
                .calendar-day
                    aspect-ratio: 1
                    padding: 4px
                    border-radius: 4px
                    cursor: pointer
                    position: relative
                    transition: all 0.2s ease
                    
                    &:hover
                        background: var(--background-modifier-hover)
                        transform: translateY(-1px)
                    
                    &.today
                        background: var(--background-modifier-hover)
                        .day-number
                            color: var(--text-accent)
                            font-weight: bold
                    
                    &.empty
                        background: none
                        cursor: default
                    
                    .day-number
                        font-size: 0.9em
                        color: var(--text-normal)
                    
                    .note-count
                        position: absolute
                        bottom: 2px
                        right: 2px
                        min-width: 18px
                        height: 18px
                        background: var(--interactive-accent)
                        color: var(--text-on-accent)
                        border-radius: 9px
                        font-size: 0.8em
                        display: flex
                        align-items: center
                        justify-content: center
    
    // 笔记列表部分
    .notes-section
        flex: 1
        min-width: 200px
        border: 1px solid var(--background-modifier-border)
        border-radius: 8px
        padding: 16px
        
        .date-title
            font-weight: 500
            color: var(--text-normal)
            margin-bottom: 12px
            padding-bottom: 8px
            border-bottom: 1px solid var(--background-modifier-border)
        
        .notes-list
            display: flex
            flex-direction: column
            gap: 8px
            
            .note-item
                padding: 8px
                border-radius: 4px
                cursor: pointer
                transition: all 0.2s ease
                
                &:hover
                    background: var(--background-modifier-hover)
                    transform: translateX(4px)
        
        .empty-message
            color: var(--text-muted)
            text-align: center
            padding: 20px